var rlRFAButton=function(){function A(){if(B()==="SHOW"){var D=rlContextObject.getContextObject();var C={};if(D.accessories.accessoryId!=undefined){C.accessoryId=D.accessories.accessoryId}if(D.accessories.accessoryName!=undefined){C.accessoryName=D.accessories.accessoryName}if(D.accessories.priceFormatted!=undefined){C.priceFormatted=D.accessories.priceFormatted}if(D.accessories.availableFor!=undefined){C.availableFor=D.accessories.availableFor}rlUserDialog.showRequestRFA(C)}}function B(){if(rlContextObject.getIsAccessory()){return"SHOW"}else{return"HIDE"}}return{__init__:function(){},getLabel:function(){return rlTranslator.translate("salesbar_button_rfa")},getStatus:function(){return B()},click:function(){A()}}}();var rlAcceptedWebPolicyLegacyFS=function(){function A(D,C,I){var E={};E.supportsEditMode=function(){return F(false).length>0};E.policyTextValueRenderer=function(M,L,J,K){if(L){K.empty();K.append(jq(L.text));K.find("input").attr("disabled","disabled");K.find("input[name='consent']").attr("checked","checked");K.find("[id]").attr("id",null)}};E.applyUsagesToPolicyTextValueRenderer=function(M,L,J,K){H(L.revokedUsages,false)};E.policyWithUsagesMapper={get:function(K,J){return{revokedUsages:B(false,C),consentedUsages:B(true,C)}},set:function(L,K,J){H(K.revokedUsages,true)}};function H(M,P){var L=F(P);L.removeAttr("checked");for(var O=0;O<L.length;O++){var Q=L[O];var K=false;if(M){for(var N=0,J=M.length;N<J;N++){if(Q.name==M[N].usageId){K=true;break}}}Q=jq(Q);if((!K&&!Q.hasClass("optOutUsage"))||(K&&Q.hasClass("optOutUsage"))){if(Q[0].onclick&&P){Q.click()}else{Q.attr("checked","checked")}}}}function F(J){if(!J){return C.find(".fieldSetViewMode input[name*='Usage']")}else{return C.find(".fieldSetEditMode input[name*='Usage']")}}function G(J){if(!J){return C.find(".fieldSetViewMode input[name*='Usage']")}else{return C.find(".fieldSetEditMode input[name*='Usage']")}}function B(J,L){var M="optOutUsage";var N=G(L);var K=[];jq.each(N,function(O,Q){var P=jq(Q).hasClass(M);var R=Q.checked&&!P||!Q.checked&&P;if(J&&R||!J&&!R){var S={usageId:Q.name};K.push(S)}});return K}return E}return{__init__:function(){},__start__:function(){},createInstance:function(C,B,D){return A(C,B,D)}}}();var rlAccessoryDetail=function(){return{__start__:function(){},__init__:function(){if(rlSearchUtil.getDecodedBase64(location.hash)){jq("#accessoryDetail2FinderSearch").attr("href",jq("#accessoryDetail2FinderSearch").attr("href")+location.hash)}},initTiles:function(){var A=true;rlProductTile.injectAnimation(jq(".accessoriesFinderTileContainer"),A)}}}();var rlAccessoryInfoBoxSlideshow=function(){return{__start__:function(){},__init__:function(){}}}();var rlAddVinToMyVehicleForm=function(){var C=undefined;function A(G,H){var D=CoreFormsBase.inheritanceFrom(rlFormBase.create(G,H));var F=D.parent;D.typeName="rlAddVinToMyVehicleForm";D.switchToEditMode=function(){D.resetValidationMessages();jq.each(D.getFieldSetsById(),function(K,J){J.switchToEditMode()})};function E(){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){G.find(".formSubmitButton").click(I);G.find("#cancelBtn").click(function(){rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()})}}function I(){var J=function(){var K=D.getEditedData();C.vin=K.vehicle.vin;if(rlGlobalConfig.isManualVinMapping&&K.vehicle.vin&&K.vehicle.modelCodeVg){C.modelCodeVg=K.vehicle.modelCodeVg}rlMyVehiclesController.updateVehicle({vehicle:C,successCallback:function(M){var L=rlEventTracker.create("mybmwAddVin");L.trackCustomEvent("mybmwAddVin/VinValidationSuccess&vin="+M.vin,"mybmwAction/myvehicles");D.hideDitherLayer();rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()},errorCallback:function(){D.hideDitherLayer()},validationCallback:function(L){D.hideDitherLayer();D.showBackendMessages(L)}})};D.showDitherLayer();D.waitForLiveValidation(function(){if(D.validate()){J()}else{var K=rlEventTracker.create("mybmwAddVin");K.trackCustomEvent("mybmwAddVin/VinValidationError&vin="+D.getEditedData().vehicle.vin,"mybmwError/myvehicles");D.hideDitherLayer()}})}D.onFormReady=function(){D.switchToEditMode();rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.contentReady()};if(C){G.find(".vehicleBrandInput").val(C.brand);G.find(".vehicleSeriesInput").val(C.series);G.find(".vehicleModelInput").val(C.model)}E();return D}function B(D){C=D}return{__init__:function(){},__start__:function(){},create:function(D,E){return A(D,E)},setVehicle:function(D){B(D)}}}();var rlAddressSet=function(){var X=["addressStatus","addressStatusSelection","companyName","street","streetNumber","postalCode","city","country","preferredAddress"];var L=["companyName","street","streetNumber","postalCode","city"];var Y={};var P={};var G="";var E="";var i=true;var V=[];var N={getListAreaId:function(){return G},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(j){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+G+"form").valid()}};function D(j){rlComponentSetInputCaching.suspendCaching();jq.each(X,function(k,m){var l="";if(m=="addressStatus"){l="PRIVATE"}rlAbstractForm.setData(m+j,l,undefined,G)});rlComponentSetInputCaching.resumeCaching()}function A(j,k,l){if(j==="address"){jq.each(k,function(n,m){if(jq.inArray(n,X)!=-1){rlAbstractForm.setData(n+l,m,undefined,G)}})}else{rlAbstractForm.setData(j+l,value,undefined,G)}}function g(k){if(typeof k==="object"){var j=0;jq.each(k,function(l,m){j++});return(j==0)?true:false}else{return false}}function Q(j,k){var l=B(j,k);if(rlAbstractForm.isFieldEmpty(l.postalCode)&&rlAbstractForm.isFieldEmpty(l.city)&&rlAbstractForm.isFieldEmpty(l.street)&&rlAbstractForm.isFieldEmpty(l.streetNumber)){l=undefined}return l}function b(j,k){return B(j,k)}function B(j,k){jq.each(X,function(l,o){if(o==="country"){k[o]=rlMandator.getCountry()}else{var n=o+(j+1);var m=rlAbstractForm.getFormData(n,G);k[(o!=="preferredAddress")?o:"preferred"]=m}});return k}function a(j){return jq(".componentSetEditArea .address"+j).is(":visible")}function C(j,k){if(k){return true}return a(j+1)}function Z(m,l,j,k){var n={};if(typeof m==="object"){n=m;console.log("Old data:");console.dir(m)}if(g(m)){n.addresses={};jq.each(Y,function(p,o){var q=Q(o,{});if(typeof q!=="undefined"){q.addressChanged=true;if(!n.addresses["address"]){n.addresses["address"]=[]}n.addresses["address"][p]=q}})}else{n.addressChanged=true;Q(j,n)}console.log("New data:");if(n!=undefined){console.dir(n)}else{console.log("undefined")}return n}function K(k,l,j){A(k,l,j);jq.each(Y,function(n,m){F({addressSuffix:m})})}function I(m,l,j){if(typeof l.errorCodeId==="string"&&(l.errorCodeId==="UM_ADDRESS_VALIDATION_INCOMPLETE"||l.errorCodeId==="UM_ADDRESS_VALIDATION_INVALID"||l.errorCodeId==="UM_ADDRESS_POSTAL_CODE_CITY_DONT_MATCH")){var k=[{fieldName:"street"+j},{fieldName:"streetNumber"+j},{fieldName:"postalCode"+j,errorMessage:l.errorMessage},{fieldName:"city"+j}];return rlAbstractFormFieldSet.onErrors(k)}else{if(typeof m!=="undefined"){return rlAbstractFormFieldSet.onError(m+j,l)}else{return undefined}}}function J(){jq.each(Y,function(k,j){D(j+1)})}function W(k,j){var l=[];jq.each(Y,function(o,m){var n;if(typeof j!=="undefined"&&typeof j.address[m]!=="undefined"){n=j.address[m]}else{if(typeof j==="undefined"||(m===0&&g(j.address))){n=new Object()}else{n=j.address}}var q=Z(jq.extend({},n),k,m,true);var p=rlAbstractFormFieldSet.getDiffs(L,n,q);jq.each(p,function(r,t){l[l.length]=t+(m+1)})});return l}function e(k){var j={name:"addressSet",formCache:"addresses",coreId:["address"],getFieldsNames:S,getCacheFieldsNames:function(){return R(k)},getDataToCache:function(){return{"0":b(0,{}),"1":b(1,{})}},setDataFromCache:function(l){if(typeof l["0"]!=="undefined"){A("address",l["0"],1)}if(typeof l["1"]!=="undefined"){A("address",l["1"],2)}},callbackLoadedData:A,callbackBeforeSaveData:Z,callbackAfterSaveData:K,callbackError:I,callbackClearData:J,getDiffs:W};rlAbstractForm.registerComponent(j)}function S(){return X}function R(k){var j=[];for(var l=0;l<X.length;l++){j.push(X[l]+""+k)}return j}function f(j){var k={};jq.each(X,function(m,l){var n=l;if(jq.inArray(l,["street","streetNumber"])!==-1){n="street"}if(jq.inArray(l,["postalCode","city"])!==-1){n="postalCode"}k[l+j]=jq("#errorMsg_"+n+j)});return k}function d(j){var k={};k["address_street"+j]="street"+j+" streetNumber"+j;k["address_zip"+j]="postalCode"+j+" city"+j;return k}function O(m,k,j){var l=Z({},k,j);if(l!==_currentData){rlAbstractForm.showDiffs("addressSet")}}function H(k){var m="input[name=postalCode"+k.addressSuffix+"]";var j="input[name=city"+k.addressSuffix+"]";var l="input[name=street"+k.addressSuffix+"]";jq(l).autocomplete({source:function(p,n){var o={};o.zipCode=jq(m)[0].value;o.city=jq(j)[0].value;o.street=jq(l)[0].value;if((o.zipCode=="")||(o.city=="")){n(null);return }rlCoreServices.addressValidation(o,{success:function(r){if((r.results[0].ShortReport.substr(4,1)=="0")||(r.results[0].ShortReport.substr(4,1)=="2")){var AB="input[name=postalCode"+k.addressSuffix+"]";var AA="input[name=street"+k.addressSuffix+"]";var AC="input[name=city"+k.addressSuffix+"]";var w=jq(AC);var u=jq(AB)[0].value;var x=jq(AA)[0].value;var z=w[0].value;var q=[];var v=0;for(var y=0;y<r.resultCount;y++){var t=r.results[y]["street"];if((r.results[y]["postalcode"]==u)&&(r.results[y]["city"]==z)&&(t.substr(0,x.length).toLowerCase()==x.toLowerCase())){q[v++]=t}}n(q)}else{n(null)}},error:function(q){}})},appendTo:jq("#streetAnchor"+k.addressSuffix),minLength:3,open:function(p,q){i=false;var n=jq.browser&&jq.browser.msie&&jq.browser.msie===true;if(n){var r=jq("#streetAnchor"+k.addressSuffix+" .autoCompleteStreetLayer")[0].offsetLeft;jq("#streetAnchor"+k.addressSuffix+" .autoCompleteStreetLayer").css("left",r-7)}else{var o=jq("#streetAnchor"+k.addressSuffix+" .autoCompleteStreetLayer")[0].offsetTop;jq("#streetAnchor"+k.addressSuffix+" .autoCompleteStreetLayer").css("top",o+5)}},close:function(n,o){i=true;jq(l).valid()}})}function U(j){var l="input[name=postalCode"+j.addressSuffix+"]";var k={};k.zipCode=jq(l)[0].value;if(k.zipCode==""){return }rlCoreServices.addressValidation(k,{success:function(r){var n="input[name=city"+j.addressSuffix+"]";var q="input[name=postalCode"+j.addressSuffix+"]";jq(n).autocomplete("destroy");if(r.results[0].ShortReport.substr(1,1)!="0"){return }else{if((r.resultCount==1)||((r.resultCount>1)&&(r.results[0]["city"]==r.results[1]["city"]))){jq(n)[0].value=r.results[0]["city"];return }else{if(r.resultCount<=20){var t=false;var m=jq(n)[0].value;var o=[];for(var p=0;p<r.resultCount;p++){o[p]=r.results[p]["city"];if(o[p].indexOf(m)!=-1){t=true}}if(!t){jq(n)[0].value=""}jq(n).autocomplete({source:function(y,v){var u=[];var w=0;if(y.term==""){v(o)}else{for(var x=0;x<o.length;x++){if(o[x].substr(0,y.term.length).toLowerCase()==y.term.toLowerCase()){u[w++]=o[x]}}v(u)}},appendTo:jq("#cityAnchor"+j.addressSuffix),minLength:0,open:function(w,x){console.log("open autocomplete");i=false;var z=jq(n);V[j.addressSuffix]=z.hasClass("required");z.removeClass("required");var u=jq.browser&&jq.browser.msie&&jq.browser.msie===true;if(u){var y=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetLeft;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("left",y-65)}else{var v=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetTop;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("top",v+5);var y=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetLeft;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("left",y-58)}},close:function(u,v){console.log("onClose autocomplete");i=true;var w=jq(n);if(V[j.addressSuffix]){w.addClass("required")}w.valid();V[j.addressSuffix]=false}})}else{jq(n).autocomplete({source:function(w,u){var v={};v.zipCode=jq(q)[0].value;rlCoreServices.addressValidation(v,{success:function(AB){var y=[];var z=0;for(var AA=0;AA<AB.resultCount;AA++){var x=AB.results[AA]["city"];if((x.substr(0,w.term.length).toLowerCase()==w.term.toLowerCase())||(w.term=="")){y[z++]=x}}u(y)},error:function(x){}})},appendTo:jq("#cityAnchor"+j.addressSuffix),minLength:0,open:function(w,x){var u=jq.browser&&jq.browser.msie&&jq.browser.msie===true;if(u){var y=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetLeft;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("left",y-7)}else{var v=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetTop;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("top",v+5);var y=jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer")[0].offsetLeft;jq("#cityAnchor"+j.addressSuffix+" .autoCompleteStreetLayer").css("left",y-58)}}})}}}jq(n).trigger("keydown.autocomplete")},error:function(m){}})}function F(j){jq(".addressSetAddressCheck").removeClass("componentSetHighlightError");jq("#errorMsg_postalCode"+j.addressSuffix).html("");jq(".addressSetAddressCheck").removeClass("componentSetHighlightError")}function T(k){var o="input[name=postalCode"+k.addressSuffix+"]";var j="input[name=city"+k.addressSuffix+"]";var n="input[name=street"+k.addressSuffix+"]";var l="input[name=streetNumber"+k.addressSuffix+"]";var m={};m.zipCode=jq(o)[0].value;m.city=jq(j)[0].value;m.street=jq(n)[0].value;m.streetNumber=jq(l)[0].value;if((m.zipCode=="")&&(m.city=="")&&(m.street=="")&&(m.streetNumber=="")){return"empty"}if((m.zipCode=="")||(m.city=="")||(m.street=="")||(m.streetNumber=="")){var p='<label class="componentSetFieldErrorTextArea" for="address_zip'+k.addressSuffix+'" generated="true">'+jq(".bmwIncompleteAddressValidationText").html()+"</label>";jq("#errorMsg_postalCode"+k.addressSuffix).html(p);if((m.zipCode=="")||(m.city=="")){jq("#addressSetPLZLabel").addClass("componentSetHighlightError");if(m.city==""){jq(j).addClass("componentSetHighlightError")}if(m.zipCode==""){jq(o).addClass("componentSetHighlightError")}}if((m.street=="")||(m.streetNumber=="")){jq("#addressSetStreetLabel").addClass("componentSetHighlightError");if(m.street==""){jq(n).addClass("componentSetHighlightError")}if(m.streetNumber==""){jq(l).addClass("componentSetHighlightError")}}return"incomplete"}return"complete"}function M(p,k){if(!i&&typeof p.currentTarget==="object"&&((p.currentTarget.name==="city"+k.addressSuffix)||(p.currentTarget.name==="street"+k.addressSuffix))){p.stopPropagation();return true}var o="input[name=postalCode"+k.addressSuffix+"]";var j="input[name=city"+k.addressSuffix+"]";var n="input[name=street"+k.addressSuffix+"]";var l="input[name=streetNumber"+k.addressSuffix+"]";var m={};m.zipCode=jq(o)[0].value;m.city=jq(j)[0].value;m.street=jq(n)[0].value;m.streetNumber=jq(l)[0].value;F(k);if((m.zipCode!="")&&(m.city!="")){rlCoreServices.zipCityCheck(m,{success:function(q){if(q.status.indexOf("ERROR")!=-1){var r='<label class="componentSetFieldErrorTextArea" for="address_zip'+k.addressSuffix+'" generated="true">'+q.error.errorMessage+"</label>";jq("#errorMsg_postalCode"+k.addressSuffix).html(r);jq("#addressSetPLZLabel").addClass("componentSetHighlightError");jq(j).addClass("componentSetHighlightError");jq(o).addClass("componentSetHighlightError");jq("#addressSetStreetLabel").addClass("componentSetHighlightError");jq(n).addClass("componentSetHighlightError");jq(l).addClass("componentSetHighlightError");p.stopPropagation();return true}else{jq("#errorMsg_postalCode"+k.addressSuffix).html("")}},error:function(q){}})}if((m.zipCode=="")||(m.city=="")||(m.street=="")||(m.streetNumber=="")){jq(o).valid();jq(j).valid();jq(n).valid();jq(l).valid()}else{rlCoreServices.addressCheck(m,{success:function(q){if(q.status.indexOf("ERROR")!=-1){var r='<label class="componentSetFieldErrorTextArea" for="address_zip'+k.addressSuffix+'" generated="true">'+q.error.errorMessage+"</label>";jq("#errorMsg_postalCode"+k.addressSuffix).html(r);jq("#addressSetPLZLabel").addClass("componentSetHighlightError");jq(j).addClass("componentSetHighlightError");jq(o).addClass("componentSetHighlightError");jq("#addressSetStreetLabel").addClass("componentSetHighlightError");jq(n).addClass("componentSetHighlightError");jq(l).addClass("componentSetHighlightError");p.stopPropagation()}else{jq("#errorMsg_postalCode"+k.addressSuffix).html("")}},error:function(q){}})}return true}return{__init__:function(){jq.ui.autocomplete.prototype._renderItem=function(l,n){if(l[0].className.indexOf("autoCompleteStreetLayer")==-1){l[0].className=l[0].className+" autoCompleteStreetLayer shadow"}var k=this.term.split(" ").join("|");var m=new RegExp("("+k+")","i");var j=n.label.replace(m,"<strong class='autoCompleteStreetLayerHighlight'>$1</strong>");return jq("<li class='autoCompleteStreetLayerListItem'></li>").data("item.autocomplete",n).append("<a class='autoCompleteStreetLayerListItemLink'>"+j+"</a>").appendTo(l)}},registerComponent:function(j){e(j)},initForm:function(n,m,k){console.log("addressSetComponent::initForm: "+n);rlPreferredContactSet.show("ADDRESS");var j=rlPage.isEditMode()||rlPage.isDesignMode();if(!j){G=n;E="#"+G;rlAbstractFormFieldSet.initDefaultActions(N);var l=jq("#"+N.getListAreaId()+"form").closest("form");if(l){l.bmwValidate("addErrorPlacements",f(k));l.bmwValidate("modifyGroups",d(k));l.bmwValidate("modifyValidationMessages",m);jq("input[name=streetNumber"+k+"]").focusout(function(o){M(o,{addressSuffix:k})});jq("input[name=street"+k+"]").focusout(function(o){M(o,{addressSuffix:k})});jq("input[name=city"+k+"]").focusout(function(o){M(o,{addressSuffix:k})});jq("input[name=postalCode"+k+"]").focusout(function(o){M(o,{addressSuffix:k});i=true});H({addressSuffix:k})}else{console.warn("addressSetComponent::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(E+"RequiredFieldLabel").html()}})}},onGetCityForZip:function(j){U(j)},addressStatusClicked:function(p){var n=jq(p);var m=n.attr("name");var j=(m&&m.indexOf("addressStatus")>=0)?parseInt(m.substr("addressStatus".length)):-1;var l=n.parents(".componentSet");var o=l.find(".addressCompanyField");var k=(j>0&&P[j-1])?jq('input:text[name="companyName'+j+'"]'):undefined;if(n.val()=="BUSINESS"){o.show();if(k){k.addClass("required")}}else{o.hide();if(k){k.removeClass("required")}}},registerIndex:function(j){Y[j]=j;var k=jq('input.required:text[name="companyName'+(j+1)+'"]');P[j]=(k.length===0)?false:true;k.removeClass("required")},unregisterIndex:function(j){if(typeof Y[j]!=="undefined"){delete Y[j]}if(typeof P[j]!=="undefined"){delete P[j]}},clearAddressFields:function(j){D(j)}}}();var rlAggregatedFormDS=function(){function A(L){var B=L.dataSources;var O={};var M=false;var H={};var E=false;var D=false;function F(){if(!D){J(H);O.success(H);D=true}}function G(P){if(!E){E=true;O.error(P)}}function N(){for(var P=0;P<B.length;P++){if(typeof H[B[P].id]==="undefined"){return false}}return true}function J(Q){if(Q&&B&&B.length>0){for(var P=0;P<B.length;P++){if(B[P]){B[P].postProcessLoadedData(Q)}}}}function I(Q,P){H[Q.id]=P;if(N()){F()}}function C(P){if(typeof P.setUseMock==="function"){P.setUseMock(M)}P.get({success:function(Q){I(P,Q)},error:function(Q){var S={dataSourceId:P.id,rootCause:Q};if(O.canCopeWithDataSourceError(S)){for(var R=0;R<B.length;R++){if(B[R].id===P.id){B.splice(R,1);break}}if(N()){F()}}else{G(Q)}}})}function K(){if(B&&B.length>0){B.sort(function(P,S){var R=P?P.id||"":"";var Q=S?S.id||"":"";if(R.toLowerCase()==="user"){return -1}if(Q.toLowerCase()==="user"){return 1}return(R<Q)?-1:((R>Q)?1:0)})}}this.get=function(Q){O=Q;K();for(var P=0;P<B.length;P++){C(B[P])}};this.setUseMock=function(P){M=P}}return{__init__:function(){},__start__:function(){},createDS:function(B){return new A(B)}}}();var rlBaseListFS=function(){function A(B,F){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,F));var D=C.parent;C.typeName="rlBaseListFS";C.mapOfConvertedData={};C.retriveFullObject=false;C.mergeValueObject=function(G,H){return H};function E(H,G){for(var I in H){if(H.hasOwnProperty(I)){if(!G[I]){G[I]=H[I];G[I].id=-parseInt(G[I].id,10)}else{G[I]=H[I]}}}return G}C.getUserDataForKey=function(G,I){var H=D.getUserDataForKey(G,I);C.mapOfConvertedData[I]=H;if(!C.retriveFullObject&&jq.isPlainObject(H)){if(H.value){return H.value}else{return null}}return H};C.setUserDataForKey=function(G,K,I){var J=I;if(C.mapOfConvertedData[K]){var H=C.mapOfConvertedData[K];if(jq.isPlainObject(H)){if(typeof H.value!=="undefined"){if(!C.retriveFullObject){H.value=I}else{if(J){H=jq.extend(H,J)}else{H.id=-parseInt(H.id,10)}}}else{H=E(H,J)}}}else{H=J}return D.setUserDataForKey(G,K,H)};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlBirthdaySet=function(){var Q=["birthday"];var E="";var T=new Date();var U=false;var J=false;var C=false;var B={};var M={getListAreaId:function(){return E},errorPlacements:function(){return{birthday_day:jq("#errorMsg_birthday"),birthday_month:jq("#errorMsg_birthday"),birthday_year:jq("#errorMsg_birthday")}},groups:{birthday:"birthday_day birthday_month birthday_year"},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(V){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+E+"form").valid()}};function S(){var V={name:"birthdaySet",coreId:["profile"],getFieldsNames:O,getCacheFieldsNames:N,callbackLoadedData:K,callbackBeforeSaveData:R,callbackAfterSaveData:I,callbackError:G,callbackClearData:H,getDiffs:P,callbackCancelEdit:function(){B={};U=false;J=false;C=false}};rlAbstractForm.registerComponent(V);console.log(V.name+" registred")}function O(){return Q}function N(){return Q.concat(["birthday_day","birthday_month","birthday_year"])}function F(Z,X,W){if(typeof W=="string"){W=new Date(W)}T=new Date(W);var Y=T.getFullYear();var V=Y-100;rlAbstractForm.fillDateEnumList("birthday_year",V,Y,true)}function K(W,V){A(W,V)}function A(X,W){var V=rlTime.convertUTCDateToLocal(W);if(V==undefined){V=new Object({year:"",month:"",day:"",dateView:""})}rlAbstractForm.setData("birthday_year",V.year,undefined,E);rlAbstractForm.setData("birthday_month",V.month,undefined,E);rlAbstractForm.setData("birthday_day",V.day,undefined,E);rlAbstractForm.setData("birthday",V.dateView,undefined,E)}function L(){var V=rlAbstractForm.getData(["birthday_year","birthday_month","birthday_day"],E);if(typeof V!=="undefined"){V=rlTime.convertLocalDateToUTC({day:V.birthday_day,month:V.birthday_month,year:V.birthday_year});if(V!=undefined){return V}}return null}function R(Y,X,W){var V=L();Y.birthday=V;return Y}function I(W,V){A(W,V)}function G(W,V){return rlAbstractFormFieldSet.onError(W,V)}function H(){rlAbstractForm.setData("birthday_year","",undefined,E);rlAbstractForm.setData("birthday_month","",undefined,E);rlAbstractForm.setData("birthday_day","",undefined,E);rlAbstractForm.setData("birthday","",undefined,E)}function P(X,W){var V=W||{};var Y=R(jq.extend({},V),X);var Z=rlAbstractFormFieldSet.getDiffs(Q,V,Y);return Z}function D(){var g=jq(".birthday_month")[0].value;var m=jq(".birthday_year")[0].value;var d=rlTime.getMaxDaysForMonth(g,m);if(d==undefined){return }var Y=jq(".birthday_day")[0];if(navigator.userAgent.toLowerCase().indexOf("safari")>-1){var k=document.createElement("select");k.id=Y.id;k.name=Y.name;k.className=Y.className;var f=Y.value;var Z=document.createElement("option");Z.text=Y[0].text;Z.value=Y[0].value;k.add(Z,null);for(var l=1;l<=d;l++){var e=document.createElement("option");var b=(l<10?"0":"")+l;e.text=b;e.value=b;k.add(e,null)}var V=jq(".birthday_day_span")[0];V.innerHTML="";V.appendChild(k);k.value=f}else{if(d>Y.length-1){for(var X=Y.length;X<=d;X++){var b=(X<10?"0":"")+X;jq(".birthday_day")[0].options[X]=new Option(b,b)}}else{if(d<Y.length-1){for(var W=Y.length-1;W>d;W--){Y.options[W]=null}}}}}return{__init__:function(){},registerComponent:function(){S();F("birthday_year",{},(new Date()))},initForm:function(b,Y,a){console.log("birthdaySet::initForm: "+b);var V=rlPage.isEditMode()||rlPage.isDesignMode();if(!V){E=b;var X="#"+b;rlAbstractFormFieldSet.initDefaultActions(M);var W=jq("#"+M.getListAreaId()+"form").closest("form");if(!W){console.warn("birthdaySet::initForm: form not found");return }W.bmwValidate("addErrorPlacements",M.errorPlacements());W.bmwValidate("modifyGroups",M.groups);W.bmwValidate("addGroupLabels",{birthday:jq("#birthdayLabel")});W.bmwValidate("modifyValidationMessages",Y);var Z=jq(".birthday_day, .birthday_month, .birthday_year");Z.live("blur",function(){var d=jq(".birthday_day").val();var g=jq(".birthday_month").val();var e=jq(".birthday_year").val();var f=false;if(d==""&&g==""&&e==""){f=a}else{f=true}if(f){jq(".birthday_day, .birthday_month, .birthday_year").addClass("required")}jq(".birthday_day, .birthday_month, .birthday_year").valid()});Z.live("focus",function(){jq(".birthday_day, .birthday_month, .birthday_year").removeClass("required");jq(".birthday_day, .birthday_month, .birthday_year").valid()});if((navigator.userAgent.indexOf("Safari")!=-1)&&(navigator.userAgent.indexOf("Macintosh")!=-1)){jq(".birthday_day").css("width","56px");jq(".birthday_month").css("width","56px");jq(".birthday_year").css("width","71px")}jq.extend(jq.validator.messages,{required:function(){return jq(X+"RequiredFieldLabel").html()}})}},onChangeBirthdayDate:function(){D()}}}();var rlC2bInformationSet=function(){return{c2bUserName:null,c2bPassword:null,c2bFirstName:null,c2bLastName:null,__init__:function(){},__start__:function(){},isC2BUser:function(){return this.c2bUserName!==null||this.c2bPassword!==null||this.c2bFirstName!==null||this.c2bLastName!==null},resetInformation:function(){this.c2bUserName=null;this.c2bPassword=null;this.c2bFirstName=null;this.c2bLastName=null}}}();var rlC2bLoginButton=function(){return{__start__:function(){},__init__:function(){}}}();var rlCampaign=function(){return{__init__:function(){},initForm:function(){var B=jq("#campaignForm");if(B){var A=jq.data(B[0],"validator");if(typeof A!=="undefined"){A.settings.onkeyup=false}}}}}();var rlCampaignResponseForm=(function(){function A(H,I){var C=CoreFormsBase.inheritanceFrom(rlUserRegisterForm.create(H,I));var G=C.parent;C.typeName="rlCampaignResponseForm";var E=false;C.onReady=function(J){G.onReady(J);B()};C.setData=function(J){G.parent.setData(J);C.switchToEditMode()};C.callDataSinkMethod=function(J){if(J.data.infoMaterial){J.data.materialCodes=J.data.infoMaterial.materialCodes;delete J.data.infoMaterial}if(J.data.materialCodes){rlCoreServices.trackEventAsClick("rfxRfiImplicitlySentByFormSubmit","rfxAction");rlEventTracker.create().trackCustomEvent("cmpRFI","cmpAction")}rlCampaignResponseFormDS.createDS().create(J)};function F(K,J){E=(J===true)}C.getContext=function(){return E?"RFI":"CR"};C.getEditedData=function(J){J=G.getEditedData(J);if(J&&J.user&&J.user.profile){J.user.profile=D(J.user.profile)}return J};function D(K){for(var J in K){if(typeof K[J]=="object"){K[J]=D(K[J])}else{if(K.hasOwnProperty(J)&&J.indexOf("GUID")!=-1){console.log(J);delete K[J]}}}return K}C.getUseCaseMetaDataRoot=function(){return E?"rfiRequest":"campaignResponse"};function B(){var J=C.determineFormSubBrand();if(rlComponentLoader.isRunning("glassPaneLayerNext")){rlGlassPaneLayerNext.subbrandChange(J)}}I.containerEvents.subscribe(I.containerEvents.names.NEED_RFI_METADATA,function(K,J){F(K,J)});C.triggerEvent(I.containerEvents.names.POLL_NEED_RFI_METADATA);return C}return{__init__:function(){},__start__:function(){},create:function(B,C){return A(B,C)}}}());var rlCaptchaFS=function(){function A(B,F){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,F));var D=C.parent;C.typeName="rlCaptchaFS";C.supportsInputCache=function(){return false};C.onBackendMessage=function(G){C.reloadCaptcha()};function E(){return B.find('input[type="text"][data-field="captcha.input"')}C.reloadCaptcha=function(){function I(K){return K&&K.is(".headline, .formHeadline, .headlineFS")}function J(){if(rlPage&&!rlPage.isEditMode()&&!rlPage.isDesignMode()){B.parent(".captchaFS").hide();E().prop("disabled",true);var K=B.parent(".captchaFS").prev();if(!I(K)){K=K.find(".base").last()}I(K)&&K.hide()}}function G(){if(rlPage&&!rlPage.isEditMode()&&!rlPage.isDesignMode()){var K=B.parent(".captchaFS").prev();if(!I(K)){K=K.find(".base").last()}if(I(K)){K.hasClass("hiddenByRemovedFS")&&K.removeClass("hiddenByRemovedFS");K.find(".hiddenByRemovedFS").removeClass("hiddenByRemovedFS");K.show()}E().prop("disabled",false);B.parent(".captchaFS").show()}}G();var H=new Image();B.find(".captcha_image").removeClass("imageLoaded imageEmpty imageFull");H.onload=function(){if((H.width<=1||H.height<=1)&&rlPage&&!rlPage.isEditMode()&&!rlPage.isDesignMode()){B.find(".captcha_image").addClass("imageLoaded imageEmpty");J();jq(window).trigger(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED)}else{B.find(".captcha_image").addClass("imageLoaded imageFull");B.find(".captcha_image").html('<img src="'+H.src+'"/>');jq(window).trigger(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED)}};H.src=rlCoreServices.getCaptchaImageUrl();E().val("");C.resetValidationMessages();return false};C.getMailSummary=function(H,G){return H||[]};C.getEditedData=function(G){G=D.getEditedData(G);if(G&&G.captcha&&E().prop("disabled")===true){G.captcha.hasOwnProperty("input")&&delete G.captcha.input}return G};B.find(".generateNewCaptchaLink").click(C.reloadCaptcha);C.reloadCaptcha();return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlConfigPalette=function(){var b;var O=[];var Q=12,S=1,f=1;var H=0;var J=false;var B="html";var D=[];var P=2;var Z;if(typeof jq.browser!=="undefined"&&(jq.browser.chrome||jq.browser.safari)){B="body"}function E(){return S>1}function M(){return S<f}function d(j){var l='<div class="mybmw_myconfigurationslayer_carcontainer" id="config_${configId}">';var i=(typeof j.valid!=="undefined"&&j.valid==="false");if(i){D[D.length]=j.configId;l+='<div class="mybmw_myconfigurationslayer_invalidConfigText">'+Z.invalidConfigText+"</div>";l+='<div class="invalidConfig"><div class="invalidConfigInner"></div></div>'}if(j.primary==="true"||j.primary===true){var k=true;if(i){l+='<div class="primaryConfig"><div class="primaryConfigInner"></div></div>'}else{l+='<div class="primaryConfig" style="margin-left:0px;"><div class="primaryConfigInner"></div></div>'}}if(j.configId==rlMyConfigsController.getCurrentConfigId()){l+='<div class="mybmw_myconfigurationslayer_chosenConfig"></div>'}l+='<div class="mybmw_myconfigurationslayer_deleteLayer" id="mybmw_myconfigurationslayer_deleteLayer_'+j.configId+'">';l+='<div class="mybmw_myconfigurationslayer_deleteLayer_text">'+Z.configRequest+"</div>";l+='<div><a href="javascript:void(0);" class="buttonComp buttonBlue deleteConfig_link">'+Z.requestDelete+"</a></div>";l+='<div><a href="javascript:void(0);" class="buttonComp deleteConfig_cancel_link">'+Z.requestCancel+"</a></div>";l+="</div>";l+='<div class="mybmw_myconfigurationslayer_ChooseButtonContainer">';l+='<div class="mybmw_myconfigurationslayer_LinkContainer"><a href="javascript:void(0)" class="linkArrow13px mybmw_myconfigurationslayer_ChooseButton">';l+=Z.configurationDetails+"</a></div>";l+='<div class="mybmw_myconfigurationslayer_overButtonBar"></div>';l+="</div>";l+='<div class="mybmw_myconfigurationslayer_image_container">';l+='<div class="mybmw_myconfigurationslayer_image_container_inner"><img src="${imageUrl}" border="0"></div>';l+="</div>";l+='<div class="mybmw_myconfigurationslayer_carcontainer_functions"><div class="mybmw_myconfigurationslayer_RemoveButton baseIconSprite"></div></div>';l+='<div class="title fontBold">${title}</div><div class="description">${description}</div>';l+="</div>";return l.replace("${imageUrl}",rlNccServices.getCosyUrl(j.multipleImageUrl.smallUrl)).replace("${configId}",j.configId).replace("${title}",j.model.name).replace("${description}",j.note)}function e(j){for(var i=0;i<D.length;i++){if(D[i]==j){return true}}}function a(){console.log("Render page...");jq(".mybmw_myconfigurationslayer_carwrapper_inner").empty();g();Y();G()}function g(){console.log("Render palette...");if(O.length>0){var r=H-O.length;var p=Z.toggleTemplate.replace("${configLength}",O.length);jq(".mybmw_myconfigurationslayer_toggle_inner_text").html(p);var v="<span class='mybmw_myconfigurationslayer_infobar_infotext_larger'>"+O.length+"</span>";var m="<span class='mybmw_myconfigurationslayer_infobar_infotext_larger'>"+r+"</span>";var t=Z.infoBarinfoTextTemplate.replace("${configLength}",v).replace("${restConfigs}",m);jq(".mybmw_myconfigurationslayer_infobar_infotext ").html(t);var n;for(var q=1;q<=f;q++){if(q==1){n=0}else{n=(q-1)*1100;n=n+"px"}jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+q).remove();jq("<div class='mybmw_myconfigurationslayer_carwrapper_inner' id='mybmw_myconfigurationslayer_carwrapper_inner_"+q+"' style='left:"+n+"'></div>").appendTo(".mybmw_myconfigurationslayer_carwrapper_cutout");var j=(q-1)*Q;var l=(j+Q)>O.length?O.length:j+Q;for(var o=j;o<l;o++){if((o>0)&&(o%4==0)){jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+q).append('<div class="mybmw_myconfigurationslayer_carcontainer_linespacer"></div>')}var k=O[o];var u=d(k);jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+q).append(u)}}setTimeout(function(){jq(".mybmw_myconfigurationslayer_carwrapper_dither").hide()},500);jq(".mybmw_myconfigurationslayer_carcontainer").each(function(i,w){var x=jq(this).attr("id").split("config_")[1];jq(this).mouseenter(function(){K(x)});jq(this).mouseleave(function(){U(x)})});jq(".deleteConfig_link").each(function(i,w){var x=jq(this).closest(".mybmw_myconfigurationslayer_carcontainer").attr("id").split("config_")[1];jq(this).click(function(y){y.preventDefault();F(x)})});jq(".mybmw_myconfigurationslayer_ChooseButton").each(function(i,w){var x=jq(this).closest(".mybmw_myconfigurationslayer_carcontainer").attr("id").split("config_")[1];jq(this).click(function(){X();C(x)})});jq(".mybmw_myconfigurationslayer_RemoveButton").each(function(i,w){var x=jq(this).closest(".mybmw_myconfigurationslayer_carcontainer").attr("id").split("config_")[1];jq(this).click(function(){var y=".mybmw_myconfigurationslayer_deleteLayer";var z="#mybmw_myconfigurationslayer_deleteLayer_"+x;I();if(jq.browser.msie&&parseInt(jq.browser.version)<9){jq(this).closest(".mybmw_myconfigurationslayer_carcontainer_functions").fadeOut(0);jq(z).fadeIn(0)}else{jq(this).closest(".mybmw_myconfigurationslayer_carcontainer_functions").fadeOut(400);jq(z).fadeIn(700)}})});jq(".deleteConfig_cancel_link").click(function(){I()});jq(".mybmw_myconfigurationslayer_RemoveButton").mouseover(function(){jq(this).addClass("mybmw_myconfigurationslayer_RemoveButton_over")});jq(".mybmw_myconfigurationslayer_RemoveButton").mouseout(function(){jq(this).removeClass("mybmw_myconfigurationslayer_RemoveButton_over")});if(!J){setTimeout(function(){b=jq("#mybmw_myconfigurationslayer_carwrapper_inner_1").innerHeight();b+=110;console.log(b+" Hoehe")},500)}}}function K(i){theCarContainerId="config_"+i;if(jq.browser.msie&&parseInt(jq.browser.version)<9){if(e(i)){jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_invalidConfigText").fadeIn(0)}jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").fadeIn(0);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").find(".mybmw_myconfigurationslayer_LinkContainer").css("margin-top","-2px");jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_carcontainer_functions").fadeIn(0)}else{if(e(i)){jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_invalidConfigText").stop(true,true).delay(P+400).fadeIn(400)}jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").stop(true,true).delay(P).fadeIn(200);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").find(".mybmw_myconfigurationslayer_LinkContainer").stop(true,true).delay(P+200).animate({"margin-top":"-2px"},400);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_carcontainer_functions").stop(true,true).delay(P+600).fadeIn(400)}}function U(i){theCarContainerId="config_"+i;if(jq.browser.msie&&parseInt(jq.browser.version)<9){if(e(i)){jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_invalidConfigText").fadeOut(0)}jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_deleteLayer").fadeOut(0);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").find(".mybmw_myconfigurationslayer_LinkContainer").css("margin-top","30px");jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_carcontainer_functions").fadeOut(0);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").fadeOut(0)}else{if(e(i)){jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_invalidConfigText").stop(true,true).fadeOut(200)}jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_deleteLayer").hide();jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").find(".mybmw_myconfigurationslayer_LinkContainer").stop(true,false).animate({"margin-top":"30px"},400);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_carcontainer_functions").stop(true,true).delay(400).fadeOut(400);jq("#"+theCarContainerId).children(".mybmw_myconfigurationslayer_ChooseButtonContainer").stop(true,true).delay(800).fadeOut(200)}}function Y(){if(f>1){jq(".mybmw_myconfigurationslayer_arrow_right_inner").show();if(M()){jq(".mybmw_myconfigurationslayer_arrow_right_inner").removeClass("mybmw_myconfigurationslayer_arrow_right_imagediv_inactive");jq(".mybmw_myconfigurationslayer_arrow_right_inner").addClass("mybmw_myconfigurationslayer_arrow_right_imagediv_active");jq(".mybmw_myconfigurationslayer_arrow_right_inner").mouseover(function(){jq(".mybmw_myconfigurationslayer_arrow_right_inner").addClass("mybmw_myconfigurationslayer_arrow_right_imagediv_hover")});jq(".mybmw_myconfigurationslayer_arrow_right_inner").mouseout(function(){jq(".mybmw_myconfigurationslayer_arrow_right_inner").removeClass("mybmw_myconfigurationslayer_arrow_right_imagediv_hover")})}else{jq(".mybmw_myconfigurationslayer_arrow_right_inner").unbind("mouseover");jq(".mybmw_myconfigurationslayer_arrow_right_inner").unbind("mouseout");jq(".mybmw_myconfigurationslayer_arrow_right_inner").removeClass("mybmw_myconfigurationslayer_arrow_right_imagediv_active");jq(".mybmw_myconfigurationslayer_arrow_right_inner").removeClass("mybmw_myconfigurationslayer_arrow_right_imagediv_hover");jq(".mybmw_myconfigurationslayer_arrow_right_inner").addClass("mybmw_myconfigurationslayer_arrow_right_imagediv_inactive")}}else{jq(".mybmw_myconfigurationslayer_arrow_right_inner").hide()}}function G(){if(f>1){jq(".mybmw_myconfigurationslayer_arrow_left_inner").show();if(E()){jq(".mybmw_myconfigurationslayer_arrow_left_inner").removeClass("mybmw_myconfigurationslayer_arrow_left_imagediv_inactive");jq(".mybmw_myconfigurationslayer_arrow_left_inner").addClass("mybmw_myconfigurationslayer_arrow_left_imagediv_active");jq(".mybmw_myconfigurationslayer_arrow_left_inner").mouseover(function(){jq(".mybmw_myconfigurationslayer_arrow_left_inner").addClass("mybmw_myconfigurationslayer_arrow_left_imagediv_hover")});jq(".mybmw_myconfigurationslayer_arrow_left_inner").mouseout(function(){jq(".mybmw_myconfigurationslayer_arrow_left_inner").removeClass("mybmw_myconfigurationslayer_arrow_left_imagediv_hover")})}else{jq(".mybmw_myconfigurationslayer_arrow_left_inner").unbind("mouseover");jq(".mybmw_myconfigurationslayer_arrow_left_inner").unbind("mouseout");jq(".mybmw_myconfigurationslayer_arrow_left_inner").removeClass("mybmw_myconfigurationslayer_arrow_left_imagediv_active");jq(".mybmw_myconfigurationslayer_arrow_left_inner").removeClass("mybmw_myconfigurationslayer_arrow_left_imagediv_hover");jq(".mybmw_myconfigurationslayer_arrow_left_inner").addClass("mybmw_myconfigurationslayer_arrow_left_imagediv_inactive")}}else{jq(".mybmw_myconfigurationslayer_arrow_left_inner").hide()}}function C(i){rlMyConfigsController.loadConfiguration(i)}function L(){rlErrorService.handleError({actor:rlErrorService.ACTOR_USER})}function F(i){jq(".mybmw_myconfigurationslayer_carwrapper_dither").show();rlNccServices.deleteConfig({configId:i,success:function(j){a()},error:L,fail:L})}function X(){if(J){jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_up");jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_down");jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_up");jq(".mybmw_myconfigurationslayer_toggle_inner").addClass("mybmw_myconfigurationslayer_toggle_inner_down");var i=400;if(jq.browser.msie&&parseInt(jq.browser.version)<9){i=0}jq(".mybmw_myconfigurationslayer_carwrapper").animate({height:"0px"},i,function(){A();J=false;jq("#mybmw_myconfigurationslayer_carwrapper_inner_1").css("left","0px");jq("#mybmw_myconfigurationslayer_carwrapper_inner_1").fadeTo(0,1);for(var j=2;j<=f;j++){var k=j*1000;jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+j).css("left",k);jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+j).fadeTo(0,1)}});jq(B).animate({scrollTop:0},i);if(jq.browser.msie&&parseInt(jq.browser.version)<8){jq(".mybmw_myconfigurationslayer_toggle_wrapper").css("margin-top","0px")}S=1;jq(".mybmw_myconfigurationslayer_arrow_right_inner").addClass("mybmw_myconfigurationslayer_arrow_right_imagediv_inactive");jq(".mybmw_myconfigurationslayer_arrow_left_inner").addClass("mybmw_myconfigurationslayer_arrow_left_imagediv_inactive")}}function T(){a();var j=700;jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_up");jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_down");jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_down");jq(".mybmw_myconfigurationslayer_toggle_inner").addClass("mybmw_myconfigurationslayer_toggle_inner_up");if(jq.browser.msie&&parseInt(jq.browser.version)<8){jq(".mybmw_myconfigurationslayer_toggle_wrapper").css("margin-top","-13px")}if(jq.browser.msie&&parseInt(jq.browser.version)<9){j=0}var i=b+"px";jq(".mybmw_myconfigurationslayer_carwrapper").animate({height:i},j,function(){A()});jq(B).animate({scrollTop:429},j);jq(".mybmw_myconfigurationslayer_carwrapper_dither").css("height",i);J=true}function V(i){if(i&&i.preventDefault){i.preventDefault()}R();rlUserDialog.showConfigSelector();this.blur()}function W(i){jq(".mybmw_myconfigurationslayer_carwrapper_inner").fadeTo(300,0,function(){O=rlNccServices.sortConfigs(O,i);S=1;a();jq(".mybmw_myconfigurationslayer_carwrapper_inner").delay(300).fadeTo(300,1,function(){})})}function I(){if(jq.browser.msie&&parseInt(jq.browser.version)<9){jq(".mybmw_myconfigurationslayer_deleteLayer").fadeOut(0)}else{jq(".mybmw_myconfigurationslayer_deleteLayer").fadeOut(400)}}function A(){jq(".mybmw_myconfigurationslayer_toggle").mouseover(function(){jq(".mybmw_myconfigurationslayer_toggle_inner_text").css("color","#1C69D4");if(!J){jq(".mybmw_myconfigurationslayer_toggle_inner").addClass("mybmw_myconfigurationslayer_toggle_inner_over_down")}else{jq(".mybmw_myconfigurationslayer_toggle_inner").addClass("mybmw_myconfigurationslayer_toggle_inner_over_up")}});jq(".mybmw_myconfigurationslayer_toggle").mouseout(function(){N()})}function R(){jq(".mybmw_myconfigurationslayer_toggle").unbind("mouseover mouseout");N()}function N(){jq(".mybmw_myconfigurationslayer_toggle_inner_text").css("color","#666666");if(!J){jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_down")}else{jq(".mybmw_myconfigurationslayer_toggle_inner").removeClass("mybmw_myconfigurationslayer_toggle_inner_over_up")}}return{__init__:function(){jq(".mybmw_myconfigurationslayer_toggle_wrapper").fadeOut(0);jq(".mybmw_myconfigurationslayer_toggle_inner_text").fadeIn(0);H=rlNccServices.getMaxNumberOfConfigs();jq(".mybmw_myconfigurationslayer_arrow_left_inner").click(rlConfigPalette.previous);jq(".mybmw_myconfigurationslayer_arrow_right_inner").click(rlConfigPalette.next);jq(".mybmw_myconfigurationslayer_toggle").mouseup(V);A();jq(".mybmw_myconfigurationslayer_infobar_dropdown").change(function(){W(jq(this).val())});jq(window).bind(rlNccServices.EVENT_CONFIG_USERNOTE_CHANGED,function(k,i){var j=jq.grep(O,function(m,l){return m.configId===i.configId})[0];j.note=i.userNote;jq("#config_"+i.configId+" .description").text(i.userNote)});rlMyConfigsController.addConfigListLoadedListener({success:function(i){O=rlNccServices.sortConfigs(i,jq(".mybmw_myconfigurationslayer_infobar_dropdown").val());f=Math.ceil(O.length/Q);jq(".mybmw_myconfigurationslayer_infobar_dropdown").change();a()}});jq(".mybmw_myconfigurationslayer_toggle_wrapper").delay(1000).animate({opacity:1},300);jq(".mybmw_myconfigurationslayer_toggle_inner_text").show()},hasNext:function(){return M()},hasPrevious:function(){return E()},currentPage:function(){return S},totalPages:function(){return f},renderPage:function(){a()},sort:function(i){W(i)},next:function(){if(M()){var i=S+1;jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+S).animate({left:"-1100px"},1000);jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+i).animate({left:"0px"},1200);S++;Y();G()}},previous:function(){if(E()){var i=S-1;jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+S).animate({left:"1100px"},1000);jq("#mybmw_myconfigurationslayer_carwrapper_inner_"+i).animate({left:"0px"},1200);S--;Y();G()}},setMessages:function(i){Z=i}}}();var rlConfigSwitcher=function(){function A(D){return D.replace(".html",".main.html")}function B(){var D={success:function(F){var E=parseInt(F);if(!isNaN(E)&&E>0){C(true)}else{C(false)}},error:function(E){console.log("error reading config count: "+jq.toJSON(E));C(false)}};rlNccServices.getConfigCount(D)}function C(E){if(E){var D=jq("#myConfigurationsPath").attr("href");jq("#myBMWContentArea").load(A(D),function(){rlMyConfigOverview.domLoaded()})}else{var D=jq("#noMyConfigurationsPath").attr("href");jq("#myBMWContentArea").load(A(D))}}return{__init__:function(){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){B()}}}}();var rlConfigteasers=function(){function B(){jq(".configTeaserArea").removeClass("configTeaserAreaWithoutSnapshot");jq(".configTeaserArea").addClass("configTeaserAreaWithSnapshot");jq(".configTeaserAreaExtendedTeasers").hide()}function A(){jq(".configTeaserArea").removeClass("configTeaserAreaWithSnapshot");jq(".configTeaserArea").addClass("configTeaserAreaWithoutSnapshot");jq(".configTeaserAreaExtendedTeasers").show()}return{__init__:function(){if(rlPage.isEditMode()){A();return }rlCoreServices.isLoggedIn({loggedOut:function(){A()}});rlCoreServices.addLoggedInListener(function(){B()});rlCoreServices.addLoggedOutListener(function(){A()});rlMyConfigsController.addConfigLoadedListener({success:function(C){var D=function(){jq(".configTeaserAreaOfferTeasers:hidden").show()};window.setTimeout(function(){var E=jq("meta[name=bmwnext-teaser-parameter-configId]");E=E.length?E:jq('<meta name="bmwnext-teaser-parameter-configId" />').appendTo("head");E.attr("content",C.configId);rlOfferArea.__start__(true,D)},0)}});rlMyConfigsController.addConfigListLoadedListener({success:function(C){if(C.length==0){A();rlOfferArea.__start__(true);jq(".configTeaserAreaOfferTeasers:hidden").show()}else{B()}},error:function(C){A();rlOfferArea.__start__(true);jq(".configTeaserAreaOfferTeasers:hidden").show()}})},__start__:function(){}}}();var rlConsent=function(){var B="consentErrorTextColor";function A(I){var G=jq(".consentUpdateButton:first",I);var E=jq("a:first",G);var F=G.siblings(".consentInputSet");var D=jq(".consentInput",F);var H=jq('input[name="consentCheckbox"]:first',F);var C=jq(".consentErrorText:first",F);H.bind("click",function(){var J=E.data("fileUrl");var K=E.attr("href");E.data("fileUrl",K);E.attr("href",J);if("checked"==H.attr("checked")){C.hide();D.removeClass(B)}});G.bind("click",function(){if("checked"!=H.attr("checked")){C.show();D.addClass(B);return false}})}return{__init__:function(){jq(".consentContainer").each(function(){var C=jq(this);A(C)})}}}();var rlConsentDisclaimerLayer=function(){function A(C,D){console.log("registerConsentLayer for "+C+" dither:"+D);var B=GLOBAL_COOKIES_CONSENT_DISCLAIMER_PATH.replace(".html",".ajax.html");if(rlPage.isEditMode()||rlPage.isDesignMode()||rlPage.isRunningOnAuthorInstance()){B=jq.param.querystring(B,"wcmmode=disabled")}jq.get(B).done(function(E){var F=rlContextLayer.buildNewLayer({componentId:"consentLayer",layerText:E,contentType:"dynamic",replaceIconByDivText:"icon",deactivateCloseEvents:true,offset:{horizontalLayer:{x:0,y:0},verticalLayer:{x:0,y:0}}});jq("body").append('<div id="consentDisclaimerLayer"></div>');jq("#consentDisclaimerLayer").css({position:"absolute"}).append(F.dom);F.callback()});if(D){jq(C).addClass("ditherOverlay").removeClass("iconHover")}jq(C).bind("mouseenter",function(I){var F=jq(this).parent().offset();var H=I.pageX-F.left;var G=I.pageY-F.top;var E=rlContextLayer.getJavaScriptInterface("#consentDisclaimerLayer");if(E.getContextLayer().isVisible()==false){var J=I.pageY;if(G<10){J=I.pageY+10}if(G>this.offsetHeight-20){J=I.pageY-20}jq("#consentDisclaimerLayer").css({"z-index":30000,left:I.pageX+"px",top:J+"px"});E.openLayer()}});jq(C+", .contextLayerDialogMain").live("mouseleave",function(G){var F="";if(G.relatedTarget){F=G.relatedTarget.className}if(F.indexOf("contextLayer")>-1){return }if(F.indexOf(C.substr(1))>-1){return }if(F.indexOf("videoItemContent")>-1){return }if(F.indexOf("socialMedia")>-1){return }var E=rlContextLayer.getJavaScriptInterface("#consentDisclaimerLayer");E.closeLayer()})}return{registerConsentLayer:A}}();var rlCurrentDealerStandaloneFS=function(){function A(B,F){var C=CoreFormsBase.inheritanceFrom(rlCurrentDealerBaseFS.createFS(B,F));var D=C.parent;C.typeName="rlCurrentDealerStandaloneFS";C.onFormReady=function(){D.onFormReady();C.updateView()};C.isDloMapVisible=function(){return(rlComponentLoader.isRunning("dloMapStandaloneFS"))};C.buildDealerInfo=function(H){var G=D.buildDealerInfo(H);G.click(E);return G};function E(){var I=rlDloBaseFS.getDloId(B);var G=rlDloSubBrandService.getSubBrand(I);if(rlDealerFilterHelper.hasBrandMismatch(C.currentDealer,G)){var H=G==="BM"?"BI":"BM";rlDloSubBrandService.setSubBrand(H,I)}rlDloEventsController.getController(B).fireSelectionEvent("highlight",C.currentDealer);return false}return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlCurrentVehicleInformationSet=function(){var b=undefined;var M=new Date();var R=undefined;var i=false;var N=250;var k=false;var o=undefined;var T=undefined;var m=undefined;var a=undefined;var l=undefined;var W=undefined;var J=undefined;var Q=undefined;var H=undefined;var d=false;var A=["brand","series","modelYear","model","bmwVIN","initialRegistration","mileageYear","mileage","usage","vehicleType"];var D="";var q={getListAreaId:function(){return D},errorPlacements:function(){return{brand:jq("#errorMsg_brand"),series:jq("#errorMsg_series"),modelYear:jq("#errorMsg_modelYear"),model:jq("#errorMsg_model"),bmwVIN:jq("#errorMsg_bmwVIN"),initialRegistration:jq("#errorMsg_initialRegistration"),mileageYear:jq("#errorMsg_mileageYear"),mileage:jq("#errorMsg_mileage"),usage:jq("#errorMsg_usage"),vehicleType:jq("#errorMsg_vehicleType")}},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(r){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+D+"form").valid()}};function S(r){var t=jq("#"+D);t.find(".componentSetEditArea").hide();t.find(".componentSetViewArea").hide()}function V(){return A}function f(r){if(typeof r!=="undefined"){if(typeof r==="string"){r=new Date(r)}rlAbstractForm.setData("initialRegistration",r.getFullYear(),undefined,D)}}function e(r,t){if(r&&r==="initialRegistration"){f(t)}else{if(r==="vehicle"){jq.each(t,function(v,u){if(v==="initialRegistration"){f(u)}else{rlAbstractForm.setData(v,u,undefined,D);if(v==="bmwVIN"){g(D)}}})}else{rlAbstractForm.setData(r,t,undefined,D);if(r==="bmwVIN"){g(D)}}}}function C(v,t,r){if(v&&v==="initialRegistration"){if(typeof r==="string"){r=new Date(r)}M=new Date(r);var u=M.getFullYear();rlAbstractForm.fillDateEnumList("initialRegistration",1980,u,true)}else{}}function O(t){if(!t){return null}else{var r=M;r.setFullYear(t);r.setMonth(0);r.setDate(1);return r}}function K(t){if(!t){return true}else{if(typeof t==="object"){var r=0;jq.each(t,function(u,v){r++});return(r==0)?true:false}else{return false}}}function j(w,u,t){var v=rlAbstractForm.getData(A,w,D);var r=(v)?O(v.initialRegistration):null;if(r!=null){v.initialRegistration=r}else{if(v){delete v.initialRegistration}}if(K(v)){v=undefined}return v}function Z(t,r){e(_name,r)}function L(t,r){return rlAbstractFormFieldSet.onError(t,r)}function G(){jq.each(A,function(t,r){rlAbstractForm.setData(r,"",undefined,D)})}function p(u,t){var r=t||{};var v=j(jq.extend({},r),u);var w=rlAbstractFormFieldSet.getDiffs(A,r,v);return w}function I(){console.info("starting current vehicle inforation set");var r={name:"currentVehicleInformationSet",coreId:["vehicle"],getFieldsNames:V,setDataFromCache:function(t){if(typeof t!=="undefined"&&typeof t.vehicle!=="undefined"){n(t.vehicle.brand,t.vehicle.series,t.vehicle.model,t.vehicle.modelYear,t.vehicle.bmwVIN);F(t.vehicle.initialRegistration,t.vehicle.mileageYear,t.vehicle.usage,t.vehicle.vehicleType);e("mileage",t.vehicle.mileage)}},getDataToCache:function(){return{vehicle:j()}},callbackLoadedList:C,callbackLoadedData:e,callbackBeforeSaveData:j,callbackAfterSaveData:Z,callbackError:L,callbackClearData:G,getDiffs:p};rlAbstractForm.registerComponent(r)}function n(u,v,w,r,t){J=u;Q=v;W=w;l=r;H=t;if(d){P()}}function F(u,t,r,v){if(!i){console.info("Wait for pre-owned vehicle list to load before calling setting data.");window.setTimeout(function(){F(u,t,r,v)},N)}else{e("initialRegistration",u);e("mileageYear",t);e("usage",r);e("vehicleType",v)}}function P(){if(typeof J!=="undefined"){if(typeof H!=="undefined"){l=undefined;W=undefined;Q=undefined}o.val(J).change();J=undefined;if(typeof H!=="undefined"){var r="input#"+D+"bmwVIN";jq(r).val(H);H=undefined;window.setTimeout(function(){g(D)},N)}}}function Y(v){var u="select#"+v+"brand";o=jq(u);var r="select#"+v+"series";T=jq(r);var x="select#"+v+"model";m=jq(x);var t="select#"+v+"modelYear";a=jq(t);var w="input#"+v+"bmwVIN";R=rlModelTreeController.buildController({brandsDropdown:o,seriesDropdown:T,modelsDropdown:m,modelYearsDropdown:a,pleaseChooseBrandOptionLabel:o.children("option:first").text(),pleaseChooseSeriesOptionLabel:T.children("option:first").text(),pleaseChooseModelOptionLabel:m.children("option:first").text(),pleaseChooseModelYearOptionLabel:a.children("option:first").text(),afterBrandsLoaded:function(){d=true;P()},afterModelsLoaded:function(){if(typeof W!=="undefined"){m.val(W).change();W=undefined}X()},afterModelYearsLoaded:function(){if(typeof l!=="undefined"){a.val(l).change();l=undefined}},afterSeriesLoaded:function(){if(typeof Q!=="undefined"){T.val(Q).change();Q=undefined}X()},afterBrandSelected:function(){g(v);var y=jq("select[name='brand']");B(y.val(),y)},afterSeriesSelected:function(){var y=jq("select[name='brand']");B(y.val(),y)},afterModelSelected:function(){X()}});R.setErrorHandler(function(){S()});R.loadBrands();jq(w).live("keyup",function(){var y=jq(w).val();if(y.length>0){if(typeof T!=="undefined"){T.attr("disabled","disabled")}if(typeof m!=="undefined"){m.attr("disabled","disabled")}if(typeof a!=="undefined"){a.attr("disabled","disabled")}}else{if(typeof T!=="undefined"&&T.find("option").length>1){T.removeAttr("disabled")}if(typeof m!=="undefined"&&m.find("option").length>1){m.removeAttr("disabled")}if(typeof a!=="undefined"&&a.find("option").length>1){a.removeAttr("disabled")}}})}function B(v,u){var t=jq("select[name='series']");var r=jq("select[name='model']");if(typeof v==="string"&&v.length>0){if(t.hasClass("requiredSeries")){t.addClass("required")}if(r.hasClass("requiredModel")){if(t.val().length>0){r.addClass("required")}else{r.removeClass("required");r.valid()}}}else{if(t.hasClass("requiredSeries")){t.removeClass("required");t.valid()}if(r.hasClass("requiredModel")){r.removeClass("required");r.valid()}}return true}function U(t,u){var r=[];jq.each(u,function(v,w){r.push({key:w.code,value:w.name})});jq("[name='"+t+"']").data("filled",false);rlAbstractForm.fillEnumList(t,r)}function E(v){var t=jq(v);var r=t.children("option");var u=null;if(r.length>0){u=r[0]}t.empty();if(u){t.append(u)}}function g(v){var y=jq("#box"+v+"bmwVIN");if(y.length==0){return }var u=jq(".box"+v+"bmwVIN");var w="input#"+v+"bmwVIN";if(typeof o!=="undefined"&&rlNccServices.modelTreeCheckIsBrandKeyBMW(o.val())){y.fadeIn();u.show();if(jq(w).val().length>0){if(typeof T!=="undefined"){T.attr("disabled","disabled")}if(typeof a!=="undefined"){a.attr("disabled","disabled")}if(typeof m!=="undefined"){m.attr("disabled","disabled")}}jq("input[name='bmwVIN']").focus()}else{y.fadeOut();u.hide();var x=(typeof T!=="undefined")&&T.find("option").length>1;var t=(typeof m!=="undefined")&&m.find("option").length>1;var r=(typeof a!=="undefined")&&a.find("option").length>1;if(x){T.removeAttr("disabled")}if(t){m.removeAttr("disabled")}if(r){a.removeAttr("disabled")}}}function X(){if(!k){return }var u=[b+"initialRegistration",b+"mileageYear",b+"mileage",b+"usage",b+"vehicleType"];var t=m.is(":enabled")&&m.val()!="";for(var r=0;r<u.length;r++){if(t){jq("#"+u[r]).removeAttr("disabled")}else{jq("#"+u[r]).attr("disabled","disabled")}}}return{__init__:function(){},registerComponent:function(){I()},initForm:function(x,w,t){console.log("currentVehicleInformationSetComponent::initForm: "+x);t=t||{};k=t.extendedFieldsRequireModel||false;b=x;Y(x);X();rlAbstractForm.fillDateEnumList("initialRegistration",1980,(new Date()).getFullYear(),true);i=false;rlNccServices.listPreOwnedVehicleEnumerations({success:function(y){U("mileageYear",y.annualUseOptions);U("usage",y.usageOptions);U("vehicleType",y.vehicleTypeOptions);i=true},error:function(){S()}});if(k){m.click(function(){X()})}var r=rlPage.isEditMode()||rlPage.isDesignMode();if(!r){D=x;var v="#"+D;rlAbstractFormFieldSet.initDefaultActions(q);jQuery.validator.addMethod("bmwVINValidate",function(AA,z){var y=jq("input#"+x+"bmwVIN").val();return y.length==0||rlNccServices.checkVIN(y)});var u=jq("#"+q.getListAreaId()+"form").closest("form");if(u.length>0){u.bmwValidate("addErrorPlacements",q.errorPlacements());u.bmwValidate("modifyValidationMessages",w);u.bmwValidate();if(jq("input#"+x+"bmwVIN").length>0){jq("input#"+x+"bmwVIN").rules("add",{bmwVINValidate:true,messages:{bmwVINValidate:jq(".bmwVINValidationText").html()}})}}else{console.warn("contactSetComponent::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(v+"RequiredFieldLabel").html()}})}}}}();var rlDashboardstagearea=function(){var K=0;var B=false;var C;function I(M){if(rlPage.isEditMode()){K=1;L(M);jq(".dashboardStageNavi").css("margin-top","50px")}else{K=3;L(M);H(M);rlCoreServices.isLoggedIn({loggedIn:function(){G(M);J(M)},loggedOut:function(){K--}});F(M)}}function J(M){var N=jq("#"+M+" .dashboardStageTeaser");N.each(function(R,Q){var P=jq(Q);if(P.attr("data-userrole")&&!P.attr("data-maydisplay")){return }var O=P.attr("id");C.trackCustomEvent("mybmwDisplayedStageTeaser=mybmwStageTeaser/"+O,"mybmwStageTeaserView/initializingVisibleStagesForTheUser")})}function G(M){rlNccServices.listPreOwnedBMWVehicleSummaries({success:function(N){B=N.length>0;D(M)}})}function F(M){window.setTimeout(function(){K=0;D(M,true)},6000)}function L(N){var M=jq(".dashboardStageTeaser[data-userrole]");if(M.length==0){D(N);return }if(rlPage.isEditMode()){M.show();D(N);return }M.hide();if(typeof rlCoreServices.checkForRole==="function"){jq.each(M,function(P,Q){var O=jq(Q);rlCoreServices.checkForRole({role:O.attr("data-userrole"),yes:function(){O.attr("data-maydisplay","yes");if(!rlDashboardstagearea.haveInitialisedNavigation){O.show()}D(N)},no:function(){O.remove();D(N)}})})}else{D(N)}}function E(N,P,O){if(typeof N=="undefined"){console.error("Cannot switch teaser: Teaser is undefined!");return }var M=N.attr("id");C.trackCustomEvent("mybmwStageTeaser/"+M,"mybmwAction/switchStageTeaser");window.mybmwDisplayedStageTeasers=M;rlDashboardstagearea.selectedTeaserId=M;jq(".dashboardStageTeaser").hide();N.show();P.find("a").removeClass("active");jq("#"+M+"Link").addClass("active");jq(window).trigger("stagearea-teaser-changed");A(M);if(rlPage.isEditMode()){jq(".dashboardStageTeaser").show();window.location.hash=M}if(O){window.location.reload()}}function A(M){if(M==="dashboardStageConfig"){rlMyConfigsController&&rlMyConfigsController.broadcastCurrentConfiguration()}else{if(M==="dashboardStageVehicle"){rlMyVehiclesController&&rlMyVehiclesController.broadcastCurrentVehicle()}}}function D(U,N){if(!N){K--;if(K>0){return }}var V=jq("#"+U+" .dashboardStageTeaser");var R=jq("#"+U+" .dashboardStageNavi");R.empty();var P=window.location.hash;var O=undefined;var S=undefined;var T=[];var M=0;V.each(function(a,d){var X=jq(d);if(X.attr("data-userrole")&&!X.attr("data-maydisplay")){return }var Y=X.attr("id");T[a]=Y;if(!rlContextObject.isUserLoggedIn()&&Y==="dashboardStageVehicle"){return }var b=X.attr("title")||"TITLE NOT SET";var Z=jq("<li/>");var e="dashboardStageLi";var f=Y+"Li";var W=jq("<a/>").attr("id",Y+"Link").attr("href","javascript:void(0)").html(b).click(function(){E(X,R,rlPage.isEditMode())});Z.append(W);if(b==""){Z.hide()}if(M<1){e+="First";S=X}if(P=="#"+Y){O=X}Z.addClass(e).attr("id",f);R.append(Z);++M});var Q;if(B){rlDashboardstagearea.haveInitialisedNavigation=false;Q=jq("#dashboardStageVehicle")}else{Q=S}if(typeof O!="undefined"){Q=O}if(!rlDashboardstagearea.haveInitialisedNavigation){E(Q,R,false)}if(M>1){R.show();if(typeof rlDashboardstagearea.selectedTeaserId!=="undefined"){jq("#"+rlDashboardstagearea.selectedTeaserId+"Link").addClass("active")}}else{R.hide()}rlDashboardstagearea.haveInitialisedNavigation=true}function H(M){rlCampaignsandoffersstagearea.loadCampaignsAndOffersLargeTeaser(function(O,N){var P=false;if(O!=""){P=true;O=jq(O).find(".stagebackgroundcolor").addClass("dashboardStageTeaser").attr("id","dashboardCampaignStageTeaser");var Q=O.attr("title");if(typeof Q=="undefined"||Q==""){O.attr("title","Meine Kampagne")}jq("#"+M+" .dashboardStageContent").prepend(O)}if(!P&&N){window.mybmwStatus="loggedin|nostageteaser"}if(P&&N){window.mybmwStatus="loggedin|stageteaser"}D(M)})}return{__init__:function(){if(rlPage.isEditMode()){jq(".myBMWStageAreaReal").css("height","100%")}C=rlEventTracker.create("mybmwStageTeaser")},initComponent:function(M){I(M)}}}();var rlDealerHomeStage=function(){var K=null;var I=null;var E=5000;var N=null;var D=[0];function L(){return N.text()==1}function M(R){N.text(R)}function G(){M(1);F()}function H(){var R=K.has(":visible");if(R.next(".dealerHomeStageSlideItem").find(".dealerHomeStageSlideItemRoot").size()===0){R.hide();K.first().show()}else{R.hide().next().show()}Q();O()}function B(){var R=K.has(":visible");if(R.prev(".dealerHomeStageSlideItem").find(".dealerHomeStageSlideItemRoot").size()===0){R.hide();K.last().show()}else{R.hide().prev().show()}Q();O()}function Q(){var R=jq(".dealerHomeStageSlideItem:visible").index();if(jq.inArray(R,D)<0){D.push(R);P()}}function P(){try{rlTeaserTracking.updateSelector(".dealerHomeStageSlideItem:visible > .dealerHomeStageSlideItemRoot")}catch(R){}}function O(){imageIndex=K.has(":visible").index()+1;var R=I.replace(/%{cur}/,imageIndex).replace(/%{total}/,K.size());jq(".largeTeaserSwitchControlImageIndex").text(R)}function A(){if(document.images){var R=new Array;K.find(".backgroundImageImage").not(":first").each(function(U){var T=/url\(|\)|"|'/g;var S=jq(this).css("background-image").replace(T,"");R[U]=new Image();R[U].src=S});jq(window).trigger("largeTeaserStartSlidehow")}}function C(){if(L()){H()}return false}function F(){setTimeout(function(){C();F()},E)}function J(){jq(".largeTeaserSwitch").show();P();if(E>0){G();jq(".largeTeaserSwitchControlPlayPause").show()}}return{__init__:function(){K=jq(".dealerHomeStage > .dealerHomeStageSlideItem > .dealerHomeStageSlideItemRoot");for(var R=0;R<K.length;R++){K[R]=jq(K[R]).parent().get(0)}I=jq(".dealerHomeStage .largeTeaserSwitchControlImageIndex").text();if(K.size()<=1){return }N=jq(".stageLargeTeaserContainerPlay");O();jq(window).bind(rlComponentLoader.getPageReadyTriggerName(),function(){A()});jq(window).bind("largeTeaserStartSlidehow",J());jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPlayMedium").click(function(){M(1);jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPauseMedium").show();jq(this).hide()});jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPauseMedium").click(function(){M(0);jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPlayMedium").show();jq(this).hide()});jq(".largeTeaserSwitchControlNext").click(function(){M(0);jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPlayMedium").show();jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPauseMedium").hide();H();return false});jq(".largeTeaserSwitchControlPrev").click(function(){M(0);jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPlayMedium").show();jq(".largeTeaserSwitchControlPlayPause .spriteIconControlPauseMedium").hide();B();return false});jq(".largeTeaserSwitch").delay(5000).fadeOut(500);jq(".dealerHomeStage").mousemove(function(){jq(".largeTeaserSwitch:hidden").fadeIn(500).delay(2000).fadeOut(500);jq(".largeTeaserSwitch:animated").stop(true,true).fadeIn(500).delay(2000).fadeOut(500)});jq(".largeTeaserSwitch").mouseenter(function(){jq(".largeTeaserSwitch").stop(true,true).fadeIn(500)});jq(".largeTeaserSwitch").mouseleave(function(){jq(".largeTeaserSwitch").delay(2000).fadeOut(500)});A()}}}();var rlDealerIdSmugglerFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlDealerIdSmugglerFS";C.onFormReady=function(){D.onFormReady();if(typeof rlContextObject==="object"&&rlContextObject.isDealer()===true){E.allEvents.trigger(E.containerEvents.names.DEACTIVATE_DLO_FS)}};C.getEditedData=function(F){if(isDefined(rlContextObject)&&rlContextObject.isDealer()===true){var G=rlContextObject.getContextObject().outlet;if(isDefined(G)&&G.distributionPartnerId!==false&&G.outletId!==false){F.dealer={distributionPartnerId:rlContextObject.getContextObject().outlet.distributionPartnerId,outletId:rlContextObject.getContextObject().outlet.outletId}}}return F};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlDealerIframeSmall=function(){return{__start__:function(){},__init__:function(){}}}();var rlDealerInfoServices=function(){function A(K,J,L){rlCmxServices.requestDealers(K,function(N){var M=E(H(N));J(M)},function(M){L(M)})}function H(K){var J=[];jq.each(K,function(M,L){if(typeof L.name!=="undefined"&&L.name!==""){J.push(L)}});return J}function E(K){var J=[];jq.each(K,function(M,L){L=C(L);J.push(L)});return J}function C(K){if(isDefined(K.attributes)&&isDefined(K.attributes.portfolioCodes)){var J=jq.inArray("B1",K.attributes.portfolioCodes);if(J>-1){K.attributes.portfolioCodes[J]="BM"}}return K}function F(K,M,J,L){rlLocalSearchServices.requestPointOfInterests(M,K,function(O){var N=D(O);J(N)},function(N){L(N)})}function D(K){var J=[];jq.each(K,function(L,M){M=B(M);J.push(M)});return J}function B(J){if(!isDefined(J.attributes.portfolioCodes)){J.attributes.portfolioCodes=[rlC2BConfig.getBrand()]}return J}function G(K,J,L){var M;A(K,function(N){M=I(K,N);if(M.length===0){J(N)}else{F(M,"BM",function(O){M=I(M,O);if(M.length===0){J([].concat(N,O))}else{F(M,"BI",function(P){J([].concat(N,O,P))},function(P){L(P)})}},function(O){L(O)})}},function(N){L(N)})}function I(J,L){var K=jq.extend(true,[],J);jq.each(L,function(M,N){var O=jq.inArray(N.key,K);if(O>-1){K.splice(O,1)}});return K}return{__init__:function(){},__start__:function(){},requestDealersFromAllSources:G,requestDealersFromCMX:A}}();var rlDealerLinksBuilder=function(){function A(J,C){var I={};var F=H();function H(){return jq("<div/>").addClass("dealerLinks")}function E(){return jq("<a/>").attr("href","javascript://").addClass("linkArrow13px")}function B(){return jq("<div/>").addClass("dealerLinkWrapper")}function G(L,K){jq(L).attr("data-tracking-id",K);jq(L).attr("data-tracking-info",J.key);jq(L).attr("data-tracking-type",rlTrackingListener.TRACKING_TYPES.LINK)}function D(){return J.attributes.isPublished===false&&typeof J.languageLinks!=="undefined"&&jq.isArray(J.languageLinks)&&J.languageLinks.length>0}I.addEMailLink=function(){var N=J.attributes;if(isDefined(N.mail)&&N.mail!==""){var K="mailto:";K+=encodeURI(N.mail);K+="?body="+encodeURI(rlDloSharedConfig.email.body);K+="&subject="+encodeURI(rlDloSharedConfig.email.subject);var M=E().text(rlDloSharedConfig.labels.email);M.click(C.createTrackHandler("DealerEmailLinkClicked",J.key));M.attr("href",K).attr("target","_blank");var L=B().addClass("dealerMailLink").append(M);F.append(L)}};I.addHomepageLink=function(){var O=J.attributes;if(isDefined(O.homepage)){var M=rlDloSharedConfig.labels.homepage;if(D()){M+=" ["+J.languageLinks[0].languageCode+"]"}var N=E().text(M);N.click(function(){C.createTrackHandler("DealerUrlLinkClicked",J.key)});var K="";if(O.homepage.indexOf("http")!=0&&O.homepage.indexOf("//")!=0){K+="http://"}K+=O.homepage;N.attr("href",K);if(O.isPublished!==true&&!D()){N.attr("target","_blank")}var L=B().addClass("DealerHomepageLink").append(N);F.append(L)}};I.addDetailsLink=function(M){var L=E().text(rlDloSharedConfig.labels.showDetails).click(M);G(L,"dealerDetailsLink");var K=B().addClass("detailsLink").append(L);L.click(C.createTrackHandler("DealerSelectedFromList",J.key));F.append(K)};I.addMarkPrimaryLink=function(M){var L=E().text(rlDloSharedConfig.labels.markPrimary).click(M);var K=B().addClass("makePrimary").append(L);L.click(C.createTrackHandler("MarkPrimaryLinkClicked",J.key));F.append(K)};I.addAddToWatchlistLink=function(M){var L=E().addClass("dloAddToWatchlistLink").text(rlDloSharedConfig.labels.addToWatchlist).click(M);L.click(C.createTrackHandler("AddToWatchlistLinkClicked",J.key));var K=B().append(L);F.append(K)};I.addRemoveFromWatchlistLink=function(N){var M=E().addClass("dloRemoveFromWatchlistLink").text(rlDloSharedConfig.labels.removeFromWatchlist).click(N);var L=B().append(M);var K={key:J.key,formType:C.getFormType()};jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:"dealerDloRemovedFromWatchlist",info:K,type:rlTrackingListener.TRACKING_TYPES.LINK});M.click(C.createTrackHandler("RemoveFromWatchlistLinkClicked",J.key));F.append(L)};I.addPlanRouteLink=function(M){var L=E().addClass("planRouteLink").text(rlDloSharedConfig.labels.planRoute).click(M);L.click(C.createTrackHandler("PlanRouteLinkClicked",J.key));var K=B().append(L);F.append(K)};I.addSelectDealerLink=function(M){var L=E().text(rlDloSharedConfig.labels.selectDealer).click(M);var K=B().addClass("selectLink").append(L);L.click(C.createTrackHandler("ChooseDealerLinkClicked",J.key));F.append(K)};I.addActiveSelectionIndicator=function(){var K=jq("<div/>").text(rlDloSharedConfig.labels.selectedDealer).addClass("baseLabelSprite").addClass("spriteLabelCheckedGreen12").addClass("activeSelection");F.append(K)};I.addDealerManagementConfirmation=function(){var L=jq("<div/>").text(rlDloSharedConfig.messages.dealerAddedToWatchlist).addClass("baseLabelSprite").addClass("spriteLabelCheckedGreen12").addClass("addDealerConfirmation");var K=jq("<div/>").text(rlDloSharedConfig.messages.dealerDeletedFromWatchlist).addClass("baseLabelSprite").addClass("spriteLabelCheckedGreen12").addClass("deleteDealerConfirmation");F.append(L,K)};I.build=function(){return F};return I}return{__init__:function(){},__start__:function(){},create:function(B,C){return A(B,C)}}}();var rlDealerProductTile=function(){var H=".dealerProductTileSmall";var D=".productTileDividerBar";var F=".productTileDetailsLink";var I=".dealerProductTileMore";var C=700;var E=600;var K=0;function J(L){if(L.find(D).is(":visible")){return }L.data("mousepos","in");L.find(F).slideDown(400)}function G(L){L.data("mousepos","out");L.find(F).slideUp(400)}function B(L){if(L.find(D).is(":visible")){return }K=0;if(jq(".dealerProductTileSwitch.opened").length>0){A();K=E+50}window.setTimeout(function(){var N=L.find(".dealerProductTileBig");tileClone=jq(N).clone(true);var M=L.closest(".productTileContainerWrap").nextAll(".productTilesBigView").first();if(M.length==0){M=L.closest(".dealerContentPoolStandardCenter").children(".productTilesBigView")}M.hide().attr("id","dealerProductTile_open");tileClone.appendTo(M).each(function(){jq(tileClone).show();jq(M).animate({opacity:"toggle",height:"toggle"},C)});L.find("img").css("display","inline");L.addClass("opened");M.height(jq(M).children().height());tileClone.find(".dealerProductTileMore").click(function(){A()})},K);L.find(D).fadeIn();G(L)}function A(){jq("#dealerProductTile_open").animate({opacity:"toggle",height:"toggle"},E,function(){jq("#dealerProductTile_open").hide().empty().removeAttr("id");jq(".dealerProductTileSwitch").removeClass("opened")});jq(D).fadeOut()}return{__start__:function(){jq(I).click(function(){B(jq(this).parents(".dealerProductTileSwitch"))});jq(H).hover(function(){J(jq(this))},function(){G(jq(this))})},__init__:function(){},closeTile:function(){A()}}}();var rlDealerSearchStandaloneFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlDealerSearchBaseFS.createFS(B,E));var D=C.parent;C.typeName="rlDealerSearchStandaloneFS";C.getSearchParams=function(){var F=D.getSearchParams();F.filterLogic=C.getFieldsetProperties()["filterlogic"];return F};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlDeliveryWeekFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlContactDateFS.createFS(B,E));var D=C.parent;C.typeName="rlDeliveryWeekFS";C.getMailSummary=function(G,H){var F=true;var I=B.find(".fieldSetEditMode").find(".fieldSetCopyText").text();B.find(".contactDateRow").each(function(J,M){M=jq(M);var K=M.find("label.fieldSetRowLabel").text();var L=M.find("input.weekDisplay").val();if(L!==""){if(F&&I!=""){F=false;G.push({type:H.LABEL,value:I})}G.push({type:H.KEY_VALUE,key:K,value:L})}})};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlDloEventTracker=function(){function A(G,E,D){var J={};J.createTrackHandler=function(L,M){return function(N){J.trackEvent(L,M);N.stopPropagation()}};J.trackEvent=function(M,N,L){M+=isDefined(N)?"_"+N:"";M=F(M);M=H(M);M=C(M);K(M,L)};J.trackEventWithContext=function(M,N,L){M+=isDefined(N)?"_"+N:"";M=F(M);M=H(M);M=I(M);M=C(M);K(M,L)};J.getFormType=function(){var L=C("");return L.replace("@","")};function K(M,L){if(!isDefined(L)){L="dloAction"}if(window.rlCoreServices&&window.rlCoreServices.trackEventAsClick){window.rlCoreServices.trackEventAsClick(M,L)}}function H(L){if(B()){L="idlo"+L}else{L="dlo"+L}return L}function F(L){if(isDefined(G)){L=G+L}return L}function I(L){L+="_"+rlDloSubBrandService.getSubBrand(D);return L}function C(M){if(isDefined(E)&&E.length>0){M+="@"+E}else{if(jq("form.coreForm.campaignResponseForm").length>0){var L=jq("form.coreForm.campaignResponseForm").attr("data-campaignId");M+="@CampaignForm_"+L}else{if(!B()){if(rlComponentLoader.isRunning("glassPaneLayerNext")&&rlGlassPaneLayerNext.isOpen()){M+="@LAYER"}else{M+="@PAGE"}}}}return M}function B(){return rlDealerFilterHelper.isValidRfxType(E)}return J}return{__init__:function(){},__start__:function(){},create:function(B,C,D){return A(B,C,D)}}}();var rlDloMapLocalSearch=function(){function B(O,G){var N=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(O,G));var L=N.parent;N.typeName="rlDloMapLocalSearch";var H=N.typeName+": ";var F;var C="apps-bmwnext-requests-dlomap-map-reset";var D=function(){var T={};var S=[];function Q(){return(T.load==true&&T.show==true&&T.init==true)}function R(){return(T.load==true&&T.show==true&&T.init!=true)}return{pushReady:function(U){T[U]=true;if(R()){J()}if(Q()){jq.each(S,function(V,W){console.log("[dlo.dloMapLocalSearch] initSync de-queues call"+W);W()});S=[]}},syncReady:Q,call:function(U){if(!Q()){console.log("[dlo.dloMapLocalSearch] initSync en-queues call"+U);S.push(U)}else{U()}},reset:function(){T={};S=[]}}}();N.init=function(){L.init();D.reset();var Q=rlDloBaseFS.getDloId(O);var R=rlDloSubBrandService.getSubBrand(Q);G.dloParams.category=R;rlBmwStateOverlay.initDitherLayer("dealerLocatorComponent","dealerLocatorComponent");rlBmwStateOverlay.showLoadingState("dealerLocatorComponent");P(function(){D.pushReady("load")})};N.onFormReady=function(){L.onFormReady();rlDloEventsController.getController(O).addShowMapEventListener(N);jq(window).bind(C,K)};N.onFormClosing=function(){L.onFormClosing();rlDloEventsController.getController(O).removeShowMapEventListener(N);jq(window).unbind(C,K)};N.setCallbacks=function(){jq(window).trigger(C,rlDloBaseFS.getDloId(O));C2B.LocalSearch.Config.onPinInfoShown=N.onDloInfoWindowShown;C2B.LocalSearch.Config.onPinClicked=N.onDloHighlightPin;C2B.LocalSearch.Config.onError=N.onDloError;C2B.LocalSearch.Config.onPinCreate=N.onDloCreateDealerPin;C2B.LocalSearch.Config.onSelectLocation=N.onDloSelectLocation;C2B.LocalSearch.Config.onPinsShow=N.onDloShowPins;C2B.LocalSearch.Config.onSelectMapRoute=N.onDloShowRoutes};N.onShowMapArea=function(R){var Q=O.parent(".dloMapBaseFS").is(":visible");if(R===true&&Q===false){rlRfxViewHelper.show(O.parent(".dloMapBaseFS"),function(){N.adjustMapHeight();D.call(function(){jq(window).trigger(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED,rlDloSharedConfig.domSelectors.rfxScrollToElem)});if(!D.syncReady()){D.pushReady("show")}})}if(R===false&&Q===true){rlRfxViewHelper.hide(O.parent(".dloMapBaseFS"),function(){jq(window).trigger(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED)})}};N.onDloReady=function(){N.setCallbacks();if(rlBrowser.getInternetExplorerVersion()!=7){var Q='<div class="dloMapShadow top"></div><div class="dloMapShadow right"></div><div class="dloMapShadow bottom"></div><div class="dloMapShadow left"></div>';O.find(G.dloParams.mapElement).addClass("mapLoaded").append(Q)}rlBmwStateOverlay.hideState("dealerLocatorComponent");jq(".dloControl").show()};N.switchContext=function(Q){if(Q!=G.dloParams.category){G.dloParams.category=Q;D.call(function(){J()})}};N.onDloError=function(Q){};N.onDloInfoWindowShown=function(Q){};N.onDloHighlightPin=function(Q){};N.onDloSelectLocation=function(Q,R){};N.onDloShowPins=function(Q){};N.onDloCreateDealerPin=function(Q){};N.onClickOnMap=function(){};N.onDragOnMap=function(){};N.onDloShowRoutes=function(Q,S,R){N.drawRoute(S,0)};N.clearMap=function(){D.call(function(){G.formEvents.trigger(G.allEvents.names.CLEAR_ROUTE_RESULTS);F.reset();F.redraw()})};N.redraw=function(){D.call(function(){F.redraw()})};N.triggerResize=function(){D.call(function(){var R=F.getMap();var Q=R.getCenter();google.maps.event.trigger(R,"resize");R.setCenter(Q);R.setZoom(R.getZoom())})};N.getSelectedPin=function(){return F.getSelectedPin()};N.getDealerPin=function(R){var Q=null;var S=F.getPinList();jq.each(S.getPins(),function(T,U){if(this.poi.values.key==R){Q=this;return false}});return Q};N.searchLocations=function(Q){D.call(function(){N.setCallbacks();F.findPois({name:Q.name,attributeFilter:JSON.stringify(Q.attributeFilter)},Q.address)})};N.searchDealers=function(Q){D.call(function(){var R=A(Q);N.setCallbacks();F.pois({key:R})})};N.searchAllDealers=function(S){var R=N.onDloCreateDealerPin;var Q=N.onDloError;if(typeof S=="function"){N.onDloCreateDealerPin=function(){var T=F.getPinList();N.onDloCreateDealerPin=R;N.onDloError=Q;S(T)};N.onDloError=function(){N.onDloCreateDealerPin=R;N.onDloError=Q;S(pinList)}}D.call(function(){N.setCallbacks();F.findPois({name:""},"")})};N.getMap=function(){return F.getMap()};N.calcRouteToDealer=function(Q,R){D.call(function(){N.setCallbacks();F.getRoute().calcRoute(new C2B.LocalSearch.DirectionsRequest({origin:Q,key:R,avoidTolls:rlDloSharedConfig.initParams.route.avoidTolls,avoidHighways:rlDloSharedConfig.initParams.route.avoidHighways,provideRouteAlternatives:true}))})};N.adjustMapHeight=function(){};N.isMockUsage=function(){var Q=false;if(rlPage.isEditMode()||rlPage.isDesignMode()){Q=true}else{if(rlPage.isUseMock()){Q=true}}return Q};N.isAuthorMode=function(){return rlPage.isEditMode()||rlPage.isDesignMode()};function P(R){scripts=[G.dloParams.localSearchScript,"jquery.jsonp-2.1.4.min.js","maps.infobox.js","maps.markerclusterer.js","maps.infobox.js"];var Q=function(T){if(T>=scripts.length){if(R){R()}}else{var S=setTimeout(function(){console.error(H+"failed to load script: "+scripts[T])},CROSSSUBDOMAINAJAX_TIMEOUT);jq.getScript(G.dloParams.url+G.dloParams.scriptPath+scripts[T],function(){clearTimeout(S);Q(T+1)})}};rlGoogleMapsConfig.initGoogleMaps(function(){Q(0)})}function K(Q,R){if(rlDloBaseFS.getDloId(O)!=R){if(isDefined(F)){}}}function J(){var Q=M();F=new C2B.LocalSearch.LocalSearch(Q);F.init();I();E();jq(window).bind(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED,function(){N.triggerResize()});google.maps.event.addListenerOnce(F.getMap(),"tilesloaded",function(R){jq(window).trigger(rlFormFieldSet.EVENT_FIELDSET_SIZE_CHANGED);N.onDloReady();jq(".gm-style").removeClass("gm-style");D.pushReady("init")});google.maps.event.addListener(F.getMap(),"idle",function(){jq(".gm-style").removeClass("gm-style")})}function I(){var R=F.getMap();google.maps.event.addListener(R,"click",function(){N.onClickOnMap()});google.maps.event.addListener(R,"drag",function(){N.onDragOnMap()});var Q={panControl:true,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scaleControl:true,scaleControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},streetViewControl:false,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP,style:google.maps.ZoomControlStyle.LARGE}};R.setOptions(Q)}function E(){InfoBox.prototype.getCloseBoxImg_=function(){var Q="";if(this.closeBoxURL_!==""){Q="<img";Q+=' src="'+this.closeBoxURL_+'"';Q+=' class="dloInfoWindowCloseIcon"';Q+=" />"}return Q}}function M(){return{mapElement:O.find(G.dloParams.mapElement).get(0),clientId:G.dloParams.clientId,clientVariantId:G.dloParams.clientVariantId,country:G.dloParams.country,maxResults:G.dloParams.maxResults,minResults:G.dloParams.minResults,language:G.dloParams.language,category:G.dloParams.category,url:G.dloParams.url,zoomSpace:G.dloParams.zoomSpace,locationPin:G.dloParams.locationPin,localDisplay:G.dloParams.localDisplay,pinIcons:rlDloIcons.getMapIcons(),infoBoxOptions:{closeBoxMargin:"6px",alignBottom:true,pixelOffset:new google.maps.Size(0,0),boxClass:"dloInfoWindow",closeBoxURL:"/etc/designs/bmwnext/apps/bmwnext/requests/static/parComponents/formFieldSets/dealerHandling/dloMapFS/dloMapBaseFS/layer_close_x.png",boxStyle:{width:"260px"},disableAutoPan:false,infoBoxClearance:new google.maps.Size(20,20)},onPinInfoShown:N.onDloInfoWindowShown,onPinClicked:N.onDloHighlightPin,onError:N.onDloError,onPinCreate:N.onDloCreateDealerPin,onSelectLocation:N.onDloSelectLocation,onPinsShow:N.onDloShowPins,onSelectMapRoute:N.onDloShowRoutes}}return N}function A(C){var D=C;if(jq.isArray(C)){D="";jq.each(C,function(){D+=this+","});D=D.slice(0,-1)}return D}return{__init__:function(){},__start__:function(){},createFS:function(C,D){return B(C,D)}}}();var rlDloStandaloneFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlDloBaseFS.createFS(B,E));var D=C.parent;C.typeName="rlDloStandaloneFS";C.init=function(){D.init()};C.supportsInputCache=function(){return false};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlEspHeadlineFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlEspHeadlineFS";C.supportsInputCache=function(){return false};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlEspInfolayerPolicyDS=function(){function A(D){var B=CoreFormsBase.inheritanceFrom(rlPolicyCurrentFormDS.createDS(D,"ESP"));var C=B.parent;B.typeName="rlEspInfolayerPolicyDS";B.mapMetaData=function(I,H){var F={policyCurrent_ESP_Info:{}};var E=jq("<div/>");E[0].innerHTML=I;var G=F.policyCurrent_ESP_Info;G.infolayerPolicyText=jq(E).find(".infolayerPolicyTextblock, .infolayerPolicyTextblockEditMode").html()||"";G.jqInfolayerPolicyLink=jq(E).find(".infolayerPolicyLinkblock").html()||"";return F};B.getMockedMetaData=function(G,F){var E={};E.policyCurrent_ESP_Info={infolayerPolicyText:"Infolayer Policy Text",jqInfolayerPolicyLink:""};G(E)};return B}return{__init__:function(){rlComponentLoader.deferredExec(["dataSourceFactory"],function(){rlDataSourceFactory.registerExternalFactory({canBuild:function(B){return B.id==="espInfolayerPolicy"},createDS:function(B){if(B&&B.id==="espInfolayerPolicy"){return rlEspInfolayerPolicyDS.createDS(B)}else{throw"Cannot build instance of data source: "+B.id}}})})},__start__:function(){},createDS:function(B){return A(B)}}}();var rlEspInfolayerPolicyFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlEspInfolayerPolicyFS";C.supportsInputCache=function(){return false};C.getMetaDataRenderers=function(F){F=D.getMetaDataRenderers(F);F.espInfolayerPolicyRenderer=function(M,H,J){var O=B.find(".espInfolayerPolicy .policyContent");var G=H.infolayerPolicyText;var N=H.jqInfolayerPolicyLink;var I=C.getFieldsetProperties()["dataprotectiontext"];if(N){var K=jq("<a></a>");K.attr("data-tracking-clickable","true");K.attr("data-tracking-type","link");K.attr("data-tracking-id","espInfolayerPolicy");K.attr("href",N);K.attr("target","_blank");K.addClass("infolayerPolicyLink linkCopyText");K.html(I);O.empty();O.append(K)}else{var L=rlContextLayer.buildNewLayer({componentId:"IPFS_ContextLayer_"+E.fsId,groupingParentClass:"infolayerPolicy",layerText:G,contentPosition:"rightDynamicBottom",replaceIconByDivText:'<div class="linkCopyText" data-tracking-clickable="true" data-tracking-type="link" data-tracking-id="espInfolayerPolicy">'+I+"</div>"});O.empty();O.append(jq(L.dom));L.callback()}jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_PAGE_CHANGE_NOTIFICATION)};return F};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlFaqBlock=function(){return{__init__:function(){},__start__:function(){}}}();var rlFeedbackCollector=function(){function A(C){var H=/\[[0-9]+\]/g;var P=[];var Z=[];function a(e,g){if(typeof window.bmwcsaclick==="function"){var f=new Object();f.name=g;f.id="FormErrorTracking_"+C.attr("data-jsmodulevar")+"_"+e.fieldName;f.tagnName="'DIV";console.log('Track Form Error; id="'+f.id+'", name="'+f.name+'"');window.bmwcsaclick(f)}else{console.log("Track Form Error; Not possible - bmwcsaclick is not a function.")}}function O(){C.find(".fieldSetValidationFeedback").hide().empty();C.find(".fieldSetIsShowingValidationMessage").removeClass("fieldSetIsShowingValidationMessage");C.find(".fieldSetHasError").removeClass("fieldSetHasError");C.find(".fieldSetHasWarning").removeClass("fieldSetHasWarning")}function I(f,e){return f.is(e)?f:f.parents(e)}function F(j){var l=j.validator.element;var g=I(l,".fieldSetEditAreaRow");U(g);g.find(".fieldSetValidationFeedback").hide().empty();var i=g.data("validationGroup");if(i!=null){var m=I(C.find("[data-validators*='"+i+"']"),".fieldSetEditAreaRow");U(m);m.find(".fieldSetValidationFeedback").hide().empty()}var e=l.parents("fieldset").length>0?l.parents("fieldset"):l.parents(".baseFS");if(e.hasClass("fieldSetIsShowingValidationMessage")){if(e.find(".fieldSetIsShowingValidationMessage").length==0){U(e)}}var f={fieldName:j.validator.fieldName};var k=E(f);if(isDefined(k)){k.empty()}}function U(e){e.removeClass("fieldSetIsShowingValidationMessage");e.removeClass("fieldSetHasError");e.removeClass("fieldSetHasWarning")}function T(e,f){jq.each(e,function(g,i){i=jq(i);if(!N(i)){U(i);i.addClass("fieldSetIsShowingValidationMessage");i.addClass(f=="WARNING"?"fieldSetHasWarning":"fieldSetHasError")}})}function N(e){return e.attr("class")!=undefined&&e.attr("class").indexOf("fieldSetHasError")>=0}function b(){O();var g=undefined;for(var f=P.length-1;f>=0;f--){var e=P[f].errorKey;var k=(e==="UM_FORBIDDEN"||e==="UM_REQUIRED");var j=(e==="UM_GCDM_FORBIDDEN"||e==="UM_GCDM_EMPTY");if(k||j){g=g||{messageText:"Core/GCDM reported following errors:",errorKey:"UM_METADATA_VIOLATION"};g.messageText+=" ##### "+P[f].fieldName+": "+e;P.splice(f,1)}}if(g){if(rlPage.isProdEnv()){console.error(g.messageText);rlErrorService.handleError({actor:rlErrorService.ACTOR_SYSTEM})}else{P.push(g)}}jq.each(B(),function(i,l){K(l);D(l,true)});jq.each(V(),function(m,l){var n=l.validator.liveOnly;if(n==null||n===false){Q(l)}D(l.validationResult,true)});G()}function G(){if(C.attr("data-scrolltofirstmessage")==="yes"){function e(l){if(l.is("form")||l.hasClass("wizardStep")){return true}else{if(l.css("display")=="none"){return false}else{return e(l.parent())}}}var k=undefined;jq(".fieldSetIsShowingValidationMessage.fieldSetHasError").each(function(l,m){if(e(jq(m))){k=jq(m);return false}});if(typeof k==="undefined"){return }var j=k.parents(".wizardStep");if(j.length>0){var i=j.attr("data-stepindex");jq(".wizardStepTab[data-stepindex="+i+"]").click()}if(k.parents(".gplnContentValue").length>0){jq(".gplnContentValue").scrollTo(k,400)}else{var g=C.parent().find(".wizardtabs");if(g&&g.length>0&&C.attr("data-ensurewizardvisible")==="yes"){var f=k.offset().top-g.height()-5;jq.scrollTo(f,400)}else{jq.scrollTo(k,400)}}}}function D(e,f){if(!e){return }jq.each(jq.isArray(e)?e:[e],function(i,g){var j,l;if(g.errorKey||g.fieldName){j=E(g);l=W(g);if(f){a(g,l)}if(typeof j==="undefined"){var k="Cannot find placement for validation message: "+g.errorKey;if(rlPage.isIntEnv()===true||rlPage.isProdEnv()===true){console.error(k);rlErrorService.handleError({actor:rlErrorService.ACTOR_SYSTEM})}else{throw (k)}}else{if(typeof l==="undefined"){var k="Cannot find validation message for: "+g.fieldName+"#"+g.errorKey;if(rlPage.isIntEnv()===true||rlPage.isProdEnv()===true){console.error(k);rlErrorService.handleError({actor:rlErrorService.ACTOR_SYSTEM})}else{throw (k)}}else{j.text(l);d(g,j)}}}if(jq.isFunction(g.feedbackCallback)){g.feedbackCallback(j,l)}})}function d(f,i){var g=i.parents("fieldset").length>0?i.parents("fieldset"):i.parents(".baseFS");T(g,f.level);var e=I(i,".fieldSetEditAreaRow");T(e,f.level);if(f.validationGroup!=null){e.data("validationGroup",f.validationGroup);var j=I(C.find("[data-validators*='"+f.validationGroup+"']"),".fieldSetEditAreaRow");T(j,f.level);j.data("validationGroup",f.validationGroup)}i.show()}var M;function E(e){if(typeof M==="undefined"){M=C.find("[data-validationplacements]")}var g=undefined;var i=[];jq.each(M,function(j,l){var k=jq(l);if(k.prop("disable-validationplacements")===true){return true}jq.each(k.attr("data-validationplacements").split(","),function(m,n){if(n===e.fieldName+"."+e.errorKey){i.push(l);return false}else{if(n===e.fieldName){i.push(l);return false}else{if(n===e.errorKey){i.push(l);return false}}}})});if(i&&i.length>0){g=jq(i)}if(typeof g==="undefined"){var f=C.find(".fieldSetEditMode [data-field='"+e.fieldName+"']");if(f.length>0){f=f.parents(".fieldSetEditAreaRow").find(".fieldSetValidationFeedback");if(f.length>0){g=f}}}if(typeof g==="undefined"){var f=C.find(".fieldSetEditMode [data-field='"+e.fieldName+"']");if(f.length>0){f=f.find(".fieldSetValidationFeedback");if(f.length>0){g=f}}}return g}function Y(k,f){var g=[];if(k){var i=k.match(H);var e=i!=null&&i.length>0;var j=k.replace(H,"");g.push(k+"#"+f);if(e){g.push(j+"#"+f)}g.push(k);if(e){g.push(j)}}g.push(f);return g}function W(e){if(typeof e.messageText!=="undefined"){return e.messageText}var f=Y(e.fieldName,e.errorKey);return rlTranslator.translateFirstFound(f)}function B(){return P.slice()}function V(){return Z.slice()}function K(e){var f=jq.inArray(e,P);if(f!==-1){P.splice(f,1)}}function S(){return P.length>0||Z.length>0}function R(){if(P.length>0){return true}var e=false;jq.each(Z,function(f,i){var g=i.validationResult.level;if(g==null||g==="ERROR"){e=true;return false}});return e}function L(e){if(!e){return }var f=jq.isArray(e)?e:[e];jq.merge(P,f)}function J(e){var f=false;jq.each(V(),function(i,g){var k=(e.validationResult||{}).validationGroup;var j=(g.validationResult||{}).validationGroup;if((g.validator.element===e.validator.element)||(j!=null&&k===j)){f=true;return false}});return f}function Q(e){jq.each(V(),function(g,f){if(f.validator.element===e.validator.element){Z.splice(g,1)}})}function X(e){jq.each(V(),function(g,j){var f=j.validationResult.validationGroup;var i=e.validator.validatorName;if(f!=null&&f===i){Q(j)}})}return{reset:function(){P=[];Z=[];O()},hasFeedback:function(){return S()},hasErrorFeedback:function(){return R()},addFeedback:function(e){L(e)},clearFormFeedback:function(){O()},showFormFeedback:function(){b()},showLiveFeedback:function(f){var e=f.validationResult;if(!e||(jq.isArray(e)&&e.length<1)){e=null}if(e!=null){if(J(f)){Q(f);X(f)}if(e){Z.push(f);D(e)}}else{Q(f);X(f);F(f)}},getMessageKeys:function(f,e){return Y(f,e)},getPlacementForFeedback:function(e){return E(e)},showFeedback:function(e,f){return d(e,f)}}}return{__init__:function(){},__start__:function(){},create:function(B){return A(B)}}}();var rlFwSlideshowControl=function(){function D(G){return jq(G).find(".fwSlideshowSlides .fwSlideDiv").outerWidth(true)}function F(H){var G=jq(H).attr("data-currentslide");if(G===undefined){E(H,0);return 0}else{return parseInt(G)}}function B(G){return jq(G).find(".fwSlideshowSlides .fwSlide").size()}function E(H,G){jq(H).attr("data-currentslide",G)}function C(I){var H=F(I);var G=B(I);if(G<2){jq(I).find(".fwSlideshowControlDiv").hide();return }jq(I).find(".fwSlideshowButtonLeft").removeClass("fwSlideshowButtonDisabled").addClass("fwSlideshowButtonEnabled");jq(I).find(".fwSlideshowButtonRight").removeClass("fwSlideshowButtonDisabled").addClass("fwSlideshowButtonEnabled");if(H==0){jq(I).find(".fwSlideshowButtonLeft").addClass("fwSlideshowButtonDisabled").removeClass("fwSlideshowButtonEnabled")}if(H==G-1){jq(I).find(".fwSlideshowButtonRight").addClass("fwSlideshowButtonDisabled").removeClass("fwSlideshowButtonEnabled")}}function A(H){var G=F(H);jq(H).find(".fwSlideshowSlides .parsys").stop(true,true).animate({left:-1*D(H)*G},{duration:1000});C(H)}return{__init__:function(){jq(".fwSlideshowContainerPublish").each(function(){var G="#"+jq(this).attr("id");C(G);E(G,0);jq(G).find(".fwSlideshowSlides .fwSlide").each(function(H){console.log(".fwSlide");jq(this).css("left",D(G)*H);jq(this).css("top",0);jq(this).css("position","absolute")});jq(G).find(".fwSlideshowControlRight").click(function(){jq(G).find(".accessoryInfoBoxSlide").css("display","block");if(jq(this).parent().hasClass("fwSlideshowButtonDisabled")){return false}var H=F(G)+1;E(G,H);A(G);return false});jq(G).find(".fwSlideshowControlLeft").click(function(){jq(G).find(".accessoryInfoBoxSlide").css("display","block");if(jq(this).parent().hasClass("fwSlideshowButtonDisabled")){return false}var H=F(G)-1;E(G,H);A(G);return false})})}}}();var rlGlossaryIndexFilter=function(){function E(){var G=jq(".indexLetterItem:visible").length;jq(".indexEntriesCount").text(G);if(G==1){jq(".indexEntriesCountLabelSingular").show();jq(".indexEntriesCountLabelPlural").hide()}else{jq(".indexEntriesCountLabelSingular").hide();jq(".indexEntriesCountLabelPlural").show()}}function C(){A();E();jq(".glossaryIndexLeftFilterList input").attr("checked",false)}function A(){jq(".indexLetterItem").show();jq(".indexLetterGroup").show()}function D(){jq(".indexLetterItem").hide()}function B(G){jq("."+G).show()}function F(){A();var G=new Array();jq(".glossaryIndexLeftFilterList input:checked").each(function(){G.push(jq(this).val())});if(G.length>0){D();jq(G).each(function(H,I){B(I)});jq(".indexLetterGroup").each(function(){if(jq(this).find(".indexLetterItem:visible").length<1){jq(this).hide()}})}else{C()}E()}return{resetFilter:function(){C()},__init__:function(){jq(".glossaryIndexLeftFilterList input").change(function(){F()});F()}}}();var rlHeadlineFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlHeadlineFS";C.supportsInputCache=function(){return false};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlHighlightFlash=function(){var A=".abstractLayerContent .flashPlayer";HIGHLIGHT_LAYER_CONTENT="#gplnContentValue "+A;return{startFlash:function(E,F,B){if(rlCookieController.isRegulationThirdAccepted()){var C=rlHighlightFlash.$layer=E.parent();rlHighlightFlash.$layerParent=C.parents(".flashContentWrapper");rlGlassPaneLayerNext.openDialog({content:C,flexible:true,flexibleSelector:A,onOpen:function(){rlHighlightFlash.showHighlight(HIGHLIGHT_LAYER_CONTENT,F,B);jq(E).find("iframe").remove()},onClose:function(){setTimeout(function(){jq(".flashContentWrapper").find("iframe").remove()},600)}})}else{var D=jq(E).attr("data-fallbackPagePath");if(!D){if(jq("#dialogPlaceholder").size()==0){jq("body").append('<div id="dialogPlaceholder">Fallback page missing</div>')}rlGlassPaneLayerNext.openDialog({content:"#dialogPlaceholder",height:200,width:300})}else{rlGlassPaneLayerNext.openDialog({url:D})}}},showHighlight:function(D,C,B){if(jq(D).length>0){if(C&&B){jq(HIGHLIGHT_LAYER_CONTENT).css({width:C,height:B})}jq(D).parent().show();window.location.hash=jq(D).attr("id").replace(/_flashObj/,"")}},__init__:function(){jq(window).resize(function(){setTimeout("abstractLayerImage.positionLayer();",0)});var B=window.location.hash;if(B.length>0){var C=jq(B+"_flashObj");if(C.length==1){jq(window).one(rlComponentLoader.getPageReadyTriggerName(),function(){jq("."+B.replace(/#/,"")+".flashLink").trigger("click")})}}},__start__:function(){}}}();var rlHighlightHTML=function(){var A=".abstractLayerContent .flashPlayer";HIGHLIGHT_LAYER_CONTENT="#gplnContentValue "+A;return{startHtmlLayer:function(D,E,B){if(rlCookieController.isRegulationThirdAccepted()){var C=rlHighlightHTML.$layer=D.parent();rlHighlightHTML.$layerParent=C.parents(".flashContentWrapper");rlGlassPaneLayerNext.openDialog({content:C,flexible:true,flexibleSelector:A,onOpen:function(){rlHighlightHTML.showHighlight(HIGHLIGHT_LAYER_CONTENT,E,B);jq(D).find("iframe").remove()},onClose:function(){setTimeout(function(){jq(".flashContentWrapper").find("iframe").remove()},600)},onAfterAjaxContentLoaded:function(){console.log("iframe content is ready");rlHighlightHTML.renderIframeHTML(HIGHLIGHT_LAYER_CONTENT)}})}else{fallbackPath=jq(D).find("iframe").attr("data-fallbackPagePath");if(fallbackPath==""&&fallbackPath.length==0){if(jq("#dialogPlaceholder").size()==0){jq("body").append('<div id="dialogPlaceholder">Fallback page missing</div>')}rlGlassPaneLayerNext.openDialog({content:"#dialogPlaceholder",height:200,width:300})}else{rlGlassPaneLayerNext.openDialog({url:fallbackPath})}}},showHighlight:function(D,C,B){if(jq(D).length>0){if(C&&B){jq(HIGHLIGHT_LAYER_CONTENT).css({width:C,height:B})}jq(D).parent().show();window.location.hash=jq(D).attr("id")}},renderIframeHTML:function(B){jq(B).append("<h1></h1>")},__start__:function(){}}}();var rlIframe=function(){return{__init__:function(){}}}();var rlImageUploadFS=function(){var B="/usermgmt-user/services/_{mandatorContext}/impulse/me/uploadImage";function A(C,I){var F=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(C,I));var H=F.parent;F.typeName="rlImageUploadFS";var E=undefined;var D=false;F.getValidationRules=function(J){J.requiredImage=function(L,K){if(!D){return{fieldName:L,level:"ERROR",errorKey:"requiredValue",messageText:F.getFieldsetProperties()["requiredmessage"]}}};J.backendError=function(L,K){if(E){E.fieldName=L}return E};return J};F.supportsInputCache=function(){return false};F.init=function(){H.init();if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){G()}};function G(){if(typeof rpc!="undefined"){rpc.destroy()}var J=rlPage.getNextCoreUrl();easyXdmUploadRpcHtml=J+"/usermgmt-user/upload-rpc.html";easyXdmScriptUrl=J+"/usermgmt-user/easyXDM.min.js";easyXdmSwfUrl=J+"/usermgmt-user/easyxdm.swf";easyXdmFormAction=J+rlMandator.replaceCoreUrl(B);jq.getScript(easyXdmScriptUrl,function(){easyXDM.DomHelper.requiresJSON(rlPage.getNextCoreUrl()+"/usermgmt-user/json2.js");var L=jq(C).parents("form");L.attr("action",easyXdmFormAction).attr("method","POST");L.attr("target","upload_target");L.attr("enctype","multipart/form-data");L.attr("id","realImageUploadForm");var M=false;var K="";rpc=new easyXDM.Rpc({remote:easyXdmUploadRpcHtml,swf:easyXdmSwfUrl,onReady:function(){}},{local:{returnUploadResponse:function(O){var N=jq(".fieldSetValidationFeedback",C);if(O.responseStatus==="OK"){jq(".uploadedImage",C).attr("src",easyXdmFormAction);jq(".uploadedImage",C).fadeIn(700);jq(".uploadedFilename",C).html(O.name);N.parents(".fieldSetEditAreaRow").removeClass("fieldSetIsShowingValidationMessage");N.parents(".fieldSetEditAreaRow").removeClass("fieldSetHasError");N.parents(".fieldSetEditAreaRow").removeClass("fieldSetHasWarning");N.parents(".fieldSetValidationMessage").hide();N.hide();E=undefined;D=true;jq(".imageUploadSuccessArea",C).show()}else{jq(".uploadedImage",C).hide();N.html(O.responseStatus);N.parents(".fieldSetEditAreaRow").addClass("fieldSetIsShowingValidationMessage");N.parents(".fieldSetEditAreaRow").addClass("fieldSetHasError");N.parents(".fieldSetValidationMessage").show();N.show();E={fieldName:"image.upload",level:"ERROR",errorKey:"backendValidation",messageText:O.responseStatus};D=false;jq(".imageUploadSuccessArea").hide()}}}})})}return F}return{__init__:function(){},__start__:function(){},createFS:function(C,D){return A(C,D)},highlightBrowseButton:function(C){jq("#"+C+"_imageBrowseFileButton").addClass("hover")},unhighlightBrowseButton:function(C){jq("#"+C+"_imageBrowseFileButton").removeClass("hover")},fileInputChanged:function(C,E){if(jq("#"+E+"_fileName").length>0){document.getElementById(E+"_fileName").value=rlImageUploadFS.extractFilename(C);var D=jq("buttonUpload");if(C!=""){D.next(".formBoxDisableButtonBar").hide()}else{D.next(".formBoxDisableButtonBar").show()}}},submitRealform:function(C){if(!jq("#"+C).hasClass("fieldSetHasError")){jq("#realImageUploadForm").submit()}},extractFilename:function(D){var C;C=D.lastIndexOf("\\");if(C>=0){return D.substr(C+1)}C=D.lastIndexOf("/");if(C>=0){return D.substr(C+1)}return D}}}();var rlImplicitEmailPolicyUsageFS=function(){function A(H,X){var P=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(H,X));var K=P.parent;P.typeName="rlImplicitEmailPolicyUsageFS";var F={telephone:"TelephoneUsage",postal:"PostalUsage",email:"EmailUsage",emarketing:"EMarketingUsage",sms:"SmsUsage",fax:"FaxUsage",mms:"MmsUsage",tracking:"TrackingUsage"};var S=false,N=false,Y=false;var Q=undefined,E=undefined;var C=true;P.getFieldMappers=function(d){d=K.getFieldMappers(d);d.cacheLoggedInUser={get:function(f,e){},set:function(g,f,e){E=G({user:f});Q=U({user:f})}};return d};P.getEditedData=function(g){if(!C){return g}var k=Y?G(g):E;var d=!!k;var j=U(g)||Q;j.consentedUsages=j.consentedUsages||[];j.revokedUsages=j.revokedUsages||[];if(!jq.isArray(j.consentedUsages)){j.consentedUsages=[j.consentedUsages]}if(!jq.isArray(j.revokedUsages)){j.revokedUsages=[j.revokedUsages]}var e,m;if(d){e=j.consentedUsages;m=j.revokedUsages}else{e=j.revokedUsages;m=j.consentedUsages}var l=-1;var i=function(p){for(var o=0;o<p.length;o++){if(p[o].usageId==="EmailUsage"){return o}}return l};if(i(e)==l){e.push({usageId:"EmailUsage"})}var f=i(m);if(f!=l){m.splice(f,1)}var n=jq("[data-policyversion='2.0']").find(".policyUsage");jq.each(n,function(o,p){p=jq(p);if(J==B(p)){W(p,j.consentedUsages)}});n=jq(".policyTextblock").find('input[name*="Usage"]');jq.each(n,function(o,p){V(p,j.consentedUsages)});g.user.policy=j;return g};function W(g,d){var f=true;var e=F[g.attr("data-usages")];jq.each(d,function(i,j){if(e==j.usageId){f=false}});if(f){d.push({usageId:e})}}function V(i,d){var f=true;var g="optOutUsage";var e=jq(i).hasClass(g);if(i.checked&&!e||!i.checked&&e){jq.each(d,function(j,k){if(i.name==k.usageId){f=false}});if(f){d.push({usageId:i.name})}}}var b="undefined",J="consented",T="revoked";function B(g){var f=g.attr("data-consentgui")||g.attr("data-usagegui");if(f==="checkbox"){var j=g.find("input:checkbox").is(":checked");var e=g.attr("data-usagecheckedmeans");if(e){if(e==="consented"){return j?J:T}else{if(e==="revoked"){return j?T:J}else{throw"Unsupported value for data-usagecheckedmeans: "+e}}}else{return j?J:T}}else{if(f==="radiobuttons"){var d=g.find("input:checked");if(d.length===0){return b}else{var i=d.attr("data-consentvalue")||d.attr("data-usagevalue");if(i===J){return J}else{if(i===T){return T}else{throw"Unsupported value for data-usagevalue or data-consentvalue: "+i}}}}else{throw"Unsupported policy GUI type: "+f}}}function G(d){return(d&&d.user&&d.user.profile&&d.user.profile.email)?d.user.profile.email.value:""}function U(e){var d=undefined;if(e&&e.user&&e.user.policy){d=e.user.policy}if(e){jq.each(e,function(f,g){if(f.indexOf("policyCurrent_")===0){d=g}})}return d}function L(){X.allEvents.trigger(X.containerEvents.names.PING_POLICY_PROVIDER)}function O(){X.containerEvents.subscribe(X.containerEvents.names.PONG_POLICY_PROVIDER,function(){S=true})}function D(){X.containerEvents.subscribe(X.containerEvents.names.USER_POLICY_CHANGED,function(d,e){Q=e})}function R(){X.allEvents.trigger(X.allEvents.names.PING_EMAIL_PROVIDER)}function I(){X.containerEvents.subscribe(X.containerEvents.names.PONG_EMAIL_PROVIDER,function(){N=true});X.formEvents.subscribe(X.formEvents.names.PONG_EMAIL_PROVIDER,function(){Y=true})}function M(){X.containerEvents.subscribe(X.containerEvents.names.USER_PROFILE_EMAIL_CHANGED,function(e,d){E=d})}function Z(){if(!N&&!S){H.find(".implicitEmailPolicyUsageFSError_Inactive").css("display","block");C=false}}function a(){if(S||Y||N){var d=H.parents("form").find("fieldset");var e=false;d.each(function(g,f){f=jq(f).parent();if(f.hasClass("implicitEmailPolicyUsageFS")){e=true}else{if(f.hasClass("policyBaseFS")&&e){H.find(".implicitEmailPolicyUsageFSError_BeforePolicy").css("display","block");C=false}else{if(f.hasClass("communicationsFS")&&e){H.find(".implicitEmailPolicyUsageFSError_BeforeCommunications").css("display","block");C=false}}}})}}P.init=function(){K.init();L();R();Z();a()};O();D();I();M();return P}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlImportExport=function(){function A(D){var C={"jcr:primaryType":"cq:Dialog",xtype:"bmwuploaddialog",title:CQ.I18n.getMessage("Xlsx-Datei hochladen"),formUrl:CQ.Util.externalize(D),fileUpload:true,items:{"jcr:primaryType":"cq:Panel",items:{"jcr:primaryType":"cq:WidgetCollection",zipFile:{xtype:"fileuploadfield",fieldLabel:CQ.I18n.getMessage("Upload Xlsx File"),fieldDescription:CQ.I18n.getMessage("! Import process could take a while. Please do not close this window until a status window is displayed."),fileNameParameter:"filename",name:"datafile"}}}};var B=CQ.WCM.getDialog(C);B.show()}return{__init__:function(){},__start__:function(){},openImportDialog:function(B){return A(B)}}}();var rlInfoTextFS=function(){function A(B,F){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,F));var D=C.parent;C.typeName="rlInfoTextFS";var E=null;C.init=function(){D.init();B.find(".copyText").find("p:empty").remove();if(B.parents(".baseFS").prev().hasClass("headlineFS")){B.parents(".baseFS").addClass("fieldSetFollowsHeadline")}E=C.getFieldsetProperties();G()};C.supportsInputCache=function(){return false};function G(){if(typeof E!=="undefined"){if(F.isLoggedIn){if(E.showforlogginusereditmode=="true"||rlPage.isEditMode()){B.parent().show()}else{B.parent().hide()}}else{if(E.showforanonymoususereditmode=="true"||rlPage.isEditMode()){B.parent().show()}else{B.parent().hide()}}}}return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlInsiderApplicationFormDataSink=function(){var C;var B;function A(F){var E=rlUserMgmtConverter.translateCreateDataToRequest(F);E.personalityFavorites=E.multiRadioGroup;delete E.multiRadioGroup;if(E.user.hobbies!=null&&typeof E.user.hobbies!=undefined){var D=new Array();jq.each(E.user.hobbies,function(G,H){if(H.action=="INSERT"||H.action=="UPDATE"){D.push(H)}});E.user.hobbies=D}return E}return{__init__:function(){},send:function(D){var E=A(D.data);rlCoreServices.applyToInsider({data:E,success:D.success||jq.noop,error:function(F){if(D.error){D.error(F)}},validation:function(F){runValidationCallback(F,D.validation)}})}}}();var rlIntegrityCheck=function(){var B='<style> * {  margin: 0;  padding: 0;  font: 12px Verdana, Arial}code {  font-family: "Courier New", Courier}#options {  width: 957px;  margin: 20px auto;  text-align: right;  color: #9ac1c9}#options a {  text-decoration: none;  color: #9ac1c9}#options a:hover {  color: #033}#acc {  width: 957px;  list-style: none;  color: #033;  margin: 0 auto 40px}#acc h3 {  width: 943px;  border: 1px solid #9ac1c9;  padding: 6px 6px 8px;  font-weight: bold;  margin-top: 5px;  cursor: pointer; }#acc .acc-section {  overflow: hidden;  background: #fff}#acc .acc-content {  width: 925px;  padding: 15px;  border: 1px solid #9ac1c9;  border-top: none;  background: #fff}#acc1 {  width: 925px;  list-style: none;  color: #033;  margin-bottom: 15px}#acc1 h3 {  width: 911px;  border: 1px solid #9ac1c9;  padding: 6px 6px 8px;  font-weight: bold;  margin-top: 5px;  cursor: pointer;}#acc1 .acc-section {  overflow: hidden;  background: #fff}#acc1 .acc-content {  width: 893px;  padding: 15px;  border: 1px solid #9ac1c9;  border-top: none;  background: #fff}.result_OK {background:#c4e58e}.result_NOK {background:red}</style>';var C={};function E(F){return document.getElementById(F)}function D(G,F){return F.getElementsByTagName(G)}C.accordion=function(){function H(I){this.n=I;this.a=[]}H.prototype.init=function(R,O,K,I,M){var P=E(R),N=s=0,J=P.childNodes,L=J.length;this.s=M||0;this.m=K||0;for(N;N<L;N++){var Q=J[N];if(Q.nodeType!=3){this.a[s]={};this.a[s].h=h=D(O,Q)[0];this.a[s].c=c=D("div",Q)[0];h.onclick=new Function(this.n+".pr(0,"+s+")");if(I==s){h.className=this.s;c.style.height="auto";c.d=1}else{c.style.height=0;c.d=-1}s++}}this.l=s};H.prototype.pr=function(L,M){for(var J=0;J<this.l;J++){var K=this.a[J].h,N=this.a[J].c,I=N.style.height;I=I=="auto"?1:parseInt(I);clearInterval(N.t);if((I!=1&&N.d==-1)&&(L==1||J==M)){N.style.height="";N.m=N.offsetHeight;N.style.height=I+"px";N.d=1;K.className=this.s;G(N,1)}else{if(I>0&&(L==-1||this.m||J==M)){N.d=-1;K.className="";G(N,-1)}}}};function G(I){I.t=setInterval(function(){F(I)},20)}function F(K){var I=K.offsetHeight,J=K.d==1?K.m-I:I;K.style.height=I+(Math.ceil(J/5)*K.d)+"px";K.style.opacity=I/K.m;K.style.filter="alpha(opacity="+I*100/K.m+")";if((K.d==1&&I>=K.m)||(K.d!=1&&I==1)){if(K.d==1){K.style.height="auto"}clearInterval(K.t)}}return{slider:H}}();function A(H,K,J){var G='<li class="result_'+H.result+'">';G+="<h3>"+H.itemName+":"+H.result+"</h3>";G+='<div class="acc-section" style="height: auto; "><div class="acc-content">';if(H.checkItems){G+='<ul class="acc" id="'+K+'">';J.push(K);for(var I=0,F=H.checkItems.length;I<F;I++){G+=A(H.checkItems[I],K+"1"+I,J)}G+="</ul>"}if(H.checkResults&&H.checkResults.entry){for(var I=0,F=H.checkResults.entry.length;I<F;I++){G+='<p class="'+(H.checkResults.entry[I].value==="NOK"?"result_NOK":"reslut_OK")+'">'+H.checkResults.entry[I].key+":"+H.checkResults.entry[I].value+"</p>"}}G+="</div></div>";G+="</li>";return G}return{__start__:function(){rlDither.on(jq("body"));rlCrossSubDomainAjax.call({url:rlPage.getNextCoreUrl()+"/healthcheck/internal/integrityCheck/policy/",timeout:100000,success:function(I){var J=[];jq("body").html(B+'<ul class="acc" id="acc">'+A(I.data,"acc1",J)+"</ul>");var G="";J.reverse();for(var H=0,F=J.length;H<F;H++){G=J[H]+"Accordion";window[G]=new C.accordion.slider(G);window[G].init(J[H],"h3",1,-1,"acc-selected")}}})}}}();var rlJQuery_clickoutside=function(){return{__init__:function(){(function(A){A.fn.clickoutside=function(D){var C=1,B=A(this);B.cb=D;this.click(function(){C=0});A(document).click(function(){C&&B.cb();C=1});return A(this)}})(jq)}}}();var rlLayerBackground=function(){var A="white";var B="";return{__init__:function(){console.log("rlLayerBackground init")},__start__:function(){},attachBackgroundImage:function(E,F){console.log("rlLayerBackground.attachBackgroundImage");B=E;var D=jq("#gplnContent "+B).length>0?"#gplnContent":B;var C=jq("#gplnContentValue "+B).length>0?"#gplnContentValue":"body";if(rlBrowser.getInternetExplorerVersion()==7){D="#gplnContent"}A=jq(D).css("background");if(typeof A=="undefined"||A===""){A="white"}jq(D).css("background","white url("+F+") top right no-repeat");if(typeof rlGlassPaneLayerNext!="undefined"&&rlGlassPaneLayerNext!=0){rlGlassPaneLayerNext.addCloseListener(function(){rlLayerBackground.detachBackgroundImage()})}if(rlBrowser.getInternetExplorerVersion()!=7){jq(C).scroll(function(){var G=jq(this).scrollTop();jq(D).css("background-position","right "+parseInt(-G)+"px")})}},detachBackgroundImage:function(){var C="";if(jq("#gplnContent "+B).length>0){C=".gplnAjaxContent"}else{if(jq(B).length==0&&jq("#gplnContent").length>0){C="#gplnContent"}else{C=B}}if(rlBrowser.getInternetExplorerVersion()==7){C="#gplnContent"}jq(C).css("background",A)}}}();var rlLayerButton=function(){return{__init__:function(){},exitDialog:function(B,A){if(parent&&A&&A.length>0){parent.document.location.href=A+".html"}if(A&&A.length>0){document.location.href=A+".html"}rlDialog.closeDialog(B);return false}}}();var rlLeftnavigation=function(){function A(){console.log("test if navi should be shown");if(rlPage.isEditMode()||rlPage.isDesignMode()){jq("#leftNavigationContainer").css("visibility","visible");jq("#leftNavigationContainer .hideInNav").css("display","block");jq("#leftNavigationContainer .cdpNaviItem").css("display","block");return }if(jq("#leftNavigationContainer").length==1){if(jq("#leftNavigationContainer").hasClass("authRequired")){rlCoreServices.isLoggedIn({loggedIn:function(){G();C()}})}else{jq("#leftNavigationContainer").show();E()}}jq(window).bind(rlContextObject.events.BRAND_SUBBRAND_CHANGED,K);if(pageHowToBuyButton==true){if(rlContextObject.getContextObject().page.brandSubbrand=="brand-bmwi"){J()}}}function K(L,M){if(M=="brand-bmwi"){J()}else{I()}}function J(){jq(".howToBuyButton").stop();jq(".howToBuyButton").show();jq(".howToBuyButton").animate({opacity:1},700)}function I(){jq(".howToBuyButton").stop();jq(".howToBuyButton").animate({opacity:0},400,function(){jq(".howToBuyButton").hide()})}function E(){jq("#leftNavigation").find("ul").each(function(L,M){if(jq(M).find("li:visible").length==0){jq(M).hide()}})}function C(){var O=jq("#leftNavigationContainer ul li.leftNavigationNode");var P=false;var R={};O.each(function(T,V){var S=jq(V).data("userroles");if(typeof S!=="undefined"&&S!=""){var U=S.split(",");jq.each(U,function(Y,X){var W=jq.trim(X);if(W.length>0){R[W]=false}})}});var Q=0;jq.each(R,function(T,S){if(R.hasOwnProperty(T)){++Q}});var N=function(){if(Q>0){O.each(function(T,V){var S=jq(V).data("userroles");if(typeof S!=="undefined"&&S!=""){var U=S.split(",");jq.each(U,function(Y,X){var W=jq.trim(X);if(R[W]===true){jq(V).removeClass("hideCauseRoleCheckRequired");return false}})}})}if(!P){D();P=true}E()};if(Q<1){N();return true}var L=Q;var M=function(){--L;if(L<1){N()}};jq.each(R,function(T,S){rlCoreServices.checkForRole({role:T,yes:function(U){R[U]=true;M()},no:function(){M()},error:function(){M()},callbackData:T})})}function G(){if(F()){rlStageTeaser.loadStageTeaserList(function(M){var N=[].concat(M.campaigns);if(N.length>0){var L=jq("#lnMybmwCampaigns_and_offers").parent().find("a");jq.each(N,function(Q,O){if(typeof O!="undefined"){var P=O.landingPageURL;var R=L.filter('[href="'+P+'"]');if(R.length>0){R.show();R.parent("li").show();R.parent("li").parent("ul").show()}}})}})}}function F(){return jq("#leftNavigation").find("a.linkArrow13pxActive").filter("#lnMybmwCampaigns_and_offers").length==1}function D(){window.setTimeout(function(){jq("#leftNavigationContainer").css({visibility:"visible",opacity:0});jq("#leftNavigationContainer").animate({opacity:1},400,function(){jq(this).css("filter","")})},2000)}function B(){jq("#leftNavigationContainer").animate({opacity:0},400);jq("#leftNavigationContainer").delay(400).css({visibility:"hidden",opacity:0})}function H(){rlCoreServices.isLoggedIn({loggedOut:B,loggedIn:C});rlCoreServices.addLoggedInListener(C);rlCoreServices.addLoggedOutListener(B)}return{__init__:function(){A()},__start__:function(){H()},showHowToBuyButton:function(){J()},hideHowToBuyButton:function(){I()}}}();var rlLoginLayer=function(){var C={};function A(E){rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog();rlLoginservice&&rlLoginservice.doDefaultPostLoginBehaviour()}function D(){return".loginLayer"}function B(N,j){var Z=CoreFormsBase.inheritanceFrom(CoreFormsBase.createBaseType());var Q=Z.parent;Z.typeName="rlLoginLayer";var P=undefined;var O=undefined;var e=undefined;function H(){var m=l();rlLoginservice&&rlLoginservice.resendActivationMail({mail:m.login,success:function(n){rlUserDialog&&rlUserDialog.showResendActivationLinkInfoDialog()},error:function(n){G()}})}function i(){var m=l();rlLoginservice&&rlLoginservice.resendLoginChangeMail({mail:m.login,success:function(n){rlUserDialog&&rlUserDialog.showResendUsernameChangeLinkInfoDialog()},error:function(n){G()}})}function U(p){p&&p.stopPropagation();f();if(!X()){return }V();var o=l();var m={account:{login:o.login,password:o.password}};if(o.rememberMe){m.rememberMe=o.rememberMe}var n={login:m,onError:function(q){E(q)},onLoggedIn:function(r){try{if(window.rlCoreServices&&window.rlCoreServices.trackEventAsClick){window.rlCoreServices.trackEventAsClick("login/loginlayer_loginLink","CustomEvent:login_success/LoginLayer")}}catch(q){console.error("Tracking error ",q)}A(r)},onC2BLoggedIn:function(q){b(q)},onPolicyInvalid:function(q){Y(q)}};rlLoginservice&&rlLoginservice.login(n)}function E(r){d();try{if(r&&r.validationErrors&&r.validationErrors.validationError){var u=r.validationErrors.validationError;u=jq.isArray(u)?u:[u];for(var o=0;o<u.length;o++){var n=u[o];if(n.errorCodeId==="UM_REGEX_VIOLATION"&&n.errorFieldKey==="account$login"){J(O.emailNotValidMsg,n.errorCodeId);L(P.find(".loginLayerLogin"));R(O.emailNotValidMsg,"LoginFailedServerValidation#"+n.errorCodeId);return }}}var m=true;var q=(r&&r.error&&r.error.errorMessage)?r.error.errorMessage:"Login failed";var t=(r&&r.error&&r.error.errorCodeId)?r.error.errorCodeId:null;R(q,"LoginFailedServerValidation#"+(t?t:"UNKNOWN"));if(t==null){m=false;G()}else{switch(t){case rlLoginservice.GCDM_AUTH_NOT_AUTHENTICATED:q=rlTranslator.translate(t);break;case rlLoginservice.GCDM_AUTH_ACCOUNT_NOT_ACTIVATED:q=rlTranslator.translate(t);F(false);g(true);break;case rlLoginservice.GCDM_AUTH_ADMIN_LOCKED:q=rlTranslator.translate(t);m=false;k();M();break;case rlLoginservice.GCDM_AUTH_PASSWORD_EXPIRED:q=rlTranslator.translate(t);break;case rlLoginservice.GCDM_1014_101:q=rlTranslator.translate(t);break;case rlLoginservice.GCDM_1014_102:q=rlTranslator.translate(t);M();break;default:q=messages.generalError}}m&&J(q,t)}catch(p){console.error("Error while handling login error: "+p);G()}}function L(m){jq(m).addClass("border")}function f(){P.find(":input").removeClass("border");P.find(".componentSetErrMsgContainer").html("");g(false);W(false);F(true)}function J(n,m){P.find(".loginLayerLoginErrMsg").html(n)}function I(n,m){P.find(".loginLayerPasswordErrMsg").html(n)}function X(){var m=P.find(".loginLayerLogin");var r=P.find(".loginLayerPassword");var p=true;var n=m.val();if(jq.trim(n)===""){L(m);var q="<label>"+O.emailRequiredMsg+"</label>";J(q,"EmailRequired");R(O.emailRequiredMsg,"EmailRequired");p=false}else{var o=/^(([ \t]*([a-zA-Z0-9\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]+(\.[a-zA-Z0-9\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]+)*)[ \t]*)|(\"([ \t]*([\x01-\x08\x0B\x0C\x0E-\x1F\x7F\x21\x23-\x5B\x5D-\x7E\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]|(\\[\x01-\x09\x0B\x0C\x0E-\x7F\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF])))*[ \t]*\"))@([ \t]*([a-zA-Z0-9\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]+(\.[a-zA-Z0-9\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]+)*)[ \t]*|\[([ \t]*[\x01-\x08\x0B\x0C\x0E-\x1F\x7F\x21-\x5A\x5E-\x7E\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF]|(\\[\x01-\x09\x0B\x0C\x0E-\x7F\xDF\x8A\x8C\x8E\x9A\x9C\x9E\x9F\xC0-\xD6\xD8-\xDD\xE0-\xF6\xF8-\xFF])+)*[ \t]*\])$/;p=o.test(n);if(!p){var q="<label>"+O.emailNotValidMsg+"</label>";J(q,"InvalidEmail");R(O.emailNotValidMsg,m.attr("name"));L(m)}}if(jq.trim(r.val())===""){L(r);var q="<label>"+O.passwordRequiredMsg+"</label>";I(q);R(O.passwordRequiredMsg,r.attr("name"));p=false}return p}function R(n,o){if(typeof (window.bmwcsaclick)==="function"){var m={name:n,id:"FormErrorTracking_LoginLayer_"+o,tagnName:"DIV"};console.log('Track Form Error; id="'+m.id+'", name="'+m.name+'"');window.bmwcsaclick(m)}}function G(){rlErrorService.handleError({actor:rlErrorService.ACTOR_USER})}function M(){rlUserDialog&&rlUserDialog.showAccountDeactivatedDialog()}function Y(m){d();rlUserDialog&&rlUserDialog.showPolicyAgreeDialog({policyUrl:(m&&m.data&&m.data.cmxUrl)?m.data.cmxUrl:undefined})}function b(m){rlC2bInformationSet.firstName=m.firstName;rlC2bInformationSet.lastName=m.lastName;rlUserDialog&&rlUserDialog.showC2bRegistrationDialog({firstName:m.firstName,lastName:m.lastName});d()}function l(){return P.find(":input").serializeObject()}function F(m){}function W(m){T(".loginlayer_errorState_resendUsernameLink",m);m&&L(P.find(".loginLayerLogin"))}function g(m){T(".loginlayer_errorState_resendActivationLink",m);m&&L(P.find(".loginLayerLogin"))}function T(o,m){var n=P.find(o);m?n.show():n.hide()}function k(){P.find(":input[type=password]").val("");f();J("");I("");g(false);W(false);F(true)}function V(){var m=D();if(typeof m==="string"){m=P.find(m)}m&&rlDither.on(m)}function d(){var m=D();if(typeof m==="string"){m=P.find(m)}m&&rlDither.off(m)}function S(){P.find(".loginlayer_resendActivation").unbind("click").click(function(m){H&&H()});P.find(".loginlayer_resendRename").unbind("click").click(function(m){i&&i()});P.find(".loginLinkButton").unbind("click").click(function(m){U(m)});P.find(".registerLink").unbind("click").click(function(m){m.preventDefault();var n={};if(e){n.registrationPageUrl=e}rlUserDialog&&rlUserDialog.showRegistrationDialog(n)});P.find(".forgottenPasswordLink").unbind("click").click(function(m){m.preventDefault();rlUserDialog&&rlUserDialog.showForgottenPasswordDialog()});P.find(":input[type=text], :input[type=password]").each(function(m,n){jq(n).unbind("keydown").keydown(function(o){if(o.keyCode==13){P.find(".loginLink").click()}})})}function K(){var m=P.find(".loginLayerProperties");O={emailNotValidMsg:m.attr("data-emailNotValidMsg"),emailRequiredMsg:m.attr("data-emailRequiredMsg"),passwordRequiredMsg:m.attr("data-passwordRequiredMsg"),generalErrorMsg:m.attr("data-generalErrorMsg"),c2bRegistrationPagePath:m.attr("data-c2bRegistrationPagePath")}}function a(){if(rlC2bInformationSet){if(rlC2bInformationSet.c2bUserName){P.find(".registerLink").hide();var m=P.find(".loginLayerLogin");m.val(rlC2bInformationSet.c2bUserName);m.hide();var n=P.find(".loginLayerLoginReadOnly");n.text(rlC2bInformationSet.c2bUserName);n.show()}rlC2bInformationSet.resetInformation()}}Z.hideErrorBorders=function(){f()};Z.init=function(){var m=jq("#"+N);if(m&&m.length>0){P=m;K();S();a()}};Z.setRegistrationUrl=function(m){e=m};Z.init();return Z}return{__init__:function(){},__start__:function(){},create:function(E,G){if(E){var F=this.getInstance(E);if(!F){F=B(E,G);C[E]=F}else{F.init()}return F}},getInstance:function(E){return E&&C[E]},getLoginLayerDom:function(E){return E.find(".mybmw-loginLayer-container")},setLoginSuccessCallback:function(E){A=function(){E&&E()}},setDitherTarget:function(E){D=(typeof (E)==="function")?function(){return E()||undefined}:function(){return E||undefined}}}}();var rlMessageAccordion=function(){var N;function E(){N=rlMandator.replaceCoreUrl(rlPage.getNextCoreUrl()+"/perso/services/_{mandatorContext}/message/urls")}function F(W){if(W.messages&&W.messages!==[]){var V=W.messages;var R=jq(".messageAccordionWrap");var S=jq(".messageAccordionItem",R);var U=jq(".messageAreaContainer");var X=jq(".messageAreaItem",U);for(var T=0;T<S.length;T++){if(V[T]!=undefined){jq(".messageHeadline",S[T]).html(V[T].headline);jq(".messageDate",S[T]).html(V[T].date);jq(".messageSender",S[T]).html(V[T].sender);jq(".messageContent",S[T]).html(V[T].content);jq(".linkArrow13px",S[T]).html(V[T].link);jq(".linkArrow13px",S[T]).attr("src",V[T].linkUrl)}}for(var T=0;T<V.length&&10;T++){if(V[T]!=undefined){jq(".messageHeadline",X[T]).html(V[T].headline);jq(".messageDate",X[T]).html(V[T].date);jq(".messageSender",X[T]).html(V[T].sender);jq(".messageContent",X[T]).html(V[T].content);jq(".linkArrow13px",X[T]).html(V[T].link);jq(".linkArrow13px",X[T]).attr("src",V[T].linkUrl);if(X[T+1]!=undefined){jq(X[T]).append('<hr class="messageAreaHr" />')}}}}}var O="spriteIconPlusMedium";var D="spriteIconMinusMedium";function Q(T,R,S){if(T){T.removeClass(R);T.addClass(S)}}function G(S){var R=B(S);if(R){R.toggleClass("link13pxActive",H(S))}}function P(S){var R=A(S);Q(R,O,D)}function M(S){var R=A(S);Q(R,D,O)}function I(R){if(H(R)){P(R)}else{M(R)}}function C(S){var R=J(S);if(R){R.slideToggle(200)}}function J(R){return R?R.find(".messageAccordionContent"):null}function A(R){return R?R.find(".messageAccordionOpenClose .baseIconSprite"):null}function H(R){return J(R).css("display")==="none"}function L(R){return R?R.find(".messageAccordionHeadline h3"):null}function K(R){G(R);I(R);C(R)}function B(R){return R?R.find(".messageAccordionHeadline"):null}return{__init__:function(){E();jq(".messageAccordionItem").each(function(R,S){var T=jq(S);B(T).click(function(){K(T)})})},__start__:function(){rlCrossSubDomainAjax.call({type:"POST",url:N,data:"",contentType:"application/json",success:function(R){F(R)},error:function(R,T,S){}})},openLayer:function(){rlGlassPaneLayer.openDialog({width:"w2",content:".messageAreaContainer"})}}}();var rlMyAccountForm=(function(){function A(E,I){var Q=CoreFormsBase.inheritanceFrom(rlMyBmwFormBase.create(E,I));var P=Q.parent;var I=I;Q.typeName="rlMyAccountForm";Q.BUTTONBAR_SELECTOR=".myAccountFormButtonBar";Q.EDITBUTTON_SELECTOR=".myAccountFormEditButton";Q.SAVEBUTTON_SELECTOR=".myAccountFormSaveButton";Q.CANCELBUTTON_SELECTOR=".myAccountFormCancelButton";Q.FOOTNOTE_SELECTOR=".formFootnote";Q.getDataSinkForUpdate=function(){return rlUserFormDS.createDS()};Q.updateData=function(R){if(jq.isEmptyObject(R)){Q.switchToViewMode();return }Q.showDitherLayer();Q.tracking.prepareBufferedWebTrackingEvents();Q.getDataSinkForUpdate().update({data:R,success:function(S){Q.setData(S);Q.switchToViewMode();Q.hideDitherLayer();Q.tracking.flushBufferedWebTrackingEvents();I.reinitialise()},error:function(S){rlErrorService.handleError(S);Q.hideDitherLayer();Q.tracking.discardBufferedWebTrackingEvents()},validation:function(S){Q.showBackendMessages(S);Q.hideDitherLayer();Q.tracking.discardBufferedWebTrackingEvents()}})};function D(){var R={};var S=Q.getEditedData(R);Q.updateData(S)}Q.onAction_Edit=function(){Q.switchToEditMode()};Q.onAction_Save=function(){if(Q.validate()){var R=rlEventTracker.create(Q.getModuleId()+"/change");R.trackCustomEvent("mybmwLoginData/editAccount","mybmwAction/userprofile");D()}};Q.onAction_Cancel=function(){Q.switchToViewMode()};function O(){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){E.find(Q.EDITBUTTON_SELECTOR).click(function(R){Q.onAction_Edit(R)});E.find(Q.SAVEBUTTON_SELECTOR).click(function(R){Q.onAction_Save(R)});E.find(Q.CANCELBUTTON_SELECTOR).click(function(R){Q.onAction_Cancel(R)})}}Q.setMetaData=function(R){P.setMetaData(R);B()};Q.getContext=function(){return"CREATE"};Q.getUseCaseMetaDataRoot=function(){return"updateUser"};Q.setData=function(R){P.setData(R);F(R);N()};Q.canCopeWithDataSourceError=function(R){return P.canCopeWithDataSourceError(R)||R.dataSourceId==="vehicle"||R.dataSourceId==="nbgv"};Q.preInitAsync=function(S){if(rlPage.isEditMode()||rlPage.isDesignMode()){S();return }var R=E.attr("data-allowedroles");if(typeof R==="undefined"){S();return }rlCoreServices.checkForRoles({roles:R.split(","),any:function(){S()},none:function(){E.remove();S()}})};Q.switchToViewMode=function(){K();var R=M();E.animate({"background-color":"#FFFFFF"},R.fadeOut);E.find(Q.BUTTONBAR_SELECTOR+", "+Q.FOOTNOTE_SELECTOR).fadeOut(R.fadeOut,function(){E.find(Q.EDITBUTTON_SELECTOR).show();E.find(Q.SAVEBUTTON_SELECTOR).hide();E.find(Q.CANCELBUTTON_SELECTOR).hide();E.find(Q.BUTTONBAR_SELECTOR).fadeIn(R.fadeIn)});P.switchToViewMode()};Q.switchToEditMode=function(){Q.showDitherLayer();H();var R=M();E.animate({"background-color":"#E6E6E6"},R.fadeIn);E.find(Q.BUTTONBAR_SELECTOR).fadeOut(R.fadeOut,function(){E.find(Q.EDITBUTTON_SELECTOR).hide();E.find(Q.SAVEBUTTON_SELECTOR).show();E.find(Q.CANCELBUTTON_SELECTOR).show();E.find(Q.FOOTNOTE_SELECTOR).fadeIn(R.fadeIn);E.find(Q.BUTTONBAR_SELECTOR).fadeIn(R.fadeIn)});P.switchToEditMode();Q.hideDitherLayer()};var J=true;function M(){if(J){J=false;return{fadeIn:0,fadeOut:0}}else{return{fadeIn:700,fadeOut:400}}}function N(){var R=false;jq.each(Q.getFieldSetsById(),function(T,S){if(typeof S.supportsEditMode==="function"){R=R||S.supportsEditMode()}else{R=true}return R});if(R){E.find(Q.BUTTONBAR_SELECTOR).show()}else{E.find(Q.BUTTONBAR_SELECTOR).hide()}}function H(){L();B()}function C(){E.find(Q.BUTTONBAR_SELECTOR).addClass("locked");E.find(Q.BUTTONBAR_SELECTOR).find(".myAccountFormButtonBarDither").fadeIn(700)}function B(){E.find(Q.BUTTONBAR_SELECTOR).removeClass("locked");E.find(Q.BUTTONBAR_SELECTOR).find(".myAccountFormButtonBarDither").hide()}function L(){G().find(Q.BUTTONBAR_SELECTOR).addClass("locked");G().find(Q.BUTTONBAR_SELECTOR).children(".myAccountFormButtonBarDither").fadeIn(700)}function K(){G().find(Q.BUTTONBAR_SELECTOR).removeClass("locked");G().find(Q.BUTTONBAR_SELECTOR).children(".myAccountFormButtonBarDither").fadeOut(400)}Q.parentFormsContainer=undefined;function G(){if(Q.parentFormsContainer==null){Q.parentFormsContainer=E.parents(".formsContainer")}return Q.parentFormsContainer}function F(){var S=true;jq.each(Q.getFieldSetsById(),function(U,T){if(!T.allScoringFieldsFilled()){S=false;return false}});var R=E.find(Q.EDITBUTTON_SELECTOR);if(S){R.removeClass("buttonBlue");R.find("span.updatenowlabel").hide();R.find("span.changelabel").show()}else{R.addClass("buttonBlue");R.find("span.changelabel").hide();R.find("span.updatenowlabel").show()}}O();Q.switchToViewMode();C();return Q}return{__init__:function(){},__start__:function(){},create:function(B,C){return A(B,C)}}}());var rlMyConfigBoughtForm=function(){function A(F,G){var B=CoreFormsBase.inheritanceFrom(rlFormBase.create(F,G));var E=B.parent;B.typeName="rlMyConfigBoughtForm";B.registerTrackingListener=function(){jq(window).bind(rlEventTracker.eventList().EVENT_VIN_VALIDATION_ERROR(),function(J,K){var I=rlEventTracker.create("mybmwAddToMyVehicles");I.trackCustomEvent("VinValidationError="+K.errorKey+"&vin="+K.vin,"mybmwAction/myconfigurations")})};B.switchToEditMode=function(){B.resetValidationMessages();jq.each(B.getFieldSetsById(),function(J,I){I.switchToEditMode()})};B.setData=function(I){E.setData(I);B.switchToEditMode()};function C(){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){F.find(".formSubmitButton").click(H)}F.find("#cancelBtn").click(function(){rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()})}function D(L){var I=function(M){return M||undefined};if(L&&L.myConfigsController&&L.myConfigsController.currentConfig){var J=L.myConfigsController.currentConfig;var K={brand:I(J.brand),freeTextNote:I(J.freeTextNote)};if(J.vin){K.vin=I(J.vin);if(rlGlobalConfig.isManualVinMapping&&J.modelCodeVg){K.modelCodeVg=I(J.modelCodeVg)}}if(!F.find(".myConfigBuyVinHintDiv").is(":visible")){K.series=I(J.series);K.model=I(J.model)}return K}throw"No current configuration data available!"}function H(){var K=function(L){rlNccServices.deleteConfig({configId:rlMyConfigsController.getCurrentConfigId(),success:function(M){B.hideDitherLayer();rlUserDialog&&rlUserDialog.redirectToMyBmwVehiclesPage(L);rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()},fail:function(M){B.hideDitherLayer();rlUserDialog&&rlUserDialog.redirectToMyBmwVehiclesPage(L);rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()},error:function(){B.hideDitherLayer();rlUserDialog&&rlUserDialog.redirectToMyBmwVehiclesPage(L);rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog()}})};var I=function(){rlNccServices.createPreOwnedVehicle({vehicle:D(B.getEditedData()),success:function(M){var L=rlEventTracker.create("mybmwAddToMyVehiclesSuccessful");L.trackCustomEvent(M.vin?"vin="+M.vin:L.emptyStringIfundefined(M.vin),"mybmwAction/myconfigurations");if(F.find(".myConfigBuyCheckboxDiv :checkbox").is(":checked")){K(M.vehicleId)}else{B.hideDitherLayer();rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.closeDialog();rlUserDialog&&rlUserDialog.redirectToMyBmwVehiclesPage(M.vehicleId)}},fail:function(L){B.hideDitherLayer();B.showBackendMessages(rlNccConverter.translateValidationMessagesFromResponse(L,undefined,"myConfigsController.currentConfig."))},error:function(){B.hideDitherLayer();rlErrorService.handleError({actor:rlErrorService.ACTOR_SYSTEM})}})};B.showDitherLayer();var J=F.find(".myConfigBuyVinHintDiv").css("display")!=="none";B.waitForLiveValidation(function(){var L=F.find(".myConfigBuyVinHintDiv").css("display")!=="none";if(B.validate()&&(!L||(L&&J))){I()}else{B.hideDitherLayer()}})}B.onFormReady=function(){B.switchToEditMode();rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.contentReady()};C();B.registerTrackingListener();return B}return{__init__:function(){},__start__:function(){},create:function(B,C){return A(B,C)}}}();var rlMybmw=function(){function A(B){if(B){rlCoreServices.isLoggedIn({loggedIn:function(){},loggedOut:function(){var C={protocol:window.location.protocol,hostname:window.location.hostname};rlUserDialog.redirectToMyDashboard(C)}})}}return{__init__:function(){jq(window).bind(rlContextObject.events.BRAND_SUBBRAND_CHANGED,function(C,D){var B=D==="brand-bmwi"?jq(".mainNavProductItemsSeriesLinks[data-series=i]").attr("data-idmodulepath"):jq(".mainNavProductItemsSeriesLinks[data-series!=i]").first().attr("data-idmodulepath");if(B){jq(".idModuleLayerRightAlign").not(".idModulePrint").attr("src",B)}})},redirectToDashboardIfNotLoggedIn:function(B){A(B)}}}();var rlMymessages=function(){var F=null;var T=null;var S=false;function G(){var V=rlMandator.replaceCoreUrl("/perso/services/_{mandatorContext}/message/urls");T=rlPage.getNextCoreUrl()+V;console.log("Messages servlet URL: "+T)}function O(Z){if(Z.messages){var Y=[].concat(Z.messages);var d=Y.length;var b=jq(".mymessageAccordionWrap");b.parents(".dashboardModule").addClass("total"+d+"Messages");var g=jq(".mymessageAccordionItem",b);g.hide();var f=jq(".mymessageAccordionWrap .messageAreaContainer");var X=jq(".messageAreaItem",f);X.hide();for(var a=0;a<g.length;a++){var W=g[a];var j=Y[a];if(typeof j==="object"){var V=rlFormatter.formatDate(new Date(parseInt(j.dateLong)));jq(".mymessageHeadline",W).html(j.headline);jq(".mymessageDate",W).html("("+V+")");jq(".mymessageSender",W).html(j.sender);jq(".mymessageContent",W).html(j.content);if(j.link&&j.link.length>0){jq(".messageLink",W).html(j.link);jq(".messageLink",W).attr("href",j.linkUrl);jq(".messageLink",W).attr("id","mybmwMessageLink"+a+j.url)}else{jq(".messageLink",W).hide()}jq(W).show()}}for(var a=0;a<Y.length&&10;a++){if(typeof Y[a]==="object"){var V=rlFormatter.formatDate(new Date(parseInt(Y[a].dateLong)));jq(".messageHeadline",X[a]).html(Y[a].headline);var e=typeof Y[a].sender!=="undefined"?Y[a].sender:"";if(e!==""&&V!==""){e+=" / "}e+=V;jq(".messageSenderAndDate",X[a]).html(e);jq(".messageContent",X[a]).html(Y[a].content);if(Y[a].link&&Y[a].link.length>0){jq(".linkArrow13px",X[a]).html(Y[a].link);jq(".linkArrow13px",X[a]).attr("href",Y[a].linkUrl)}else{jq(".linkArrow13px",X[a]).hide()}if(X[a+1]!=undefined){jq(X[a]).append('<hr class="messageAreaHr" />')}jq(X[a]).show()}}J(jq(g[0]))}jq(".showAllLink").show()}var K="spriteIconPlusMedium";var M="spriteIconMinusMedium";var L=null;function R(X,V,W){if(X){X.removeClass(V);X.addClass(W)}}function I(W){var V=Q(W);if(V){V.toggleClass("link13pxActive",C(W))}}function A(W){var V=E(W);R(V,K,M)}function B(W){var V=E(W);R(V,M,K)}function H(V){if(C(V)){A(V)}else{B(V)}}function N(W){S=true;var V=P(W);if(V){V.animate({height:"toggle",opacity:"toggle"},700,"linear",function(){S=false})}}function P(V){return V?V.find(".mymessageAccordionContent"):null}function E(V){return V?V.find(".mymessageAccordionOpenClose .baseIconSprite"):null}function C(V){return P(V).css("display")==="none"}function D(V){return V?V.find(".mymessageAccordionHeadline h3"):null}function J(W){if(!S){if(W.attr("id")!==L){if(L){var V=jq("#"+L);L=null;J(V)}I(W);H(W);N(W);L=W.attr("id")}}}function Q(V){return V?V.find(".mymessageAccordionHeadline"):null}function U(V,W){if(W===F){rlBmwLoadingState.initLoadingState("mymessageAccordionWrap");rlBmwLoadingState.hideDuringLoad("mymessageAccordionWrap");jq(".showAllLink").hide();jq(".mymessageAccordionItem").each(function(X,Y){var Z=jq(Y);Q(Z).click(function(){J(Z)})});rlCrossSubDomainAjax.call({type:"POST",url:T,data:"",contentType:"application/json",success:function(X){rlBmwLoadingState.showAfterLoad("mymessageAccordionWrap");O(X)},error:function(X,Z,Y){rlBmwLoadingState.showAfterLoadWithError("mymessageAccordionWrap")}})}}return{__init__:function(){G()},__start__:function(){},initComponent:function(V){F=V;rlDashboardmodule.registerModule(V,this)},changeLoginStateCallback:function(V,W,X){if(X==true){U(V,W)}},visibilityCheckCallback:function(V){return V(true)},showAllCallback:function(V,W){if(W===F){rlGlassPaneLayerNext.openDialog({content:".mymessageAccordionWrap .messageAreaContainer"})}}}}();var rlNumberFamilyMembersSet=function(){var F=["numberFamilyMembers"];var L="";var A={getListAreaId:function(){return L},errorPlacements:{numberFamilyMembers:jq("#errorMsg_numberFamilyMembers")},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(M){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+L+"form").valid()}};function B(){return F}function I(N,M){rlAbstractForm.fillEnumList(N,M)}function H(M,N){rlAbstractForm.setData(M,N,undefined,L)}function K(O,N,M){return rlAbstractForm.getData(F,O,L)}function E(N,M){rlAbstractForm.setData(N,M,undefined,L)}function D(N,M){return rlAbstractFormFieldSet.onError(N,M)}function C(){jq.each(F,function(N,M){rlAbstractForm.setData(M,"",undefined,L)})}function G(O,N){var M=N||{};var P=K(jq.extend({},M),O);var Q=rlAbstractFormFieldSet.getDiffs(F,M,P);return Q}function J(){var M={name:"numberFamilyMembersSet",coreId:["profile"],getFieldsNames:B,callbackLoadedList:I,callbackLoadedData:H,callbackBeforeSaveData:K,callbackAfterSaveData:E,callbackError:D,callbackClearData:C,getDiffs:G};rlAbstractForm.registerComponent(M)}return{__init__:function(){},registerComponent:function(){J()},initForm:function(Q,P){console.log("numberFamilyMembersSet::initForm: "+Q);var M=rlPage.isEditMode()||rlPage.isDesignMode();if(!M){L=Q;var O="#"+L;rlAbstractFormFieldSet.initDefaultActions(A);var N=jq("#"+A.getListAreaId()+"form").closest("form");if(N){N.bmwValidate("addErrorPlacements",A.errorPlacements);N.bmwValidate("modifyValidationMessages",P)}else{console.warn("numberFamilyMembersSet::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(O+"RequiredFieldLabel").html()}})}}}}();var rlOptionalfield=function(){var D="optionalField_";var J="";var A={getListAreaId:function(){return J},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(K){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+J+"form").valid()}};function H(M,L,K){rlAbstractForm.fillEnumList(M,L)}function G(L,K){F(L,K)}function E(L,K){F(L,K)}function F(M,L){var K=M.replace("$","_");rlAbstractForm.setData(M,L,K)}function C(L){if(!L){return true}else{if(typeof L==="object"){var K=0;jq.each(L,function(M,N){if(typeof N==="object"){jq.each(N,function(O,P){if(typeof P!=="undefined"){K++}})}else{K++}});return(K==0)?true:false}else{return false}}}function B(L,K){if(typeof L!=="undefined"&&typeof L.optionalField!=="undefined"){if(typeof L.optionalField.length!=="undefined"){jq.each(L.optionalField,function(M,N){if(typeof L.optionalField[M]!=="undefined"&&L.optionalField[M].key===K){delete L.optionalField[M]}})}else{if(L.optionalField.key===K){delete L.optionalField}}}}function I(){console.log("Initialising optionalfields...");var K=jq(".field-opt");K.each(function(R,T){$field=jq(T);var U=$field.attr("name");var L=function(){return[U]};var V=function(a,f,X){var e=U.split("$")[1];var Y=rlAbstractForm.getData(U);if(Y!=null&&typeof Y==="object"){jq.each(Y,function(l,k){Y=k;return false})}if(Y){var g={key:e,value:Y};if(typeof a.optionalField==="undefined"&&Y){a.optionalField={}}if(typeof a.optionalField==="undefined"){var d=0;jq.each(a,function(l,k){d++});if(d===0){a=undefined}}else{if(typeof a.optionalField.length=="undefined"){if(typeof a.optionalField.key=="undefined"||a.optionalField.key==g.key){if(typeof Y!=="undefined"){a.optionalField.key=g.key;a.optionalField.value=g.value}else{delete a.optionalField.key}}else{if(typeof Y!=="undefined"){var Z=a.optionalField;a.optionalField=[];a.optionalField.push(Z);a.optionalField.push(g)}}}else{var j=false;for(var b=0;b<a.optionalField.length;b++){if(typeof a.optionalField[b]!=="undefined"&&a.optionalField[b].key===e){a.optionalField[b].value=Y;j=true;break}}if(j==false){if(typeof Y!=="undefined"){a.optionalField.push(g)}}else{if(typeof Y==="undefined"){B(a,e)}}}}}else{B(a,e)}return(C(a))?undefined:a};var O=function(Y,X){return rlAbstractFormFieldSet.onError(Y,X)};var N=function(){jq.each(L(),function(Z,Y){var X=Y.split("$")[1];rlAbstractForm.setData(Y,"",D+X)})};var Q=function(Z,Y){var X=Y||{};var a=V(jq.extend({},X),Z);var b=rlAbstractFormFieldSet.getDiffs(L(),X,a);return b};var W={name:$field.attr("name"),coreId:["optionalFields"],listId:["optionalField"],callbackLoadedList:H,callbackLoadedData:G,setDataFromCache:function(X){if(typeof X==="object"&&typeof X.optionalField==="object"){G(U,X.optionalField.value)}},callbackBeforeSaveData:V,callbackAfterSaveData:E,callbackError:O,getFieldsNames:L,callbackClearData:N,getDiffs:Q};rlAbstractForm.registerComponent(W);var P=$field.attr("name");var S={};S[P]=jq("#errorMsg_"+P.replace("$","_"));var M=jq("#"+A.getListAreaId()+"form").closest("form");M.bmwValidate("addErrorPlacements",S)});jq(".field-number-validate").keydown(function(L){if((L.keyCode>=48&&L.keyCode<=57)||(L.keyCode>=96&&L.keyCode<=105)){}else{if(L.keyCode!=8&&L.keyCode!=46&&L.keyCode!=37&&L.keyCode!=39){L.preventDefault()}}})}return{__init__:function(){},registerComponent:function(){I()},initForm:function(N,M){console.log("optionalFieldComponent::initForm: "+N);var K=rlPage.isEditMode()||rlPage.isDesignMode();if(!K){J=N;idPrefix="#"+J;idEl=jq(idPrefix);rlAbstractFormFieldSet.initDefaultActions(A);var L=jq("#"+A.getListAreaId()+"form").closest("form");if(L){L.bmwValidate("modifyValidationMessages",M)}else{console.warn("optionalFieldComponent::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(idPrefix+"RequiredFieldLabel").html()}})}}}}();var rlPasswordreset=function(){var H="ERROR";var D="VALIDATION";var C="OK";var I="invalidResponse";var L="t";var E=rlPage.getNextCoreUrl()+"/usermgmt-user/services/_{mandatorContext}/account/passwordsetnew";var M="";var A="";var B=false;function J(T,P,R,N){var S=jq(T,A);var O=jq(P,A);if(B){if(R){S.animate({opacity:0,left:"-=700"},1000,function(){S.hide();O.show()})}else{S.hide();O.show();O.animate({opacity:1,left:"+=700"},1000,function(){if(N!==undefined&&N!=""){jq(N,A).css("left",0);jq(N,A).css("opacity",1)}})}}else{jq(A).closest("form").find(".myBMW-tooltip .infoIconLayerContent .infoIconLayerIcon").each(function(){var U=rlContextLayer.getJavaScriptInterface(jq(this));if(U){U.closeLayer()}});S.hide();O.show()}S.find("input").removeClass("required");O.find("input").addClass("required");var Q=jq(A+"form").closest("form");if(Q){Q.bmwValidate("resetForm")}}function K(O){if(!O.length){return false}validator=jq(O[0].form).validate();var N=validator.element(O[0]);return N}function G(N){var P={};if(N.validationErrors){var O=N.validationErrors.validationError;P.passwordResetPassword=rlTranslator.translate(O.errorCodeId)}return P}function F(R,Q){var N=rlPage.isEditMode()||rlPage.isDesignMode();M=R;A="#"+M;jq(".resetpasswordBox",A).each(function(){if(jq(this).hasClass("edit")&&!rlPage.isPreviewMode()){jq(this).show()}else{jq(this).hide()}});if(!N){var O=jq(A).closest("form");if(O&&O.length){var P={passwordResetPassword:jq(A+"errorMsg_password"),passwordResetConfirm:jq(A+"errorMsg_confirm")};O.bmwValidate({onkeyup:false,bmwValidate:{highlightErrorClass:"componentSetHighlightError"},errorClass:"componentSetFieldErrorTextArea"});O.bmwValidate("addErrorPlacements",P);O.bmwValidate("modifyValidationMessages",Q);jq(A+"confirm").rules("add",{equalTo:A+"password"});jq(A+"confirm").blur(function(){O.validate().element(this)});jq(A+"password").blur(function(){O.validate().element(this)})}else{console.warn("passwordresetComponent::initForm: form not found or previewMode")}}jq(".resetpasswordMain .formBoxNextBestButton",A).unbind().click(function(X){var S=jq(A+"password");var W=jq(A+"confirm");var U=K(S);var V=K(W);if(U&&V){var T=rlMandator.replaceCoreUrl(E);rlNxt.call({type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8",url:T,data:jq.toJSON({token:rlJQuery_queryParams.getQueryParam(L),newPassword:S.val()}),beforeSend:function(Z,Y){rlBmwStateOverlay.showLoadingState()},complete:function(Z,Y){rlBmwStateOverlay.hideState()},failed:function(Y){},success:function(Z){try{if(Z.status){switch(Z.status){case C:if(Z.data){J(".resetpasswordMain",".resetpasswordFinished",true,"")}break;case D:var a=G(Z);jq(A).closest("form").bmwValidate("handleFieldErrors",a);break;case H:var a=G(Z);jq(A).closest("form").bmwValidate("handleFieldErrors",a);break;default:throw I;break}}else{throw I}}catch(Y){if(Y===I){console.error(I);console.trace()}else{throw Y}}},error:function(){}})}X.preventDefault();return false})}return{__init__:function(){},__start__:function(){rlInstantCheck.prepareField(".componentSetFormInputArea :input[name=passwordResetPassword]")},initForm:function(O,N){console.log("passwordresetComponent::initForm: "+O);F(O,N)}}}();var rlPolicy=function(){var A=".policytext.html?";var E="policy";function B(){var G=document.location.href;var F=G.indexOf("?");if(F>-1){G=G.substring(0,F)}return G}function D(I){var F=B();if(typeof F==="string"){var H=F.lastIndexOf(".");var K=F.lastIndexOf("/");var J=(K===-1)?"":F.substr(K+1);var G=J.indexOf(".");if(G>-1){H=K+J.substr(0,G).length}F=(H===-1)?F:F.substr(0,H);F+=A+E+"="+I.cmxUrl;return F}return undefined}function C(H,F){var G=D(H);if(typeof G==="string"){rlNxt.call({type:"GET",dataType:"html",url:G,success:function(I){if(typeof F==="object"&&typeof F.successCallback==="function"){F.successCallback(I)}},error:function(I,K,J){if(typeof F==="object"&&typeof F.errorCallback==="function"){F.errorCallback(I,K,J)}}})}}return{__init__:function(){},loadPolicy:function(G,F){C(G,F)},getPolicyUrl:function(F){D(F)}}}();var rlPolicyAcceptedSet=function(){var K="policytextContent";var O=["consent"];var D=O[0];var I=/usage_(.*)/;var Q="div:.componentSetViewArea";var B="div:.componentSetEditArea";var T="usage_";var E="";var L={getListAreaId:function(){return E},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(U){}},bindEvents:function(){bindEvents()}};function M(){return O}function N(V){var U=jq(V+" [type='checkbox']").filter(function(W){return this.name.match(I)});return U}function S(V,U){var W=false;if(U!=null&&typeof U==="object"){jq.each(U,function(X,Y){if(typeof Y.length==="undefined"){if(V.name===(T+Y.usageId)){W=true;console.log("revoked usage: "+Y.usageId)}}else{jq.each(Y,function(Z,a){if(V.name===(T+a.usageId)){W=true;console.log("revoked usage: "+a.usageId)}})}})}return W}function F(X,U){if(typeof X==="string"){jq("."+K).html(X);var W=jq("[name='"+D+"']");jq.each(W,function(a,Y){var Z=jq(Y);Z.attr("checked","checked");Z.attr("disabled","disabled")})}var V=N(Q);jq.each(V,function(a,Y){var Z=jq(Y);Z.attr("disabled","disabled");if(!S(Y,U)){Z.attr("checked","checked")}});V=N(B);jq.each(V,function(a,Y){var Z=jq(Y);Z.removeAttr("disabled","disabled");if(!S(Y,U)){Z.attr("checked","checked")}})}function A(U,W){if(typeof U==="string"&&typeof W==="object"&&U==="policy"){var V={successCallback:function(X){F(X,W.revokedUsages)},errorCallback:function(X,Z,Y){console.log(X+Z+Y)}};if(typeof W.length==="number"){rlPolicy.loadPolicy(W[0],V)}else{if(typeof W.cmxUrl==="string"){rlPolicy.loadPolicy(W,V)}}}}function J(){return jq('input[name^="usage_"]:visible')}function C(){var V=J();var U=[];jq.each(V,function(W,X){if(!X.checked){U.push({revokedUsage:{usageId:X.name.replace(/usage_/,"")}})}});return U}function H(U,V){A(U,V)}function G(U){A("policy",U)}function P(W,V,U){console.log("policyAcceptedSet::onBeforeSaveData");W.revokedUsages=C();return W}function R(){var U={name:"policyAcceptedSet",coreId:["policy"],cachingDisabled:true,getFieldsNames:M,callbackLoadedData:H,callbackBeforeSaveData:P,callbackAfterSaveData:G};rlAbstractForm.registerComponent(U)}return{__init__:function(){},registerComponent:function(){R()},initForm:function(W,V){console.log("policyAcceptedSet::initForm: "+W);var U=rlPage.isEditMode()||rlPage.isDesignMode();if(!U){E=W;rlAbstractFormFieldSet.initDefaultActions(L)}}}}();var rlPolicyCurrentSet=function(){var g="true";var Y="false";var Q="policyCurrentSet";var G="disabledUsages";var e="enabledUsages";var P;var f;var i=true;var D="policy";var V=[D];var H="";var N={getListAreaId:function(){return H},errorPlacements:function(){return{consent:jq("#errorMsg_policy")}},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(j){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+H+"form").valid()}};function T(){return V}function W(){return jq("#"+P+' input[name="consent"]')}function d(){var j=W();if(j[0]){return j[0].checked?g:Y}else{return Y}}function S(){return(d()==g)}function M(){return jq("#"+P+' input[name^="usage_"]')}function E(){var k=M();var j=[];jq.each(k,function(m,n){if(!n.checked){var l={usageId:n.name.replace(/usage_/,"")};j.push(l)}});if(j.length>0){return{revokedUsage:j}}return{}}function I(){var j=jq("#"+P+' input:hidden[name="policyPath"]').val();j=j.replace(/\/content/,"");return j+".html"}function b(){var j={name:Q,coreId:["profile"],cachingDisabled:true,getFieldsNames:T,callbackBeforeSaveData:Z,callbackError:K};rlAbstractForm.registerComponent(j);console.log(j.name+" registred")}function Z(l,k,j){console.log("PolicyCurrentSet::onBeforeSaveData");l[D]={cmxUrl:S()?I():"",revokedUsages:E()};return l}function K(){console.warn("onError")}function a(j){if(j=="edit"){i=true}else{i=false}F()}function C(){var j=M();jq.each(j,function(k,l){if(!j.hasClass("noUsageReset")){var m=jq(l);m.val([""])}})}function X(){var j=W();if(j&&j.hasClass("noConsentReset")){return }j.val([""])}function J(j){var k=M();jq.each(k,function(l,m){var n=jq(m);if(j){n.parent().removeClass(G);n.parent().addClass(e)}else{n.parent().removeClass(e);n.parent().addClass(G)}})}function L(j){var k=M();jq.each(k,function(l,m){m.disabled=!j})}function B(j){var k=W();if(k[0]){k[0].disabled=!j}}function F(){var j=(d()==g);if(!j){C()}J(j);L(j&&i);B(i)}function R(j){var k="";if(typeof j.attributes==="object"){jq.each(j.attributes,function(m,l){if(typeof l.name==="string"&&l.name==="name"){k=l.nodeValue}})}return k}function U(k,n,j){if(R(k)==="consent"){var m=jq(k);m.addClass("componentSetHighlightError");var l=m.siblings("label");l.addClass("componentSetHighlightError");return true}else{return false}}function O(k,n,j){if(R(k)==="consent"){var m=jq(k);m.removeClass("componentSetHighlightError");var l=m.siblings("label");l.removeClass("componentSetHighlightError");return true}else{return false}}function A(j){if(j){jq(window).bind(rlAbstractUserManagementForm.getTriggerNameShowmodeChanged(),function(k,l){a(l)})}else{jq(window).unbind(rlAbstractUserManagementForm.getTriggerNameShowmodeChanged())}}return{__init__:function(){},registerComponent:function(){b()},initForm:function(n,m,o){P=n+"form";f=m;console.log("PolicyCurrentSet::initForm - componentId: "+P);A(true);var j=rlPage.isEditMode()||rlPage.isDesignMode();if(!j){H=n;var l="#"+H;rlAbstractFormFieldSet.initDefaultActions(N);var k=jq("#"+N.getListAreaId()+"form").closest("form");if(k){k.bmwValidate("addErrorPlacements",N.errorPlacements());k.bmwValidate("modifyValidationMessages",f);k.bmwValidate("overrideFunctions",{policyCurrentSet:{highlight:U,unhighlight:O}})}else{console.warn("PolicyCurrentSet::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(l+"RequiredFieldLabel").html()}})}X();C();F();W().click(function(p){F()})},unbindModeSwitch:function(){A(false)},setReadOnlyMode:function(){a("readonly")},setEditMode:function(){a("edit")}}}();var rlPolicyInfoLayerDS=function(){function A(E,B){var C=CoreFormsBase.inheritanceFrom(rlPolicyCurrentFormDS.createDS(E,B));var D=C.parent;C.typeName="rlPolicyInfoLayerDS";C.mapMetaData=function(J,I){var G={policyContent:{}};var F=jq("<div/>");F[0].innerHTML=J;var H=G.policyContent;H.infolayerPolicyText=jq(F).find(".infolayerPolicyTextblock, .infolayerPolicyTextblockEditMode").html()||"";H.jqInfolayerPolicyLink=jq(F).find(".infolayerPolicyLinkblock").html()||"";return G};C.getMockedMetaData=function(H,G){var F={};F.policyContent={infolayerPolicyText:"Infolayer Policy Text",jqInfolayerPolicyLink:""};H(F)};return C}return{__init__:function(){},__start__:function(){},createDS:function(C,B){return A(C,B)}}}();var rlPolicyInfoLayerFS=function(){function A(B,F){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,F));var D=C.parent;C.typeName="rlPolicyInfoLayerFS";C.init=function(){D.init();E()};C.supportsInputCache=function(){return false};C.getMetaDataRenderers=function(G){G=D.getMetaDataRenderers(G);G.policyInfoLayerRenderer=function(N,I,K){var P=B.find(".policyInfoLayer .policyContent");var H=I.infolayerPolicyText;var O=I.jqInfolayerPolicyLink;var J=C.getFieldsetProperties()["dataprotectiontext"];if(O){var L=jq("<a></a>");L.attr("data-tracking-clickable","true");L.attr("data-tracking-type","link");L.attr("data-tracking-id","espInfolayerPolicy");L.attr("href",O);L.attr("target","_blank");L.addClass("infolayerPolicyLink linkCopyText");L.html(J);P.empty();P.append(L)}else{var M=rlContextLayer.buildNewLayer({componentId:"IPFS_ContextLayer_"+F.fsId,groupingParentClass:"policyInfoLayer",layerText:H,contentPosition:"rightDynamicBottom",replaceIconByDivText:'<div class="linkCopyText" data-tracking-clickable="true" data-tracking-type="link" data-tracking-id="espInfolayerPolicy">'+J+"</div>"});P.empty();P.append(jq(M.dom));M.callback()}jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_PAGE_CHANGE_NOTIFICATION)};return G};function E(){if(!rlPage.isEditMode()){var I=B.closest("form.coreForm");var J=I.parents(".formsContainer:first");var H=J.find("div.formBaseParameters");if(isDefined(H)){H=H.attr("data-usewizardsteps")}var G=I.find("div.summaryFsParameters");if(isDefined(G)){G=G.attr("data-uselongformsummary")}if(isUndefined(H)||H.toLowerCase()!=="true"){if(isDefined(G)&&G.toLowerCase()=="true"){if(I.find("div.policyInfoLayerFS fieldset").last()[0]!==B[0]){B.hide()}}else{B.hide()}}}}return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlPreferredCommunicationFS=function(){return{__init__:function(){},__start__:function(){},createFS:function(A,B){return rlPreferredCommunicationFSInstance(A,B)}}}();var rlPreferredCommunicationFSInstance=function(L,D){var J=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(L,D));var I=J.parent;J.typeName="rlPreferredCommunicationFS";var H=".coreForm",E=".fieldSetEditAreaRow[data-field='user.profile.";var F=".fieldSetEditAreaRow [data-field='user.profile.account.login'],"+E+"email']",K=E+"phone'],"+E+"businessPhone'],"+E+"mobile'],"+E+"businessMobile'] ",G=E+"fax']",B=E+"pager']",C=".addressRefFS";function A(){var M=L.parents(H);var N=[];if(M.find(K).length>0){N.push("TEL")}if(M.find(F).length>0){N.push("INT")}if(M.find(G).length>0){N.push("FAX")}if(M.parents(".formsContainer").find(C).length>0){N.push("LET")}return N}J.getMetaDataRenderers=function(M){M.preferredCommunication=function(Q,N,P){var O=A();jq(N.valueList).each(function(R,S){if(jq.inArray(S.key,O)!==-1){P.append("<option value='"+S.key+"'>"+S.value+"</option>")}})};return M};return J};var rlPreferredContactSet=function(){var J=["preferredCommunication"];var P="";var B={getListAreaId:function(){return P},errorPlacements:function(){return{preferredCommunication:jq("#errorMsg_preferredCommunication")}},clickedElem:"undefined",formHeader:"undefined",listEditArea:{initFields:function(Q){}},bindEvents:function(){bindEvents()},isValid:function(){return jq("#"+P+"form").valid()}};function D(){return J}function L(R,Q){rlAbstractForm.setData(R,Q,undefined,P)}function O(S,R,Q){return rlAbstractForm.getData(J,S,undefined,P)}function I(R,Q){rlAbstractForm.setData(R,Q,undefined,P)}function H(R,Q){return rlAbstractFormFieldSet.onError(R,Q)}function E(){jq.each(J,function(R,Q){rlAbstractForm.setData(Q,"",undefined,P)})}function K(S,R){var Q=R||{};var T=O(jq.extend({},Q),S);var U=rlAbstractFormFieldSet.getDiffs(J,Q,T);return U}function N(){var Q={name:"preferredContactSet",coreId:["profile"],getFieldsNames:D,getCacheFieldsNames:D,callbackLoadedList:M,callbackLoadedData:L,callbackBeforeSaveData:O,callbackAfterSaveData:I,callbackError:H,callbackClearData:E,getDiffs:K};rlAbstractForm.registerComponent(Q)}function A(R,S){var Q=-1;jq.each(S,function(T,U){if(U.key===R){Q=T}});return Q}function F(T,R){var S=typeof R=="undefined"?[]:R;var Q=A(T,S);if(Q!=-1){S.splice(Q,1)}}var C=[];function G(Q){if(jq.inArray(Q,C)==-1){C.push(Q)}}function M(T,Q){var R=typeof Q=="undefined"?[]:Q;if(T==="preferredCommunication"){var S=R.slice();jq.each(S,function(V,W){var U=W.key;if(jq.inArray(U,C)==-1){F(U,R)}});rlAbstractForm.fillEnumList(T,R)}}return{__init__:function(){},registerComponent:function(){N()},show:function(Q){G(Q)},initForm:function(U,T){console.log("preferredContactSet::initForm: "+U);var Q=rlPage.isEditMode()||rlPage.isDesignMode();if(!Q){P=U;var S="#"+P;rlAbstractFormFieldSet.initDefaultActions(B);var R=jq("#"+B.getListAreaId()+"form").closest("form");if(R){R.bmwValidate("addErrorPlacements",B.errorPlacements());R.bmwValidate("modifyValidationMessages",T)}else{console.warn("preferredContactSet::initForm: form not found")}jq.extend(jq.validator.messages,{required:function(){return jq(S+"RequiredFieldLabel").html()}})}}}}();rlPreferredDealersMockData=function(){return{getMockData:function(){var A=[{key:"05316_1",name:"(Wolfgang Denzel Auto AG)",country:"Austria",countryCode:"AT",city:"Wien",postalCode:"1060",street:"(Gumpendorferstrae 19)",lat:48.19947,lng:16.35991,dist:0,category:"BMW",attributes:{distributionPartnerId:"05316",outletId:"1",homepage:"http://denzel.bmw.at/102/index",phone:"(+43 (1) 58878)",fax:"(+43 (1) 58878-5296)",mail:"(wien.gumpendorf@denzel.at)",services:{},distributionBranches:["T","F"],businessTypeCodes:["NO"],distributionCode:"EH",outletTypes:["FU"],portfolioCodes:["BM"],requestServices:["RFO","TDA","RID"]},i:0,id:"119278",mailOutlet:"",primary:true},{key:"23100_1",name:"(Zitta GmbH & Co KG)",country:"Austria",countryCode:"AT",state:null,city:"Wien",postalCode:"1060",street:"(Gxxx Str 1)",lat:48.19947,lng:16.35991,dist:0,category:"BMW",attributes:{distributionPartnerId:"23100",outletId:"1",homepage:"http://zitta.bmw.at/202/index",phone:"+43 (2162) 64136",fax:"(+43 (2162) 64136-42)",mail:"(info@zittabn.bmw.at)",services:{},distributionBranches:["T","F"],businessTypeCodes:["NO"],distributionCode:"EH",outletTypes:["FU"],portfolioCodes:["BM"],requestServices:["RFO","TDA","RID"],subBrandAttributes:{BM:{distributionBranches:["T","F"],businessTypeCodes:["NO"],distributionCode:"EH",outletTypes:["FU"],portfolioCodes:["BI"],requestServices:["RFO","TDA","RID"]}}},i:1,id:"119277",primary:false},{key:"08696_1",name:"(SingSang GmbH & Co KG)",country:"Deutschland",countryCode:"DE",state:null,city:"Kln",postalCode:"1060",street:"(Domstrasse 1)",lat:48.19947,lng:16.35991,dist:0,category:"BMW",attributes:{distributionPartnerId:"08696",outletId:"1",homepage:"http://SingSang.bmw.at/202/index",phone:"+43 (2162) 64136",fax:"(+43 (2162) 64136-42)",mail:"(info@SingSang.bmw.at)",services:{},distributionBranches:["T","F"],businessTypeCodes:["NO"],distributionCode:"EH",outletTypes:["FU"],portfolioCodes:["BI"],requestServices:["RFO","TDA","RID"],subBrandAttributes:{BI:{distributionBranches:["T","F"],businessTypeCodes:["NO"],distributionCode:"EH",outletTypes:["FU"],portfolioCodes:["BI"],requestServices:["RFO","TDA","RID"]}}},i:1,id:"119277",mailOutlet:"",primary:false}];return A}}}();var rlPreferredDealersModel=function(){var A={ERROR:0,NOT_LOADED:1,IN_PROGRESS:2,LOADED:3};var O=A.NOT_LOADED;var M=[];var f=[];var I=[];var a=null;var F=false;var J={ERROR_PDM_MAXIMUM_REACHED:1001,ERROR_PDM_CORE:1002};function C(){O=A.LOADED;jq.each(M,function(){this.onSuccess(jq.extend(true,[],a))});M=[]}function D(g){O=A.ERROR;jq.each(M,function(){this.onError(g)});M=[]}function R(){var g=false;if(rlPage.isEditMode()||rlPage.isDesignMode()){g=true}else{if(rlPage.isUseMock()){g=true}}return g}function B(g,i){O=A.NOT_LOADED;e(g,i)}function S(k,g,i){if(k.length>0){var j=[];j.push(k[0].GUID);j.push(k[0].distributionPartnerId);j.push(k[0].outletId);X("removePreferredDealer",j,function(){k.splice(0,1);S(k,g,i)},function(){i(J.ERROR_PDM_CORE)},rlErrorService.ACTOR_SYSTEM)}else{g()}}function U(){rlCoreServices.getPreferredDealers(function(g){if(g.length>0){jq.each(g,function(){this.key=this.distributionPartnerId+"_"+this.outletId});K(g)}else{a=[];C()}},function(g){D(g)})}function K(i){var g=[];jq.each(i,function(){g.push(this.key)});rlDealerInfoServices.requestDealersFromAllSources(g,function(p){var j=Z(p);var q=[];var n=[];var k=false;for(var m=0;m<i.length;++m){var o=i[m];var l=j.get(o);if(l===null){n.push(o);if(o.primary==="true"){k=true}}else{l.id=o.id;l.GUID=o.GUID;q.push(l)}}a=q;S(n,function(){if(k){B(function(){},function(r){console.error(r)})}else{C()}},function(r){console.error(r);C()})},function(j){D(j)})}function X(i,l,g,j,k){P(function(m){var n=[];n=n.concat(l);n.push(function(){m();g.apply(this,arguments)});n.push(function(){m();j.apply(this,arguments)});n.push(k);rlCoreServices[i].apply(this,n)})}function G(j,g,i){var k=rlPreferredDealersModelConfig.getNumMaxPreferredDealers();if(a==null||a.length<k){delete (j.GUID);X("addPreferredDealer",j,function(){H(j,"dealerPreferredAddedToWatchlist");B(function(l){d();g.apply(this,arguments)},function(l){V()})},function(){i(J.ERROR_PDM_CORE);V(J.ERROR_PDM_CORE)},rlErrorService.ACTOR_USER)}else{i(J.ERROR_PDM_MAXIMUM_REACHED);V(J.ERROR_PDM_MAXIMUM_REACHED)}}function W(j,g,i){var k=[];k.push(j.GUID);k.push(j.attributes.distributionPartnerId);k.push(j.attributes.outletId);X("removePreferredDealer",k,function(){H(j,"dealerWatchlistRemovedFromWatchlist");B(function(l){d();g.apply(this,arguments)},function(l){V()})},function(){V();i(J.ERROR_PDM_CORE)},rlErrorService.ACTOR_USER)}function N(j,g,i){X("setPrimaryDealer",j,function(){B(function(k){d();g.apply(this,arguments)},function(k){V()})},function(){V();i(J.ERROR_PDM_CORE)},rlErrorService.ACTOR_USER)}function P(g){if(F===true){return }F=true;g(function(){F=false})}function E(j,g){var i=[];if(j!=null&&jq.isArray(j)){jq.each(j,function(k,l){if(g==""||jq.inArray(g,l.attributes.requestServices)!=-1){i.push(l)}})}else{console.warn("preferred Dealers list is null or empty")}return i}function Z(i){function g(l){for(var k=0;k<i.length;++k){var j=i[k];if(j.key!==l.key){continue}j.primary=l.primary=="true";return j}return null}return{get:g}}function d(){for(var g=0;g<f.length;++g){if(typeof f[g].onPreferredDealersModelChange==="function"){f[g].onPreferredDealersModelChange(a)}}}function V(j){for(var g=0;g<I.length;g++){if(typeof I[g].onPreferredDealersModelError==="function"){I[g].onPreferredDealersModelError(j)}}}function H(i,j){var g=i.attributes.distributionPartnerId+"_"+i.attributes.outletId;jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:j,info:g,type:rlTrackingListener.TRACKING_TYPES.LINK})}function e(g,j){if(O==A.LOADED){g(jq.extend(true,[],a))}else{if(R()){a=rlPreferredDealersMockData.getMockData();O=A.LOADED;g(jq.extend(true,[],a))}else{var i={onSuccess:g,onError:j};M.push(i);if(O!=A.IN_PROGRESS){O=A.IN_PROGRESS;rlCoreServices.isLoggedIn({loggedIn:function(){U()},loggedOut:function(){a=[];C()},error:function(){j()}})}}}}function Q(g){f.push(g)}function Y(i){var g=jq.inArray(i,f);if(g>=0){f.splice(g,1)}}function T(){f=[]}function b(g){I.push(g)}function L(i){var g=jq.inArray(i,I);if(g>=0){I.splice(g,1)}}return{addChangeListener:function(g){Q(g)},removeChangeListener:function(g){Y(g)},removeAllChangeListeners:function(){T()},addErrorListener:function(g){b(g)},removeErrorListener:function(g){L(g)},errorTypes:J,addPreferredDealer:function(j,g,i){G(j,g,i)},removePreferredDealer:function(j,g,i){W(j,g,i)},setPrimaryDealer:function(j,g,i){N(j,g,i)},requestPreferredDealers:function(g,i){e(g,i)}}}();var rlProductTile=function(){return{__init__:function(){},__start__:function(){},highlightTile:function(A){jq(".foContainer").removeClass("financingOfferHighlight");A.addClass("financingOfferHighlight")},injectAnimation:function(A,E){var B=".productTileDividerBar";var F=".productTileDetailsLink";var C=".productTileButtonContainer";var G=".productTileTextContainer";var D=false;if(A){jq(A).hover(function(J){D=jq(this).find(".mldWrapperContainer").html();console.log(D);var K=jq(this);var I=K.find(C).length>0;K.data("mousepos","in");var H=function(){K.find(F).stop(true,true).slideDown(400,function(){if(I){K.find(C).stop(true,true).css("opacity",0).fadeTo(400,1)}if(jq(F).is(":visible")){rlProductTile.highlightTile(jq(this).parents(".foContainer"));if(D!=false){rlMultiLevelDisclaimer.show({content:D})}}})};if(E){H()}else{K.find(B).stop(true,true).fadeIn(200,function(){H()})}K.find(C).stop(true,true);if(I){K.find(G).stop(true,true).fadeOut(200)}},function(I){var J=jq(this);var H=J.find(C).length>0;J.data("mousepos","out");J.find(B).stop(true,true);J.find(F).stop(true).slideUp(400,function(){J.find(F).css({height:""});if(H){J.find(C).stop(true,true).fadeOut(400,function(){if(J.data("mousepos")==="out"){J.find(B).stop(true,true).fadeOut(200);J.find(G).stop(true,true).css("opacity",0).fadeTo(200,1)}})}else{if(J.data("mousepos")==="out"){J.find(B).stop(true,true).fadeOut(200)}}});J.find(C).stop(true,true);J.find(G).stop(true,true)})}}}}();var rlResultPageText=function(){var E={};var D=false;function B(H,F){var G=H;E=F;rlCoreServices.isLoggedIn({loggedIn:A,loggedOut:C});jq("#"+H).find("p:empty").remove();if(jq("#"+H).parents(".base").prev().hasClass("resultPageHeadline")){jq("#"+H).parents(".base").addClass("componentFollowsHeadline")}if((!D&&E.showRpTxtAnonymousUser!="true")||(D&&E.showRpTxtLoggedInUser!="true")||(E.showRpTxtLoggedInUser!="true"&&E.showRpTxtAnonymousUser!="true")){jq("#"+G).parents(".resultPageText").hide()}}function A(){D=true}function C(){D=false}return{__init__:function(){},__start__:function(){},initComponent:function(G,F){B(G,F)}}}();rlRfaDataSink=function(){function A(D){var B=CoreFormsBase.inheritanceFrom(rlRfxBaseDataSink.createDataSink());var C=B.parent;B.typeName="rlRfaDataSink";B.prepareData=function(F){var G=C.prepareData(F);if(typeof G.options!=="undefined"){if(typeof G.options.ORIGIN_OF_RFA!=="undefined"){G.options.originOfRfa=G.options.ORIGIN_OF_RFA;delete G.options.ORIGIN_OF_RFA}}if(G.user){E(G.user,"vehicleInterests")}G.accessories=window.rfxContextParams;G.policy=G.policyCurrent_RFA;delete G.policyCurrent_RFA;return G};B.save=function(G){var F=B.prepareData(D);rlCoreServices.sendRfa(F,function(H){G.success(H)||function(I){}},function(H){console.log(H);B.handleErrors(H,G.error,G.validation)},function(H){console.log(H);B.handleValidationErrors(H,G.validation)})};function E(F,G){if(F&&F[G]){var J=[];for(var I=0;I<F[G].length;I++){var H=F[G][I];if(H.action!="DELETE"){J.push(H)}}F[G]=J}}return B}return{__init__:function(){},__start__:function(){},createDataSink:function(B){return A(B)}}}();var rlRfiDataSink=function(){function A(F){var C=CoreFormsBase.inheritanceFrom(rlRfxBaseDataSink.createDataSink());var E=C.parent;C.typeName="rlRfiDataSink";C.prepareData=function(G){var H=E.prepareData(G);H.policy=H.policyCurrent_RFI;delete H.policyCurrent_RFI;if(typeof H.infoMaterial!=="undefined"){if(typeof H.infoMaterial.materialCodes!=="undefined"){H.infoMaterial.materialCodes=makeArrayUnique(H.infoMaterial.materialCodes)}H=jq.extend(true,H,H.infoMaterial);delete H.infoMaterial}return H};function D(){return rlPage.isEditMode()||rlPage.isDesignMode()}function B(G){try{if(rlMandator.getCountry()=="NL"&&!D()){materialCodes=G.materialCodes?G.materialCodes.toString():"";_stq=_stq||[];_stq.push(["resetTags"]);_stq.push(["setPageStructure","nl","popup","rfi","confirmation"]);if(materialCodes.length>0){_stq.push(["addTagProperty","materialCodes",materialCodes])}_stq.push(["loadTags"])}}catch(H){console.log("NL-Tracking error in rfiDataSink:"+H)}}C.save=function(G){var H=C.prepareData(F);B(H);rlCoreServices.sendRequestForInformation(H,function(I){G.success(I)||function(J){}},function(I){console.log(I);C.handleErrors(I,G.error,G.validation)},function(I){console.log(I);C.handleValidationErrors(I,G.validation)})};return C}return{__init__:function(){},__start__:function(){},createDataSink:function(B){return A(B)}}}();var rlRfxButton=function(){return{__init__:function(){},getConfigIdParam:function(){var A;if(typeof window.bmwConfigId!="undefined"&&window.bmwConfigId!==null&&window.bmwConfigId!==""){A={configId:window.bmwConfigId}}else{A={}}return A}}}();var ct=ct||{rfx:{}};ct.rfx.Dialog=function(A){var B=A.items.items;this.Dlg=A;this.RfxTypeSelect=B[0];this.RfxParameterSelect=B[2];this.RfxTypeSelect.addListener(CQ.form.Selection.EVENT_SELECTION_CHANGED,function(C,D){ct.rfx.Dialog.prototype.notifyChangeRfxType(D)});this.RfxTypeSelect.on("loadcontent",function(D,C,F){var E=D.getValue();CQ.Log.debug("RfxTypeSelect: "+E);ct.rfx.Dialog.prototype.notifyChangeRfxType(E)},this.RfxTypeSelect)};ct.rfx.Dialog.prototype.Dlg=null;ct.rfx.Dialog.prototype.RfxTypeSelect=null;ct.rfx.Dialog.prototype.RfxParameterSelect=null;ct.rfx.Dialog.prototype.notifyChangeRfxType=function(B){if(B.toString()==="dlo"){var A=new Array();window.bmwnext_rfx_button_dialog.RfxParameterSelect.setOptions(A);window.bmwnext_rfx_button_dialog.RfxParameterSelect.disable()}else{if(B.toString()==="rfo"){var A=new Array();A.push({value:"configId",text:"Config ID"});window.bmwnext_rfx_button_dialog.RfxParameterSelect.setOptions(A);window.bmwnext_rfx_button_dialog.RfxParameterSelect.enable();window.bmwnext_rfx_button_dialog.RfxParameterSelect.setValue("configId")}else{if(B.toString()==="rfi"||B.toString()==="tda"||B.toString()===""){var A=new Array();A.push({value:"",text:"Without Parameters"});A.push({value:"seriesModelRange",text:"Series & ModelRange"});A.push({value:"configId",text:"Config ID"});window.bmwnext_rfx_button_dialog.RfxParameterSelect.setOptions(A);window.bmwnext_rfx_button_dialog.RfxParameterSelect.enable()}}}};var rlRfxForm=function(){function A(D,T){var L=CoreFormsBase.inheritanceFrom(rlFormBase.create(D,T));var H=L.parent;L.typeName="rlRfxForm";function B(){if(L.validate()){var W=L.getEditedData();L.setData(W);L.switchToViewMode()}}L.getEditedData=function(X){X=H.getEditedData(X);C(X);if(X&&X.user&&X.user.profile.addresses){for(var Y=0,W=X.user.profile.addresses.length;Y<W;Y++){delete X.user.profile.addresses[0].addressGUID}}return X};function C(Y){if(jq.isPlainObject(Y)){for(var X in Y){if(jq.isPlainObject(Y[X])||jq.isArray(Y[X])){C(Y[X])}else{if(X=="id"||X=="GUID"){delete Y[X]}}}}else{if(jq.isArray(Y)){for(var Z=0,W=Y.length;Z<W;Z++){C(Y[Z])}}}}function N(){L.showDitherLayer();L.waitForLiveValidation(function(){if(L.validate()){var W=L.getEditedData();W.dialog=L.getContext();L.setData(W);L.submitForm(W)}else{L.hideDitherLayer()}})}function P(){if(rlComponentLoader.isRunning("glassPaneLayerNext")){rlGlassPaneLayerNext.closeDialog()}}function Q(){if(typeof rlUserDialog!="undefined"){rlUserDialog.showRegistrationDialog()}}function E(){L.switchToEditMode()}function O(X){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){var W=X?jq(".rfxResultPar").parent():D.parents(".rfx");if(W.length==0){W=jq(".formButtonBar")}W.find(".rfxSendButton").unbind("click").click(N);W.find(".rfxCancelButton").unbind("click").click(P);W.find(".rfxNextButton").unbind("click").click(B);W.find(".rfxBackLink").unbind("click").click(E);W.find(".rfxCloseButton").unbind("click").click(P);W.find(".rfxRegisterButton").unbind("click").click(Q)}}function R(){return rlPage.isEditMode()||rlPage.isDesignMode()}function J(){try{var W=L.getFormType();if(W&&W.length>0&&rlMandator.getCountry()=="NL"&&!R()){W=W.toLowerCase();if(W=="rid"){W="rfi"}_stq=_stq||[];_stq.push(["resetTags"]);_stq.push(["setPageStructure","nl","popup",W,"show"]);_stq.push(["loadTags"])}}catch(X){console.log("NL-Tracking error in rfxForm:"+X)}}L.getDataSink=function(W){throw ("Warning for DataSink: Override getDataSink OR define an empty method submitForm !")};L.trackFormSubmitData=function(W){};L.submitForm=function(X){L.showDitherLayer();var W=L.getDataSink(X);L.resetValidationMessages();W.save({success:function(Y){L.trackFormSubmitData(X);L.setData(Y);L.switchToResultMode();L.hideDitherLayer()},error:function(Y){L.switchToResultMode();L.hideDitherLayer()},validation:function(Y){L.showBackendMessages(Y);L.hideDitherLayer()}})};L.canCopeWithDataSourceError=function(X){if(!H.canCopeWithDataSourceError(X)){if(X.dataSourceId==="vehicle"){var W=L.getSources();for(var Y=0;Y<W.length;Y++){if(W[Y].id===X.dataSourceId){L.removeFieldsetById(W[Y].fieldSetId)}}return true}return false}return true};L.switchToViewMode=function(){jq(".rfx").addClass("viewMode").removeClass("editMode resultMode");jq.each(L.getFieldSetsById(),function(X,W){W.switchToViewMode()});M()};L.switchToEditMode=function(){J();jq(".rfx").addClass("editMode").removeClass("viewMode resultMode");jq.each(L.getFieldSetsById(),function(X,W){W.switchToEditMode(false)});this.resetValidationMessages();M();if(D.attr("data-focusonfirstinputfield")=="true"){rlRfxViewHelper.focusOnFirstInputField(D)}};L.showSuccessView=function(Y,W){rlGlassPaneLayerNext&&rlGlassPaneLayerNext.openDialog({content:Y,url:window.bmwGlassPaneUrl,onClose:function(){},onSequenceEnded:function(){W&&W()}});var X=false;rlGlassPaneLayerNext&&rlGlassPaneLayerNext.addCloseListener(function(){if(!D.is(":visible")&&!X){U("formSuccess");X=true}},false)};L.showErrorView=function(W,X){rlErrorService.handleError({actor:rlErrorService.ACTOR_USER,requestStatus:W+" "+X});U(rlTrackingListener.FORM_IDS.FORM_ERROR)};L.switchToResultMode=function(X,Y){D.closest(".rfx").addClass("resultMode").removeClass("editMode viewMode");var W=".rfxResult";if(!X){W+=".success";if(L.isLoggedIn()){jq(W+" .rfxRegisterButton").hide()}U(rlTrackingListener.FORM_IDS.FORM_SUBMIT);G();L.showSuccessView(W,function(){O(true)})}else{console.error("Rfx Validation exception: "+X);L.hideDitherLayer();L.showErrorView(X,Y)}};function U(W){I(W,rlTrackingListener.TRACKING_TYPES.FORM)}function K(){I(rlTrackingListener.FORM_IDS.SWITCH_LAYER,rlTrackingListener.TRACKING_TYPES.FORM)}function I(X,W){jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:X,info:D.data(),type:W})}function M(){rlGlassPaneLayerNext&&rlGlassPaneLayerNext.isOpen()&&rlGlassPaneLayerNext.layerSizeToWindowSize()}function G(){if(rlMandator.getMarket()==="GB"){var Z=V();if(typeof Z!="undefined"&&Z.length>0){var Y=Math.random()+"";var X=Y*10000000000000;var W=jq("<iframe src='https://3194234.fls.doubleclick.net/activityi;src=3194234;type=bmw20786;cat="+Z+";ord=1;num="+X+"?' width='1' height='1' frameborder='0' style='display:none'></iframe>");jq(".headlineSuccess").append(W)}}}function V(){var X="";var W=L.getFormType();switch(W){case"TDA":X="bmw_t532";break;case"RFO":X="bmw_b336";break;case"RFI":X="bmw_p490";break;case"RFID":X="bmw_d245";break}return X}L.getContext=function(){throw ("You must override self.getUseCaseMetaDataRoot with the correct context!")};L.getUseCaseMetaDataRoot=function(){throw ("You must override self.getUseCaseMetaDataRoot with the correct useCaseMetaDataRoot!")};L.onReady=function(){L.switchToEditMode()};function F(){var Z=rlRfxSubBrandSwitch.getInstance();var Y=jq("<div />").addClass("subBrandSwitchArea").addClass("clearfix");var b=jq("<div />").addClass("subBrandSwitchAreaPart");var X=jq("<div />").addClass("subBrandLabel").text(Z.getSubBrandLabel());b.append(X);var W=jq("<div />").addClass("subBrandSwitchAreaPart");var a=jq("<a href='javascript:void(0)'></a>");a.text(Z.getSwitchToNextSubBrandLabel());a.addClass("linkArrow13px");a.click(function(){K();Z.switchToNextSubBrand()});W.append(a);if(Z.getCurrentSubBrandIndex()===0){Y.append(b,W)}else{if(Z.getCurrentSubBrandIndex()===1){Y.append(W,b)}}jq(".gplnContentHeader .glassPaneLayerHeaderContent").css("padding-top","10px").prepend(Y);jq(".gplnAjaxContent h1.headlineh1Mixed").css("margin-top","2px")}function S(){var W=L.determineFormSubBrand();if(rlComponentLoader.isRunning("glassPaneLayerNext")){rlGlassPaneLayerNext.subbrandChange(W)}}O();S();if(isDefined(window.rfxContextParams)&&window.rfxContextParams.isSubBrandSwitchVisible===true){F()}return L}return{__init__:function(){},__start__:function(){},create:function(B,C){return A(B,C)}}}();var rlShareForm=function(){return{__start__:function(){},__init__:function(){}}};var rlSocialmediaIcon=function(){return{__start__:function(){},__init__:function(){}}}();var rlTdaDataSink=function(){function A(F){var C=CoreFormsBase.inheritanceFrom(rlRfxBaseDataSink.createDataSink());var E=C.parent;C.typeName="rlTdaDataSink";C.prepareData=function(G){var H=E.prepareData(G);if(H.selectedVehicle){H.series=H.selectedVehicle.series;H.bodyType=H.selectedVehicle.bodyType;H.model=H.selectedVehicle.model;H.brand=H.selectedVehicle.brand;delete H.selectedVehicle}H.comment=G.comment;H.policy=H.policyCurrent_TDA;delete H.policyCurrent_TDA;return H};function D(){return rlPage.isEditMode()||rlPage.isDesignMode()}function B(G){try{if(rlMandator.getCountry()=="NL"&&!D()){_stq=_stq||[];_stq.push(["resetTags"]);_stq.push(["setPageStructure","nl","popup","tda","confirmation"]);series=G.series?G.series:(G.vehicleConfiguration?G.vehicleConfiguration.series:"");modelRange=G.bodyType?G.bodyType:(G.vehicleConfiguration?G.vehicleConfiguration.modelRange:"");_stq.push(["addTagProperty","series",series]);_stq.push(["addTagProperty","modelRange",modelRange]);_stq.push(["loadTags"])}}catch(H){console.log("NL-Tracking error in tdaDataSink:"+H)}}C.save=function(H){var G=C.prepareData(F);B(G);rlCoreServices.sendRequestForTestDrive(G,function(I){H.success(I)||function(J){}},function(I){C.handleErrors(I,H.error,H.validation)},function(I){C.handleValidationErrors(I,H.validation)})};return C}return{__init__:function(){},__start__:function(){},createDataSink:function(B){return A(B)}}}();var rlTellAFriendFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlTellAFriendFS";var F=["recipientName","recipientMail","personalNote"];C.init=function(){D.init()};C.getStateForInputCache=function(H){var G=D.getStateForInputCache(H);if(typeof (G)!="undefined"){jq.each(F,function(I,J){if(G.hasOwnProperty(J)===true){delete (G[J])}})}return G};C.getValidationRules=function(G){return G};C.getFieldMappers=function(G){G.tellafrienduser={get:function(I,H){return undefined},set:function(L,K,J){var I=rlFormatter.formatName(K);J.find("[data-field=senderName]").val(I?I:"");var H="";if(typeof (K)!="undefined"){if(typeof (K.profile.email)!="undefined"){H=K.profile.email.value}if(typeof (H)=="undefined"||jq.trim(H).length<1){H=K.loginName}}J.find("[data-field=senderEmail]").val(H?H:"")}};G.noop={get:function(I,H){return H.val()},set:function(J,I,H){}};return G};C.resetFs=function(){jq.each(F,function(G,H){B.find("[data-field="+H+"]").val("")})};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlTextAreaFS=function(){function A(B,E){var C=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(B,E));var D=C.parent;C.typeName="rlTextAreaFS";C.init=function(){D.init();var F=jq(B).find(".fieldSetFieldTextarea").first();jq(F).charCounter(F.attr("data-maxlength"),{container:B.selector+" .fieldSetCharCounter",format:"%1 "+F.attr("data-maxlengthtext"),pulse:false,delay:100})};C.supportsInputCache=function(){return false};C.getValidationRules=function(F){F=D.getValidationRules(F);F.maxLength={event:"blur",rule:function(J,G,I){var H=jq(G);if(H.val().length>H.attr("data-maxlength")){return{fieldName:J,level:"ERROR",errorKey:"textareaMaxLength"}}}};return F};C.getMailSummary=function(F,G,H){var I=jq.trim(B.find("textarea[data-field]").val());if(I!=""){F.push({type:G.LABEL,value:I,id:(H!==true)?undefined:B.find('[data-field]:not([data-field=""])').attr("data-field")})}return F};C.resetFs=function(){B.find("textarea[data-field]").val("").keypress()};return C}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlTrackingDisabler=function(){function A(){var B={cookieKey:"bmwcsaP3P",cookieValue:"completeOptOut",expires:356};rlCookieController.setCookie(B);return document.cookie.match("(^|;)?bmwcsaP3P=completeOptOut(;|$)")}return{__init__:function(){jq(".subheadlineUserTrackingEnabled").css("display","none");jq(".subheadlineUserTrackingDisabled").css("display","none");if(!document.cookie.match("(^|;)?bmwcsaP3P=completeOptOut(;|$)")){jq(".trackingOptOutDisclaimerEnabled").css("display","inline");jq(".trackingOptOutDisclaimerDisabled").css("display","none")}else{jq(".trackingOptOutDisclaimerEnabled").css("display","none");jq(".trackingOptOutDisclaimerDisabled").css("display","inline")}},__start__:function(){jq(".linkUserTracking").click(function(){if(!document.cookie.match("(^|;)?bmwcsaP3P=completeOptOut(;|$)")){if(!A()){jq(".trackingOptOutDisclaimerEnabled").css("display","inline");jq(".trackingOptOutDisclaimerDisabled").css("display","none")}else{jq(".trackingOptOutDisclaimerEnabled").css("display","none");jq(".trackingOptOutDisclaimerDisabled").css("display","inline");jq(".subheadlineUserTrackingDisabled").css("display","inline");if(window.rlCoreServices&&window.rlCoreServices.trackEventAsClick){var B=(jq(event.target).parents(".InfoLayer").length>0?"Layer":"Page");window.rlCoreServices.trackEventAsClick("ckdscOptOutLinkClicked_From"+B,"genericAction/link/click")}}}else{rlCookieController.removeCookie({cookieKey:"bmwcsaP3P"});jq(".trackingOptOutDisclaimerEnabled").css("display","inline");jq(".trackingOptOutDisclaimerDisabled").css("display","none");jq(".subheadlineUserTrackingEnabled").css("display","inline")}return false})}}}();var rlTradeInVehicleFS=function(){function A(J,C){var I=CoreFormsBase.inheritanceFrom(rlVehicleDetailsFS.createFS(J,C));var G=I.parent;I.typeName="rlTradeInVehicleFS";var D="#"+C.fsId+"_vehicledetails",F="#"+C.fsId+"_yes",B="#"+C.fsId+"_no";function H(){var K=jq(D);jq(F).click(function(){K.fadeIn(700)});jq(B).click(function(){K.fadeOut(400)})}function E(){J.find("[data-field]").each(function(K,M){M=jq(M);var N=M.attr("data-field");if(N.indexOf("vehicle")===0){var L=N.replace("vehicle","tradeInVehicle");M.attr("data-field",L);M.attr("data-meta",N);M.attr("data-source","")}});J.find("[data-validators]").each(function(L,N){N=jq(N);var K=N.attr("data-validators").split(/,\s*/);var M="";jq.each(K,function(O,P){M+=P.replace(/^(vin.*)$/,"$1:tradeInVehicle");if(O<K.length-1){M+=","}});N.attr("data-validators",M)});J.find("[data-validationplacements]").each(function(L,M){M=jq(M);var K=M.attr("data-validationplacements").split(/,\s*/);var N="";jq.each(K,function(O,P){N+=P.replace(/^(vin.*)$/,"tradeInVehicle.$1");if(O<K.length-1){N+=","}});M.attr("data-validationplacements",N)})}I.setStateFromInputCache=function(K){G.setStateFromInputCache(K);if(jq(F).is(":checked")>0){jq(D).show()}};I.getEditedData=function(K){if(jq(F).is(":checked")){K=G.getEditedData(K);K&&K.vehicle&&delete K.vehicle.defaultFreeTextNote}return K};I.getMailSummary=function(K,L){if(jq(F).is(":checked")){K=G.getMailSummary(K,L)}return K};H();E();return I}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();var rlUserRegisterForm=(function(){function A(D,F){var R=CoreFormsBase.inheritanceFrom(rlMyBmwFormBase.create(D,F));var O=R.parent;R.typeName="rlUserRegisterForm";var K={leadContext:window.globalLeadContext||D.attr("data-leadContext"),campaignId:D.attr("data-campaignId"),campaignOfferId:D.attr("data-campaignOfferId"),campaignResponseType:D.attr("data-campaignResponseType"),campaignRequestType:D.attr("data-campaignRequestType"),campaignTreatmentId:D.attr("data-campaignTreatmentId"),campaignIsStayInformed:D.attr("data-campaignIsStayInformed"),brand:D.attr("data-subbrand"),modelRange:D.attr("data-modelRange")};R.getUseCaseMetaDataRoot=function(){return"register"};R.getContext=function(){return"CREATE"};R.getFormType=function(){var S="";if(isDefined(K.campaignIsStayInformed)&&K.campaignIsStayInformed.toLowerCase()=="true"){S="ROI"}else{if(isDefined(K.campaignId)&&K.campaignId.length>0){S="CAMPAIGN_"+K.campaignId}else{S="REGISTRATION"}}return S};R.canCopeWithDataSourceError=function(V){if(!O.canCopeWithDataSourceError(V)){if(V.dataSourceId==="vehicle"){var T=R.getSources();for(var U=0,S=T.length;U<S;U++){if(T[U].id===V.dataSourceId){R.removeFieldsetById(T[U].fieldSetId)}}return true}return false}return true};R.setMetaData=function(S){O.setMetaData(S)};R.setData=function(S){O.setData({user:{firstName:rlC2bInformationSet.firstName,lastName:rlC2bInformationSet.lastName}});rlC2bInformationSet.resetInformation();R.switchToEditMode()};R.showSaveDitherLayer=function(){R.showDitherLayer()};R.hideSaveDitherLayer=function(){R.hideDitherLayer()};R.callDataSinkMethod=function(S){rlUserFormDS.createDS().create(S)};function P(){return rlPage.isEditMode()||rlPage.isDesignMode()}function E(){try{if(rlMandator.getCountry()=="NL"&&!P()){_stq=_stq||[];_stq.push(["resetTags"]);_stq.push(["setPageStructure","nl","popup","mybmw-reg","confirmation"]);_stq.push(["loadTags"])}}catch(S){console.log("NL-Tracking error in userRegisterForm:"+S)}}function C(){R.showSaveDitherLayer();var S=J(R.getEditedData(),K);R.callDataSinkMethod({data:S,success:function(){E();R.hideDitherLayer();jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:rlTrackingListener.FORM_IDS.FORM_SUBMIT,info:D.data(),type:rlTrackingListener.TRACKING_TYPES.FORM});if(H()){rlGlassPaneLayerNext.switchContent({url:GLOBAL_CMX_JS_SSL_SERVER+H(),width:"w2",onClose:function(){if(!D.is(":visible")){window.location.reload()}},onAfterAjaxContentLoaded:function(){if(window.reloadPageAfterRegistration){var T=jq(".glassPaneLayerContent").find("a.feedbackLink");T.attr("href","#");T.click(function(){rlGlassPaneLayerNext.closeDialog();jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:"formSuccess",info:D.data(),type:rlTrackingListener.TRACKING_TYPES.FORM});return false});rlGlassPaneLayerNext.addCloseListener(function(){window.location.reload()})}}})}},error:function(T){rlErrorService.handleError(T);R.hideSaveDitherLayer()},validation:function(T){R.showBackendMessages(T);R.hideSaveDitherLayer()}})}function J(T,S){if(T){for(var U in S){if(S.hasOwnProperty(U)&&S[U]){T.campaignContext=jq.extend(T.campaignContext||{},S);break}}G(T)}return T}var N="policyCurrent_";function G(U){var S={};var T=0;jq.each(U,function(W,V){if(Q(W)){S[W]=V;U.policy=V;delete U[W];T++}});if(T>1){jq.each(S,function(V,X){var W=I(V);if(W.toLowerCase().indexOf("campaign")>=0){U.campaignContext.policy=X}else{U.policy=X}})}}function Q(S){return S!=null?(S.indexOf(N)===0):false}function I(S){return S.substring(N.length,S.length)}function M(){if(R.validate()){C()}}function L(){if(!rlPage.isEditMode()&&!rlPage.isDesignMode()){D.find(".formSubmitButton").click(M)}}function H(){return B()||D.attr("data-nextpage")}L();return R}function B(){}return{__init__:function(){},__start__:function(){},create:function(C,D){return A(C,D)},setRedirectPathOnSuccessFn:function(C){B=C}}}());var rlVehicleFormDS=function(){function A(F){var B=CoreFormsBase.inheritanceFrom(rlBaseDataSource.createDS(F));var D=B.parent;B.typeName="rlVehicleFormDS";B.getUserData=function(H,G){console.warn("Base class vehicleFormDS cannot load user data.");H()};B.getMetaData=function(H,G){rlNccServices.listPreOwnedVehicleEnumerations({success:function(I){I=C(I);rlNccServices.modelTreeListBrands({success:function(){H(I)},fail:G,error:G})},fail:G,error:G})};B.postProcessLoadedData=function(J){if(!J||!J.user||!J[this.id]){return J}var L=J.user.metaData&&J.user.metaData.user&&J.user.metaData.user.vehicle;if(!L){console.error("coreVehicleMetaData not found!");return J}var H=J[this.id].metaData&&J[this.id].metaData[this.id];if(!H){console.error("nccVehicleMetaData not found!");return J}function K(M,O){if(O&&M&&M.length>0){for(var N=0;N<M.length;N++){if(M[N]&&M[N].key===O){return true}}}return false}function G(M,O){var N=[];if(M&&M.length>0&&O&&O.length>0){jq.each(M,function(P,Q){if(K(O,Q.key)){N.push(Q)}})}return N}var I=jq.extend(true,{},L);I.annualUse=I.mileageYear||{};delete I.mileageYear;I.annualUseDelete=I.mileageYearDelete||{};delete I.mileageYearDelete;I.annualUse.valueList=H.annualUse.valueList;I.usage=I.usage||{};I.usage.valueList=G(I.usage.valueList,H.usage.valueList);I.vehicleType=I.vehicleType||{};I.vehicleType.valueList=G(I.vehicleType.valueList,H.vehicleType.valueList);J[this.id].metaData[this.id]=I};function C(G){var H={};jq.each(G,function(L,I){var K=E(L);H[K]={valueList:[]};for(var J=0;J<I.length;J++){H[K].valueList.push({key:I[J].code,value:I[J].name})}});return{vehicle:H}}function E(G){if(G==="annualUseOptions"){return"annualUse"}else{if(G==="usageOptions"){return"usage"}else{if(G==="vehicleTypeOptions"){return"vehicleType"}else{throw ("Unsupported vehicle meta data key: "+G)}}}}return B}return{__init__:function(){},__start__:function(){},createDS:function(B){return new A(B)}}}();var rlVehicleInterestsFS=function(){return{__init__:function(){},__start__:function(){},createFS:function(A,B){return rlVehicleInterestsFSInstance(A,B)}}}();function rlVehicleInterestsFSInstance(d,B){var F=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(d,B));var I=F.parent;F.typeName="rlVehicleInterestsFS";var Z="div.fieldSetEditAreaRow .vehicleInterestList",E=".vehicleInterestAddNewModelButtonContainer",O=E+" a",C='[name="btnDelete"]',k="select.series",J="select.bodies";var L="KEY_NOTHING";var b=F.getFieldsetProperties();var T="";var M;var W;var X=0;F.getEditedData=function(m){return I.getEditedData(m)};F.getValueRenderers=function(m){m.hierarchicalDropdown=function(w,p,o,q){var v=[];A(o);K(p);for(var y=0;y<W.getSize();y++){var u=W.getSeries(y);var t=M.getValueForKey(u);var x=W.getBody(y);var n=M.getBodyModelForSeriesKey(u);if(n!=null){var r=n.getValueForKey(x);v.push(t+" "+r)}else{v.push(t)}}if(v.length==0){v.push("---")}q.html("<div>"+v.join("</div><div>")+"</div>")};return m};F.getMetaDataRenderers=function(m){m.hierarchicalDropdown=function(p,n,o){T=p;A(n)};return m};F.getFieldMappers=function(m){m.hierarchicalDropdown={get:function(x,o){var q=d.find(Z).children();var n=[];var p=W.getUserDataCopy()||[];var w=new UserDataModel(p);q.each(function(z,AC){var AB=jq(AC);var AA=Y(AB);var y=Q(AB);if(AA!=L&&y!=L){if(w.indexOf(y,AA)<0){n.push({id:null,series:AA,body:y})}}});function r(y,AB){if(q&&q.length>0){for(var AA=0;AA<q.length;AA++){var AC=jq(q[AA]);var z=Q(AC);z=z===""?undefined:z;var AD=Y(AC);AD=AD===""?undefined:AD;if(z!=L&&AD!=L&&z===y&&AD===AB){return true}}}return false}if(p&&p.length>0){for(var u=0;u<p.length;u++){var v=w.getBody(u);var t=w.getSeries(u);if(!r(v,t)){n.push({id:-(W.getId(u)),series:t,body:v})}}}return n},set:function(t,o,q){var n=new UserDataModel(o);H();if(n.getSize()>0){for(var r=0;r<n.getSize();r++){l(M,n.getSeries(r),n.getBody(r))}}else{for(var p=1;p<=b.minrows;p++){l(M,null,null)}}j()}};return m};F.setStateFromInputCache=function(t){H();for(var n=0;n<b.maxrows;n++){var o=F.getUniqueId(T,n)+"_Series";var r=F.getUniqueId(T,n)+"_Body";var u=F.getInputCacheItemForInputId(t,o);var q=F.getInputCacheItemForInputId(t,r);var p=u!=null?u.value:null;var m=q!=null?q.value:null;if(u!=null){l(M,p,m)}}};F.getMailSummary=function(m,n,o){d.find(".vehicleInterestList .vehicleInterestListItem").each(function(r,q){q=jq(q);var p="";q.find("select:visible").each(function(t,u){if(jq(u).find("option:selected").val()!=L){p=p+" "+jq(u).find("option:selected").text()}});if(jq.trim(p).length>0){m.push({type:n.LABEL,value:jq.trim(p),id:(o!==true)?undefined:d.find('[data-field]:not([data-field=""])').attr("data-field")})}})};function A(n){var m=typeof n=="object"?n:null;M=new MetaDataModel(m,L,b.pleaseselect)}function K(m){W=new UserDataModel(m)}function l(o,r,n){if(X<b.maxrows){var m=F.getUniqueId(T,X);var p={inputId:m};var t=jq(F.renderTemplate("listItem",p));d.find(Z).append(t);R(t,o,r);var q=o.getBodyModelForSeriesKey(r);f(t,q,n);X++;P(t).click(g);G(t).change(D);e(t).change(S);j()}}function a(v,o,q){if(X<b.maxrows){var r=F.getUniqueId(T,X);var p={inputId:r};var t=jq(F.renderTemplate("listItem",p));var u=d.find(Z).append(t);R(t,v,o);var n=v.getBodyModelForSeriesKey(o);f(t,n,q);X++;P(t).click(g);G(t).change(D);e(t).change(S);j();var m=d.find("#"+r+"_Row");if(X>b.minrows){m.fadeOut(0);m.slideUp(0);m.animate({height:"show",opacity:"show"},700)}}}function H(){X=0;d.find(Z).empty()}function R(o,n,m){var p=G(o);i(p,n,m)}function f(o,n,m){var p=e(o);if(n!=null&&n.getSize()>0){p.fadeIn(700);i(p,n,m)}else{p.empty();p.hide()}}function i(o,n,m){o.empty();F.getRegisteredMetaRenderers().dropdown(T,n.getMetaData(),o);F.getRegisteredFieldMappers().dropdown.set(T,m,o)}function N(m){console.log("vehicleInterestsFS::addNewModel");a(M,null,null)}function g(m){console.log("vehicleInterestsFS::deleteModel");if(X>b.minrows){U(m).animate({height:0,opacity:"0.00"},400,function(){jq(this).remove();I.saveStateToInputCache()})}else{U(m).remove()}X--;if(X<b.minrows){N()}j()}function D(n){console.log("vehicleInterestsFS::seriesChanged");var m=U(n);var o=Y(m);f(m,M.getBodyModelForSeriesKey(o),null);I.saveStateToInputCache()}function S(m){I.saveStateToInputCache()}function j(){if(!d.hasClass("editMode")){V();return }if(X>=b.maxrows){d.find(E).animate({height:"hide",opacity:"hide"},400);d.find(O).animate({height:"hide",opacity:"hide"},400)}else{d.find(E).animate({height:"show",opacity:"show"},700);d.find(O).animate({height:"show",opacity:"show"},700)}}function V(){if(X>=b.maxrows){d.find(E).hide();d.find(O).hide()}else{d.find(E).show();d.find(O).show()}}function P(m){return m.find(C)}function G(m){return m.find(k)}function e(m){return m.find(J)}function Y(m){return F.getRegisteredFieldMappers().dropdown.get(T,G(m))}function Q(m){var n=F.getRegisteredFieldMappers().dropdown.get(T,e(m));return n?n:""}function U(m){return jq(m.currentTarget).parent()}V();d.find(O).click(N);return F}function MetaDataModel(C,A,D){var F=this;var B=[];function E(H){var I=[{id:0,key:A,value:D,bodies:[{id:0,key:A,value:D}]}];var G=[];if(H!=null&&typeof H=="object"){if(jq.isArray(H.series.valueList)){jq.each(H.series.valueList,function(J,L){var K={id:L.id,key:L.key,value:L.value,bodies:[]};if(jq.isArray(H.body.valueList)){jq.each(H.body.valueList,function(O,N){if(N.parent==K.id){var M={id:N.id,key:N.key,value:N.value};K.bodies.push(M)}})}else{console.warn("_metaData.body.valueList is undefined!")}G.push(K)})}else{console.warn("_metaData.series.valueList is undefined!")}}B=jq.merge(I,G)}this.getMetaData=function(){return{valueList:B}};this.getKey=function(G){return B[G].key};this.getValue=function(G){return B[G].value};this.getSize=function(){if(typeof B==="object"){return B.length}else{return 0}};this.getIndexForKey=function(I){var H=null;for(var G=0;G<F.getSize();G++){if(F.getKey(G)==I){H=G;break}}return H};this.getValueForKey=function(H){var G=F.getIndexForKey(H);if(G!==null){return F.getValue(G)}else{return""}};this.getBodyModelForSeriesKey=function(H){var G=F.getIndexForKey(H);if(G&&B[G].bodies){return new BodyMetaDataModel(B[G].bodies)}else{return null}};E(C)}function BodyMetaDataModel(B){var C=this;var A=[];if(B.length>=0){A=B}else{A=[B]}this.getMetaData=function(){return{valueList:A}};this.getKey=function(D){return A[D].key};this.getValue=function(D){return A[D].value};this.getIndexForKey=function(F){var E=null;for(var D=0;D<C.getSize();D++){if(C.getKey(D)==F){E=D;break}}return E};this.getValueForKey=function(E){var D=C.getIndexForKey(E);if(D!==null){return C.getValue(D)}else{return""}};this.getSize=function(){if(typeof A==="object"){return A.length}else{return 0}}}function UserDataModel(B){var C=this;var A=B;this.getId=function(D){return A[D].id};this.getSeries=function(D){return A[D].series};this.getBody=function(D){return A[D].body};this.getSize=function(){return A&&jq.isArray(A)?A.length:0};this.indexOf=function(D,F){D=D===""?undefined:D;F=F===""?undefined:F;if(A&&jq.isArray(A)&&A.length>0){for(var E=0;E<A.length;E++){if(C.getBody(E)===D&&C.getSeries(E)===F){return E}}}return -1};this.getUserDataCopy=function(){return A&&jq.isArray(A)?A.slice(0):[]}}var rlVehicleManual=function(){var K={};var A={};var G=undefined;var D=undefined;var I=0;var H=undefined;function B(){return ++I}function E(f){var U={};U.typeName="rlVehicleManual";A[f.id]=U;var V=jq("#"+f.id);var w={entryPointsLoaded:[],disclaimerLoaded:[],contentPageLoaded:[]};var v={};var L={};var l={};var W=0;var y={};U.createSequenceId=B;function AG(){rlMyVehiclesController.addVehicleStartedLoadingListener({success:function(){AD();l={}}});rlMyVehiclesController.addVehicleLoadedListener({success:function(AJ){if(AJ&&AJ.vin){U.vin=AJ.vin;p()}else{U.vin=undefined;R()}z(AJ)}});rlMyVehiclesController.addVehicleListLoadedListener({success:function(AJ){if(AJ.length==0){AD();d()}}})}function a(){function AJ(){AD();i(undefined)}U.registerEntryPointsLoadedListener({error:AJ});U.registerDisclaimerLoadedListener({error:AJ});U.registerContentPageLoadedListener({error:AJ})}function o(){rlNavigationTab.addTabChangedListener(function(){if(rlNavigationTab.isDomInActiveTabContent(V)&&rlMyVehiclesController.getCurrentVehicleId()&&U.vin&&rlVehicleManualDisclaimer.isDisclaimerAccepted(U.vin)&&!AI(f.id).hasClass("doNotLoadInitialContent")){p()}})}function AD(){W++;q()}function e(){var AJ=W;return{ifSamePageLoad:function(AK){if(AJ===W){AK()}}}}function p(){M();AD();AF(V);j().then(function(){Y();var AJ=jq("body");if(!AJ.hasClass("isShowingVehicleManual")){AJ.addClass("isShowingVehicleManual")}})}function AF(AJ){if(!AJ||!AJ.first()||!rlNavigationTab.isDomInActiveTabContent(AJ)){return }var AL=AJ.css("min-width");var AK=AJ.css("min-height");AJ.css("min-width","700px");AJ.css("min-height","240px");rlDither.on(AJ);AJ.css("min-width",AL);AJ.css("min-height",AK)}function T(AJ){if(!AJ||!AJ.first()){return }rlDither.off(AJ)}function M(){L={};l={}}function j(){var AK=jq.Deferred();var AJ=e();rlVehicleManualDisclaimer.initInstance(V.find(rlVehicleManualDisclaimer.getDisclaimerDiv()),U.vin);rlVehicleManualService.loadManual({vin:U.vin,success:function(AL){AJ.ifSamePageLoad(function(){G=AL.entryPoints;Z(w.entryPointsLoaded,AL.entryPoints);Z(w.disclaimerLoaded,AL.disclaimer);g(AL);u()});AK.resolve()},error:function(AL){AJ.ifSamePageLoad(function(){b(w.entryPointsLoaded);b(w.disclaimerLoaded);i(AL)});AK.reject()}});return AK}function Q(){var AJ=jq.Deferred();P("TOC",function(){var AK=e();rlVehicleManualService.loadToc({vin:U.vin,entryPointType:"TOC",success:function(AL){AK.ifSamePageLoad(function(){L.TOC=AL;k(AL)});AJ.resolve()},error:function(AL){AK.ifSamePageLoad(function(){b(w.contentPageLoaded);i(AL)});AJ.reject()}})});return AJ}function AC(){var AJ=jq.Deferred();P("INDEX",function(){var AK=e();rlVehicleManualService.loadIndex({vin:U.vin,success:function(AL){AK.ifSamePageLoad(function(){L.INDEX=AL;k(AL)});AJ.resolve()},error:function(AL){AK.ifSamePageLoad(function(){b(w.contentPageLoaded);i(AL)});AJ.reject()}})});return AJ}function Y(){if(f.entryPointType==="TOC"){Z(w.entryPointsLoaded,G);Q()}else{if(f.entryPointType==="INDEX"){AC()}else{var AK=null;for(var AJ=0;G&&AJ<G.length;AJ++){var AL=G[AJ];if(AL.type===f.entryPointType){AK=AL.startPage}}U.loadContentPage(AK)}}}function AB(AK,AJ,AL){if(l[AK]){var AM=t(l[AK],AJ);k(AM);window.scrollTo(0,0)}else{AF(V);AL()}}function x(AK,AJ){AJ=AJ||0;AB(AK,AJ,function(){var AL=e();rlVehicleManualService.searchManual({vin:U.vin,keyword:AK,success:function(AM){AL.ifSamePageLoad(function(){l[AK]=AM;var AN=t(AM,AJ);k(AN);window.scrollTo(0,0)})},error:function(AM){AL.ifSamePageLoad(function(){b(w.contentPageLoaded);i(AM)})}})})}function t(AN,AL){var AQ={id:"SEARCHRESULT",type:"searchResultPage",title:K.searchLabelSearchResult,entryPointType:"SEARCHRESULT",content:[{type:"section",id:"sectionSearchresult",content:[]}]};var AO=AN.searchResult.results;var AP=AQ.content[0].content;if(typeof AO==="undefined"||AO.length===0){AP.push({type:"paragraph",text:K.searchLabelNoSearchResult})}else{var AJ="<strong>"+(AL*10)+"&ndash;"+(AL*10+10)+"</strong>";var AK="<strong>"+AO.length+"</strong>";var AS="<strong>"+AN.searchResult.keyword+"</strong>";var AR=K.searchLabelSearchResultInfo.replace(/\{page}/g,AJ).replace(/\{max}/g,AK).replace(/\{keyword}/g,AS);AP.push({type:"paragraph",text:AR});for(var AM=AL*10;AM<Math.min(AO.length,AL*10+10);AM++){AP.push({type:"link",text:AO[AM].title,target:AO[AM].target});AP.push({type:"breadcrumb",breadcrumbs:AO[AM].breadcrumb})}AP.push({type:"pager",pageIndex:AL,numResults:AO.length,keyword:AN.searchResult.keyword})}return AQ}function g(AL){var AJ=AL.graphicPackageMappings;if(!AJ){return }for(var AK=0;AK<AJ.length;AK++){v[AJ[AK].prefix]=AJ[AK].baseUrl}}function AA(AK){var AJ=AK.split("#");if(AJ.length>1){H=AJ[1]}}function AE(){if(!H){return }var AJ=jq("a[name='"+H+"']");if(AJ.length>0){jq("html, body").animate({scrollTop:AJ.offset().top},100)}H=undefined}U.createAbsoluteImgUrl=function(AJ){if(!AJ){return""}for(var AK in v){if(AJ.indexOf(AK)===0){return v[AK]+AJ.substring(AK.length)}}return AJ};U.loadToc=function(){AD();Q()};U.loadIndex=function(){AD();AC()};U.searchVehicleManual=function(AK,AJ){AD();x(AK,AJ)};U.loadContentPage=function(AJ){AA(AJ);AD();P(AJ,function(){var AK=e();rlVehicleManualService.loadContentPage({vin:U.vin,id:AJ,success:function(AL){if(X(AJ,AL)){return }AK.ifSamePageLoad(function(){if(AL.entryPointType==="FAQ"){AL.type="faqPage"}L[AJ]=AL;k(AL)})},error:function(AL){AK.ifSamePageLoad(function(){b(w.contentPageLoaded);i(AL)})}})})};function X(AL,AK){if(U.getInitialEntryPointType()=="FAQ"&&AK.entryPointType!="FAQ"){var AJ=rlVehicleManual.getControllers();jq.each(AJ,function(AM,AO){if(AO.vin==U.vin&&AO.getInitialEntryPointType()!=U.getInitialEntryPointType()){T(V);var AN=AI(AO.getControllerId());AN.addClass("doNotLoadInitialContent");AN.find("a:first").click();AN.removeClass("doNotLoadInitialContent");AO.loadContentPage(AL);return false}});return true}return false}function AI(AK){var AJ=jq("[id="+AK+"]").parents(".navigationTabContent").attr("id").replace("Content","");return jq("#"+AJ)}function P(AK,AJ){if(L[AK]){if(X(AK,L[AK])){return }k(L[AK])}else{AF(V);AJ()}}function k(AJ){D=AJ;Z(w.contentPageLoaded,D);u();AE()}U.getCurrentEntryPoints=function(){return G};U.getCurrentContentPage=function(){return D};U.setDisclaimerAccepted=function(){u()};U.getInitialEntryPointType=function(){return f.entryPointType};U.getControllerId=function(){return f.id};function d(){V.find(".vmstate").hide();V.find(".vmstate.vmcontentstate").hide();V.find(".vmstate.vmcontentstate").css("visibility","hidden").css("position","absolute");V.find(".vehicleManualSearchBox").hide()}function q(){d();var AJ=V.find(".vmstate.vmcontentstate");var AK=V.find(".vmstate.vmloadingstate");var AL=AK.find(".entrypointscopy");AL.html(AJ.find(".vehiclemanualentrypoints").html());AK.show()}function R(){T(V);d();V.find(".vmstate.vmnovinstate").show()}function z(AK){var AJ=AH(AK);n().each(function(AL,AM){AM=jq(AM);AM.html(y[AM.attr("id")].replace(/%vehiclename%/g,AJ))})}function AH(AJ){return AJ?AJ.freeTextNote:""}function m(){T(V);d();V.find(".vmstate.vehiclemanualdisclaimer").show().end().find(".vmstate.vmcontentstate").css("visibility","hidden").css("position","absolute")}function u(){if(!rlVehicleManualDisclaimer.isDisclaimerAccepted(U.vin)){m()}else{if(G&&D){d();V.find(".vmstate.vmcontentstate").show();V.find(".vmstate.vmcontentstate").css("visibility","visible").css("position","relative");V.find(".vehicleManualSearchBox").show();rlBreadcrumbDynamic.render()}}rlComponentLoader.requireComponentWithDeferredExec("salesBarAnimation",function(){rlSalesBarAnimation.updateSalesBar()});T(V)}function i(AL){T(V);d();V.find(".vmstate.vmerrorstate").show();var AM=V.find(".globalErrorMessage");var AJ=V.find(".manualNotAvailable");var AK=V.find(".missingLanguageErrorMessage");if(S(AL)){AM.hide();AJ.hide();AK.show()}else{if(r(AL)){AM.hide();AJ.show();AK.hide()}else{AM.show();AJ.hide();AK.hide()}}d();V.find(".vmstate.vmerrorstate").show();V.find(".vehicleManualSearchBox").hide()}function S(AK){var AJ=AK&&AK.status==="ERROR"&&AK.error&&AK.error.errorCodeId==="MANUAL_NOT_AVAILABLE";return AJ}function r(AK){var AJ=AK&&AK.status==="ERROR"&&AK.error&&AK.error.errorCodeId==="MANUAL_NOT_AVAILABLE_WITHOUT_ALTERNATIVE_LANGUAGE";return AJ}U.registerEntryPointsLoadedListener=function(AJ){w.entryPointsLoaded.push(AJ)};U.registerDisclaimerLoadedListener=function(AJ){w.disclaimerLoaded.push(AJ)};U.registerContentPageLoadedListener=function(AJ){w.contentPageLoaded.push(AJ)};function Z(AJ,AL){for(var AK=0;AK<AJ.length;AK++){if(typeof AJ[AK].success==="function"){AJ[AK].success(AL)}}}function b(AJ){for(var AK=0;AK<AJ.length;AK++){if(typeof AJ[AK].error==="function"){AJ[AK].error()}}}function O(){V.find(".vehicleManualAddVinButton").click(function(){rlUserDialog.showAddVinToMyVehicleDialog({vehicle:rlMyVehiclesController.getCurrentVehicle()})})}function n(){return V.find("div[data-contains-vehicle-name]")}function N(){n().each(function(AJ,AK){AK=jq(AK);if(!AK.attr("id")){AK.attr("id",""+new Date().getTime()+""+U.createSequenceId())}if(!y[AK.attr("id")]){y[AK.attr("id")]=AK.html()}})}O();N();AG();o();a();return U}function C(L){E(L)}function F(L){return A[L]}function J(T){function U(Z,W,V){var X={title:undefined,url:undefined,clickhandler:undefined};function Y(a){return(typeof a.title!="undefined"&&a.title!=null&&a.title!="")}X.title=Z;X.url=W;X.clickhandler=V;return(Y(X))?X:undefined}function L(){var V=jq(".pagetitle");if(V.length>0){jq("html, body").animate({scrollTop:V.offset().top},100)}}function S(W){var V=W.getCurrentContentPage();if(V&&V.title){return U(V.title,null,function(){L()})}return undefined}function M(Y){var X=undefined;var W=Y.getCurrentContentPage();if(W){var V=Y.getCurrentEntryPoints();jq.each(V,function(Z,a){if(a.type===W.entryPointType){X=a;return false}})}if(X&&X.title&&X.startPage){return U(X.title,null,function(){console.log("go to entry point: "+X.startPage);Y.loadContentPage(X.startPage);L()})}return undefined}var P=[];var N=rlVehicleManual.getManualIdForChild(T);var O=rlVehicleManual.getControllerForId(N);var R=M(O);var Q=S(O);if(R){P.push(R)}if(Q){P.push(Q)}return P}return{__init__:function(){},__start__:function(){},create:function(L){K=L.i18n;C(L)},getI18n:function(){return K},getControllerForId:function(L){return F(L)},getControllers:function(){return A},getManualContainerForChild:function(L){return L.parents(".vehiclemanualcontainer")},getManualIdForChild:function(L){return rlVehicleManual.getManualContainerForChild(L).attr("id")},getBreadcrumbEntries:function(L){return J(L)}}}();var rlVehicleManualContent=function(){function B(H,D){var C={};C.typeName="rlVehicleManualContent";var F;function G(){H.registerContentPageLoadedListener({success:E,error:function(){D.empty()}})}function E(){var J=H.getCurrentContentPage();if(J){if(!F){F=rlVehicleManualRenderer.create(H)}var I=F.render(J);D.empty();D.append(I)}}G();E();return C}function A(){jq("div.vehiclemanualcontent").each(function(D,E){var C=rlVehicleManual.getManualIdForChild(jq(E));var F=rlVehicleManual.getControllerForId(C);if(F){B(F,jq(E))}})}return{__init__:function(){A()},__start__:function(){}}}();var rlVehicleManualDisclaimer=function(){var B={};var H="baoManualDisclaimer";var E="div.vehiclemanualdisclaimer";function F(M,K,I){var Q={};Q.typeName="rlVehicleManualDisclaimer";var T=false;Q.isAccepted=function(){return T};function S(){var U=rlVehicleManual.getManualIdForChild(M);rlVehicleManual.getControllerForId(U).registerDisclaimerLoadedListener({success:function(V){N(V)},error:function(){M.empty()}})}function N(U){var Y=rlVehicleManual.getI18n();if(isDefined(U)){M.empty();var V=jq("<h1 />").addClass("disclaimerHeadline").html(Y.disclaimerHeadline);V.appendTo(M);var b=jq("<div />").addClass("disclaimerTextContainer").html(U);b.find("p").addClass("copyText");b.appendTo(M);var a=jq("<div />").addClass("disclaimerSetting");a.appendTo(M);var X=jq("<input />").attr("type","checkbox");X.appendTo(a);var W=jq("<label />").addClass("disclaimerConsentText copyText").html(Y.disclaimerCookieCheckboxText);W.appendTo(a);W.click(function(){X.trigger("click")});var Z=jq("<a />").addClass("buttonBlue buttonComp disclaimerButton").html(Y.disclaimerAcceptButtonLabel);Z.appendTo(M);Z.click(function(d){O(jq(d));J()})}}function P(){var U=[];jq(E).each(function(W,X){var V=rlVehicleManual.getManualIdForChild(jq(X));var Y=rlVehicleManual.getControllerForId(V);if(Y){U.push(Y)}});return U}function L(U){var V;try{var W=jq(U[0].currentTarget).parent().find(".disclaimerSetting :input");V=W.is(":checked")}catch(X){console.log("VehicleManualDisclaimer.setConsent - Error finding the Checkbox in the Disclaimer-View when the Submit Button was hit. Perhaps a change in the html-layout?")}return V==undefined?false:V}function O(V){var U=L(V);if(I){if(U&&I.cookieValue.indexOf(K)<0){I.cookieValue+=","+K}}else{I={cookieKey:H,cookieValue:U?K:null}}rlCookieController.setCookie(I)}function R(){var U=P();jq.each(U,function(W,V){V.setDisclaimerAccepted()})}function J(){T=true;R()}S();return Q}function D(K,I){var J=B[I]||[];J.push(F(K,I,C()));B[I]=J}function G(I){var M=false;var N=B[I];if(N){for(var L=0,K=N.length;L<K;L++){if(N[L]&&N[L].isAccepted()){M=true;break}}}if(!M){var J=C();if(J&&isDefined(J.cookieValue)&&J.cookieValue.indexOf(I)!=-1){M=true}}return M}function C(){return rlCookieController.getCookie({cookieKey:H})}function A(){return E}return{__init__:function(){},initInstance:D,isDisclaimerAccepted:G,getDisclaimerDiv:A,__start__:function(){}}}();var rlVehicleManualEntryPoints=function(){function B(G,E){var S={};S.typeName="rlVehicleManualEntryPoints";function U(){G.registerEntryPointsLoadedListener({success:C,error:function(){E.empty()}});G.registerContentPageLoadedListener({success:L})}function F(){var X=[];var W=rlVehicleManual.getControllers();jq.each(W,function(Z,Y){X.push(Y.getInitialEntryPointType())});return X}function I(X){var a=[];var Z=F();for(var Y=0;Y<X.length;Y++){var W=X[Y].type;if(jq.inArray(W,Z)===-1||G.getInitialEntryPointType()===W){a.push(X[Y])}}return a}function C(){var W=G.getCurrentEntryPoints();if(!W||G.getInitialEntryPointType()!=="TOC"){return }V(W,{twoLines:false});V(W,{twoLines:true});W=I(W);E.empty();N(E,W)||R(E,W)||M(E,W)||Q(E,W);L()}function N(X,W){if(D(W,0,W.length)<X.width()){O(X,W,0,W.length);return true}return false}function R(X,W){for(var Y=0;Y<W.length;Y++){W[Y].twoLines=true;if(D(W,0,W.length)<X.width()){O(X,W,0,W.length);return true}}return false}function M(X,W){var Y=D(W,0,W.length);if(Y>X.width()&&Y<(2*X.width())){var a=0;for(var Z=0;Z<W.length;Z++){W[Z].twoLines=false}for(var Z=0;Z<W.length;Z++){if(a+W[Z].normalWidth>X.width()){if(Z+1===W.length){Z--}O(X,W,0,Z);O(X,W,Z,W.length-Z);return true}a+=W[Z].normalWidth}}return false}function Q(X,W){var a=0,Z=0;for(var Y=0;Y<W.length;Y++){W[Y].twoLines=true;if(Z+W[Y].twoLinesWidth>X.width()){O(X,W,a,Y-a);a=Y;Z=0}Z+=W[Y].normalWidth}}function O(b,X,a,Z){var W=J();for(var Y=0;Y<Z;Y++){W.append(T(X[a+Y],X[a+Y].twoLines))}b.append(W)}function D(W,a,X){var Z=0;for(var Y=a;Y<X;Y++){if(W[Y].twoLines){Z+=W[Y].twoLinesWidth}else{Z+=W[Y].normalWidth}}return Z}function J(){return jq("<ul>").addClass("entryPointList").addClass("clearfix")}function V(X,Z){var b=jq("<div/>").attr("id","entryPointListOffScreenRendering").css({left:"-9999px",position:"absolute"}).addClass("vehicleManual entryPointList");var W=J();jq("body").append(b);b.append(W);for(var a=0;a<X.length;a++){X[a].index=a;var Y=T(X[a],Z&&Z.twoLines);W.append(Y);if(Z&&Z.twoLines){X[a].twoLinesWidth=Y.width()}else{X[a].normalWidth=Y.width()}}b.remove()}function T(d,a){var Y=jq('<li><div class="entryPointLinkContainer"><a href="javascript:void(0);" class="link13px"></a></div></li>');Y.attr("data-entrypointtype",d.type);var b=Y.find("a");b.attr("data-epindex",d.index);var X=P(d.title);if(a&&X>0&&X<d.title.length-1){b.parent().addClass("twoLines");var Z=d.title.substr(0,X);var W=d.title.substr(X+1);b.append(jq("<span>").text(Z)).append(jq("<br>")).append(jq("<span>").text(W))}else{b.text(d.title)}b.click(H);return Y}function P(Y){if(Y.indexOf(" ")!==-1){var X=Math.floor(Y.length/2);for(var W=0;W<X;W++){if(Y[X+W]===" "){return X+W}else{if(Y[X-W]===" "){return X-W}}}if(Y[Y.length-1]===" "){return Y.length-1}}return -1}function H(){var X=jq(this).attr("data-epindex");var W=G.getCurrentEntryPoints()[X];if(W.type==="TOC"){G.loadToc()}else{if(W.type==="INDEX"){G.loadIndex()}else{if(W.startPage){G.loadContentPage(W.startPage)}else{console.error("Cannot load entry point");rlErrorService.handleError(rlErrorService.ACTOR_SYSTEM)}}}}function L(){var X=G.getCurrentContentPage();if(X){E.find("li.active").removeClass("active");E.find("a.link13pxActive").removeClass("link13pxActive");var W=E.find("li[data-entrypointtype="+X.entryPointType+"]");W.addClass("active");W.find("a").addClass("link13pxActive")}}function K(){rlNavigationTab.addTabChangedListener(function(){if(rlNavigationTab.isDomInActiveTabContent(E)&&E.find("li").length>0){rlNavigationTab.setActiveTabHasSubMenu(E)}})}U();C();L();K();return S}function A(){jq("div.vehiclemanualentrypoints").each(function(D,E){var C=rlVehicleManual.getManualIdForChild(jq(E));var F=rlVehicleManual.getControllerForId(C);if(F){B(F,jq(E))}})}return{__init__:function(){A()},__start__:function(){}}}();var rlVehicleManualSearch=function(){function B(H,F,E){var C={};C.typeName="rlVehicleManualSearch";function G(){H.registerEntryPointsLoadedListener({success:D,error:function(){F.empty()}})}function D(){function K(N){H.searchVehicleManual(N)}F.empty();var M=jq("<div/>").addClass("searchInputContainer");var I=jq("<input/>").addClass("searchInput").attr("type","text").attr("placeholder",E.searchBoxDefaultContent);I.keypress(function(N){if(N.keyCode===13){N.preventDefault();jq(this).blur();K(jq(this).val())}});M.append(I);var L=jq("<a/>").addClass("searchLink");L.click(function(){var N=jq(this).parents(".searchInputContainer").find(".searchInput").val();if(N!=""){K(N)}});var J=jq("<span/>").addClass("searchIcon spriteIconLoupe baseIconSprite");L.append(J);M.append(L);F.append(M)}G();D();return C}function A(){jq("div.vehicleManualSearchBox").each(function(D,E){var C=rlVehicleManual.getManualIdForChild(jq(E));var F=rlVehicleManual.getControllerForId(C);if(F){B(F,jq(E),rlVehicleManual.getI18n())}})}return{__init__:function(){},__start__:function(){}}}();var rlVehicleManualService=function(){var I="rlVehicleManualService";var A=100;var K="/usermgmt-baonline/services/_{mandatorContext}/bao/manual?vin=_{vin}&locale=_{locale}";var L="/usermgmt-baonline/services/_{mandatorContext}/bao/toc?vin=_{vin}&locale=_{locale}&entryPointType=_{entryPointType}";var N="/usermgmt-baonline/services/_{mandatorContext}/bao/page?vin=_{vin}&locale=_{locale}&id=_{id}";var H="/usermgmt-baonline/services/IB/bao/page?vin=9999F31&locale=de_DE&id=xml/1024209_35.xml";var M="/usermgmt-baonline/services/_{mandatorContext}/bao/search?vin=_{vin}&locale=_{locale}&keyword=_{keyword}&maxCount=_{maxCount}";var B="/usermgmt-baonline/services/_{mandatorContext}/bao/index?vin=_{vin}&locale=_{locale}";function G(P,O){return rlPage.getNextCoreUrl()+P.replace(/_{vin}/g,O.vin).replace(/_{locale}/g,(typeof O.locale!="undefined"?O.locale:rlMandator.getLocale())).replace(/_{id}/g,O.id).replace(/_{keyword}/g,O.keyword).replace(/_{maxCount}/g,O.maxCount).replace(/_{entryPointType}/g,O.entryPointType)}function C(O){rlCoreServices.coreRequest({url:G(K,O),success:function(P){O.success(P.data.manual)},error:O.error,action:"loadVehicleManual"})}function D(O){rlCoreServices.coreRequest({url:G(L,O),success:function(P){O.success(P.data)},error:O.error,action:"loadVehicleManualTOC"})}function J(O){var P=G(N,O);if(jq.cookie("vehicleManualTestPage")==="on"){P=G(H,O)}rlCoreServices.coreRequest({url:P,success:function(Q){O.success(Q.data)},error:O.error,action:"loadVehicleManualPage"})}function F(O){O.maxCount=O.maxCount||A;rlCoreServices.coreRequest({url:G(M,O),success:function(P){O.success(P.data)},error:O.error,action:"searchVehicleManual"})}function E(O){rlCoreServices.coreRequest({url:G(B,O),success:function(P){O.success(P.data)},error:O.error,action:"loadVehicleManualIndex"})}return{__init__:function(){if(rlPage.isUseMock()){rlVehicleManualService=rlVehicleManualServiceMock}},loadManual:function(O){C(O)},loadToc:function(O){D(O)},loadContentPage:function(O){J(O)},searchManual:function(O){F(O)},loadIndex:function(O){E(O)}}}();var rlVehicleManualServiceMock=function(){var C="rlVehicleManualServiceMock";function G(H){D(function(){H.success({disclaimer:"<p>Everything here is potentially wrong.</p><p>Please take this stuff with a grain of salt.</p>",entryPoints:[{id:"ecls_bio_becls_a2_a19127425.SL17551190.61",type:"TOC",title:"Table of contents"},{id:"samplePage",type:"SAMPLES",title:"Content showcase",startPage:"xml/samplePage.fml"},{id:"animations",type:"ANIMATIONS",title:"Animations",startPage:"xml/animations.fml"},{id:"quicklinks",type:"QUICK_LINKS",title:"Quick links",startPage:"xml/quicklinks.fml"},{id:"index",type:"INDEX",title:"Index",startPage:"xml/glossary.fml"}],graphicPackageMappings:[{prefix:"../common_img",baseUrl:"https://bao.bmwgroup.net/bao/img/23/common_img/60adfffe-5470-4e37-afd2-cdaf48be6607"}]})})}function A(H){D(function(){var N={title:"Contents",type:"tocPage",entryPointType:"TOC",chapters:[]};function K(O,P){N.chapters.push({id:"chapter"+O,title:P,thumbnail:{width:180,height:100,url:"../common_img/15482118.jpg"},subChapters:[{id:"chapter"+O+"_1",title:"iDrive Operating Options",target:"xml/deadlink.xml"},{id:"chapter"+O+"_2",title:"Voice control system",target:"xml/deadlink.xml"},{id:"chapter"+O+"_3",title:"Integrated Owner's handbook in the vehicle",target:"xml/deadlink.xml"}]})}function I(O,P){N.chapters.push({id:"chapter"+O,title:P,thumbnail:{width:230,height:120,url:"../common_img/15482118.jpg"},subChapters:[{id:"chapter"+O+"_1",title:"Notes",target:"xml/deadlink.xml"}]})}function L(O,P){N.chapters.push({id:"chapter"+O,title:P,thumbnail:{width:230,height:120,url:"../common_img/15482147.jpg"},subChapters:[{id:"chapter"+O+"_1",title:"Opening and closing",target:"xml/deadlink.xml"},{id:"chapter"+O+"_2",title:"Adjusting",target:"xml/deadlink.xml"},{id:"chapter"+O+"_3",title:"Carrying children in safety",target:"xml/deadlink.xml"},{id:"chapter"+O+"_4",title:"Driving",target:"xml/deadlink.xml"},{id:"chapter"+O+"_5",title:"Displays",target:"xml/deadlink.xml"},{id:"chapter"+O+"_6",title:"Lights",target:"xml/deadlink.xml"},{id:"chapter"+O+"_7",title:"Safety",target:"xml/deadlink.xml"},{id:"chapter"+O+"_8",title:"Driving stability",target:"xml/deadlink.xml"},{id:"chapter"+O+"_9",title:"Driving comfort",target:"xml/deadlink.xml"},{id:"chapter"+O+"_10",title:"Air conditioning",target:"xml/deadlink.xml"},{id:"chapter"+O+"_11",title:"Interior equipment",target:"xml/deadlink.xml"},{id:"chapter"+O+"_12",title:"Storage compartments",target:"xml/deadlink.xml"}]})}function J(O,P){N.chapters.push({id:"chapter"+O,title:P,thumbnail:{width:230,height:120,url:"../common_img/15482147.jpg"},subChapters:[{id:"chapter"+O+"_1",title:"Opening and closing",target:"xml/deadlink.xml"},{id:"chapter"+O+"_2",title:"Adjusting",target:"xml/deadlink.xml"},{id:"chapter"+O+"_3",title:"Carrying children in safety",target:"xml/deadlink.xml"},{id:"chapter"+O+"_4",title:"Driving",target:"xml/deadlink.xml"},{id:"chapter"+O+"_5",title:"Displays",target:"xml/deadlink.xml"},{id:"chapter"+O+"_6",title:"Lights",target:"xml/deadlink.xml"},{id:"chapter"+O+"_7",title:"Safety",target:"xml/deadlink.xml"},{id:"chapter"+O+"_8",title:"Driving stability",target:"xml/deadlink.xml"},{id:"chapter"+O+"_9",title:"Driving comfort",target:"xml/deadlink.xml"},{id:"chapter"+O+"_10",title:"Air conditioning",target:"xml/deadlink.xml"},{id:"chapter"+O+"_11",title:"Interior equipment",target:"xml/deadlink.xml"},{id:"chapter"+O+"_12",title:"Storage compartments",target:"xml/deadlink.xml"},{id:"chapter"+O+"_13",title:"Driving stability",target:"xml/deadlink.xml"},{id:"chapter"+O+"_14",title:"Voice over",target:"xml/deadlink.xml"}]})}function M(O,P){N.chapters.push({id:"chapter"+O,title:P,thumbnail:{width:230,height:120,url:"../common_img/15482147.jpg"},subChapters:[{id:"chapter"+O+"_1",title:"Sub chapter 1",target:"xml/deadlink.xml"},{id:"chapter"+O+"_2",title:"Sub chapter 2 mit einem Umbruch zum Test",target:"xml/deadlink.xml"},{id:"chapter"+O+"_3",title:"Sub chapter 3",target:"xml/deadlink.xml"},{id:"chapter"+O+"_4",title:"Sub chapter 4",target:"xml/deadlink.xml"},{id:"chapter"+O+"_5",title:"Sub chapter 5",target:"xml/deadlink.xml"},{id:"chapter"+O+"_6",title:"Sub chapter 6",target:"xml/deadlink.xml"},{id:"chapter"+O+"_7",title:"Sub chapter 7",target:"xml/deadlink.xml"},{id:"chapter"+O+"_8",title:"Sub chapter 8",target:"xml/deadlink.xml"},{id:"chapter"+O+"_9",title:"Sub chapter 9",target:"xml/deadlink.xml"},{id:"chapter"+O+"_10",title:"Sub chapter 10",target:"xml/deadlink.xml"}]})}I(1,"Usage instructions and general");M(2,"Attack of the Clones");L(3,"Rise of the Sith");K(4,"A New Hope");J(5,"The Empire Strikes Back");M(6,"Return of the Jedi");H.success(N)})}function B(H){D(function(){var I={id:"ecls_bio_becls_a2_a18154679.N11E28__BA__F01__0309__F07__0809__RR04__1209__SOP__main.xml.17550",type:"glossaryPage",entryPointType:"GLOSSARY_INDEX",title:"Index",groupKeys:["0-9","A","B","C","S","Z"],groupEntries:[{key:"0-9",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8494",title:"50 Wrter, Zielsuche"},{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8495",title:"80 Wrter, Zielsuche"}]},{key:"A",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8499",title:"Abblendautomatik, siehe Fernlichassistent"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Abblendender Auenspiegel"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Advanced Safety Electronic"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Automatic Stability Control"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Automatic Start Stop function"}]},{key:"B",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8499",title:"Batterie"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Befestigungstechnik"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremsanlage"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremsbacken"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremsbelag"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremsenschmierstoff"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremsflssigkeit"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremskraftregler"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Bremskraftverstrker"}]},{key:"C",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8499",title:"Common Rail System"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"CRS2"}]},{key:"S",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8499",title:"Saugrohr-Drucksensor"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Scheinwerfer"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Scheinwerferlampe"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Schellen"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Scherensystem"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Schlauchgelenk"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Schlieanlage"}]},{key:"Z",values:[{target:"xml/405890_58.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8499",title:"Zahnriemen"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Zndkerze"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Zndleitungen (Zndkabel)"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Zndmodule"},{target:"xml/405890_47.xml#ecls_bio_becls_a2_a9813194.jap__ziel__ueber__woerter.8491",title:"Zndspule"}]}]};H.success(I)})}function F(K){var J={contentType:"SEARCHRESULTS",searchResult:{keyword:"Sections",results:[]}};for(var L=0;L<50;L++){var N=Math.floor(Math.random()*10)+1;var O=[];var M="Top level title ";for(var I=0;I<N;I++){M+="x"}O.push({title:M});for(var H=0;H<N;H++){O.push({title:"Nested section "+(H+1),target:"ecls_bio_becls_a2_a19119208.SL52005.9751."+H})}J.searchResult.results.push({title:"Vehicle manual test page "+L,target:"ecls_bio_becls_a2_a19119208.SL52005.9751",breadcrumb:O})}K.success(J)}function E(K){var I=0;function L(){return ++I}var H={};H["xml/samplePage.fml"]={id:"ecls_bio_becls_a2_a19119208.SL52005.9751",title:"Vehicle manual test page",type:"contentPage",entryPointType:"SAMPLES",content:[{type:"section",id:"section"+L(),title:"Basic content",content:[{type:"section",id:"section"+L(),title:"Paragraphs",content:[{type:"paragraph",text:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]},{type:"section",id:"section"+L(),title:"Paragraphs inline elements",content:[{type:"paragraph",text:"Content can also contain <link target='xml/animations.fml' display='pageref'>inline links</link> that reference other content."},{type:"paragraph",text:"We can also add inline images. <graphic-inline src='../common_img/15492450.jpg' width='32' height='32'/> Huzzah!"}]},{type:"section",id:"section"+L(),title:"Nested sections",content:[{type:"section",id:"section"+L(),title:"A third-level section",content:[{type:"paragraph",text:"Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi."}]},{type:"section",id:"section"+L(),title:"Another third-level section",content:[{type:"paragraph",text:"At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]},{type:"section",id:"section"+L(),title:"Explanations",content:[{type:"paragraph",text:"Explanations are short copy text blocks that need to be emphasised."},{type:"explanation",content:[{type:"paragraph",text:"See how important this seems?"}]},{type:"paragraph",text:"Subtle, but nifty."}]},{type:"section",id:"section"+L(),title:"Links",content:[{type:"paragraph",text:"A link is a block-level reference to an internal or external resource."},{type:"link",text:"This is an internal link",target:"somePage.fml"},{type:"link",text:"This is an external link",target:"http://www.bmw.de"}]}]},{type:"section",id:"section42",title:"Enumerations",content:[{type:"section",id:"section"+L(),title:"Lists",content:[{type:"paragraph",text:"A list is an unsorted collection of bullet points."},{type:"list",content:[{type:"listItem",content:[{type:"paragraph",text:"Simple bullet point"}]},{type:"listItem",content:[{type:"paragraph",text:"Bullet point with two lines"},{type:"paragraph",text:"Here's the second line."}]},{type:"listItem",content:[{type:"paragraph",text:"Bullet point with accordion"},{type:"accordion",overview:{type:"paragraph",text:"Accordion in list"},content:[{type:"paragraph",text:"Hey, look: first description - should be ignored by front end!"},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]},{type:"listItem",content:[{type:"paragraph",text:"Lists can contain other lists."},{type:"list",content:[{type:"listItem",content:[{type:"paragraph",text:"Nested list 1"}]},{type:"listItem",content:[{type:"paragraph",text:"Nested list 2"}]}]},{type:"paragraph",text:"Nested lists can be followed by text."}]},{type:"listItem",content:[{type:"paragraph",text:"Let's add a link, just because we can:"},{type:"link",text:"Hey look, a link!",target:"somePage.fml"},{type:"paragraph",text:"Awesome, huh?"}]},{type:"listItem",content:[{type:"paragraph",text:"Another simple bullet point to finish off"}]}]},{type:"paragraph",text:"Lists: awesome topped with awesome sauce."}]},{type:"section",id:"section"+L(),title:"Actions",content:[{type:"paragraph",text:"An action list on the other hand is an enumerated list:"},{type:"action",content:[{type:"actionItem",content:[{type:"paragraph",text:"Simple bullet point"}]},{type:"actionItem",content:[{type:"paragraph",text:"Bullet point with two lines"},{type:"illustration",images:[{width:145,height:126,url:"../common_img/15482147.jpg"}]},{type:"illustration",images:[{width:145,height:126,url:"../common_img/15482147.jpg"}]},{type:"paragraph",text:"Here's the second line."}]},{type:"actionItem",content:[{type:"paragraph",text:"Actions can contain lists."},{type:"list",content:[{type:"listItem",content:[{type:"paragraph",text:"Nested list 1"}]},{type:"listItem",content:[{type:"paragraph",text:"Nested list 2"}]}]},{type:"paragraph",text:"Or other actions."},{type:"action",content:[{type:"actionItem",content:[{type:"paragraph",text:"Nested action 1"}]},{type:"actionItem",content:[{type:"paragraph",text:"Nested action 2"}]}]},{type:"paragraph",text:"Nested lists can be followed by text."}]},{type:"actionItem",content:[{type:"paragraph",text:"Let's add a link, just because we can:"},{type:"link",text:"Hey look, a link!",target:"somePage.fml"},{type:"paragraph",text:"Awesome, huh?"}]},{type:"actionItem",content:[{type:"paragraph",text:"Accordion as an item"},{type:"accordion",overview:{type:"paragraph",text:"Accordion in list"},content:[{type:"paragraph",text:"Hey, look: first description - should be ignored by front end!"},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]},{type:"actionItem",content:[{type:"paragraph",text:"Another simple bullet point to finish off"}]}]},{type:"paragraph",text:"Actions: the best thing since sliced bread."}]}]},{type:"section",id:"section"+L(),title:"Graphics",content:[{type:"section",id:"section"+L(),title:"Illustrations",content:[{type:"section",id:"section"+L(),title:"Without descriptions",content:[{type:"paragraph",text:"A simple image that is displayed as a block element."},{type:"illustration",images:[{width:145,height:126,url:"../common_img/15482147.jpg"}]}]},{type:"section",id:"section"+L(),title:"With descriptions",content:[{type:"paragraph",text:"Image less than 170 pixels wide: description goes next to the image."},{type:"illustration",images:[{width:40,height:40,url:"../common_img/15482147.jpg"}],descriptions:[{type:"paragraph",text:"Looky looky: the description is next to the image! Looky looky: the description is next to the image! Looky looky: the description is next to the image! Looky looky: the description is next to the image! Looky looky: the description is next to the image! Looky looky: the description is next to the image!"},{type:"paragraph",text:"Second line of description!"}]},{type:"paragraph",text:"Image more than 170 pixels wide: description goes under the image."},{type:"illustration",images:[{width:455,height:260,url:"../common_img/15482147.jpg"}],descriptions:[{type:"paragraph",text:"Hey, look: a description!"},{type:"paragraph",text:"Yay, descriptions for everyone!"}]}]},{type:"section",id:"section"+L(),title:"Multiple images",content:[{type:"paragraph",text:"It's possible to place two images next to each other."},{type:"illustration",images:[{width:240,height:240,url:"../common_img/15482147.jpg"},{width:240,height:240,url:"../common_img/15482147.jpg"}]},{type:"paragraph",text:"When displaying multiple images, the descriptions always go under the images."},{type:"illustration",images:[{width:40,height:40,url:"../common_img/15482147.jpg"},{width:40,height:40,url:"../common_img/15482147.jpg"}],descriptions:[{type:"paragraph",text:"Descriptions always go under the images if we have more than one. Even if the images are <170 pixels wide."}]}]}]},{type:"section",id:"section"+L(),title:"Images with accordion",content:[{type:"paragraph",text:"Image less than 170 pixels wide: accordion goes next to the image."},{type:"illustration",images:[{width:70,height:70,url:"../common_img/15482147.jpg"}],descriptions:[{type:"accordion",overview:{type:"paragraph",text:"Image with accordion"},content:[{type:"paragraph",text:"Hey, look: first description - should be ignored by front end!"},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]},{type:"paragraph",text:"Image more than 170 pixels wide: acordion goes under the image."},{type:"illustration",images:[{width:455,height:260,url:"../common_img/15482147.jpg"}],descriptions:[{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."},{type:"accordion",overview:{type:"paragraph",text:"Image with accordion"},content:[{type:"paragraph",text:"Hey, look: first description - should be ignored by front end!"},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]}]},{type:"section",id:"section"+L(),title:"Hotspot images",content:[{type:"paragraph",text:"An image can feature hotspots, each of which can be linked to other content."},{type:"explanation",content:[{type:"paragraph",text:"[Interactive image]"}]},{type:"hotspots",image:{width:708,height:344,url:"https://bao.bmwgroup.com/bao/img/41/common_img/da40adef-dcbd-4bdb-8cbe-9ddf9929f95a/15387350.jpg"},hotspots:[{location:{x:-30,y:-30},label:"Nullpunkt Nullpunkt Nullpunkt"},{location:{x:677,y:-30},label:"Hol mich rein rechts oben",target:undefined},{location:{x:70,y:70},label:"iDrive Controller",target:"xml/507616_59.xml#someAnchor"},{location:{x:-30,y:313},label:"Hol mich rein links unten",target:undefined},{location:{x:-30,y:141},label:"Hol mich rein links mitte",target:undefined},{location:{x:677,y:141},label:"Hol mich rein rechts mitte",target:undefined},{location:{x:323,y:-30},label:"Hol mich rein oben mitte",target:undefined},{location:{x:323,y:313},label:"Hol mich rein unten mitte",target:undefined},{location:{x:170,y:170},label:"Klimagedns Klimagedns Klimagedns Klimagedns Klimagedns Klimagedns Klimagedns Klimagedns",target:"xml/507616_59.xml#someAnchor"},{location:{x:677,y:313},label:"Hol mich rein rechts unten",target:undefined},{location:{x:560,y:313},label:"Hol mich rein links unten",target:undefined}]}]},{type:"section",id:"section"+L(),title:"Slideshows",content:[{type:"paragraph",text:"Allows the user to step through a series of images."},{type:"explanation",content:[{type:"paragraph",text:"[Slideshow images]"}]},{type:"slideshow",width:352,height:212,content:[{type:"slideshowItem",label:"Abdeckung entfernen.",image:"../common_img/15482147.jpg",content:[{type:"accordion",overview:{type:"paragraph",text:"Sample content for first paragraph"},content:[{type:"paragraph",text:"Hey, look: first description - should be ignored by front end!"},{type:"paragraph",text:"Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."}]}]},{type:"slideshowItem",label:"Kopfsttze nach oben bringen oder entnehmen.",image:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcT97pLKYXX8nRnLwgo1WkeAulxhjunc8nphK-6SlH_GvR8DgrhH"},{type:"slideshowItem",label:"ISETTA.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSK5qthBDM2fd7o3zTmauVws_zvLCZr3JH2BSkkBuPEQhQE0va9KQ",content:[{type:"paragraph",text:"Sample content for ISETTA."}]},{type:"slideshowItem",label:"Number 4.",image:"http://www.bmw.de/de/neufahrzeuge/5er/limousine/2013/bilder-videos/_jcr_content/wallpaper/items/wallpaper_adcd/image.zoom.0.jpg",content:[{type:"paragraph",text:"Sample content for Number 4."}]}]}]}]},{type:"section",id:"section"+L(),title:"Animations",content:[{type:"paragraph",text:"Animations can be embedded in a content page:"},{type:"animation",width:624,height:300,preview:"../common_img/15492450.jpg",title:"Sample animation",description:"This is a happy little block of text describing this animation.",source:"https://www.bmw.tv/web/player/index.html?type=embed&amp;autoPlay=false&amp;limit=0&amp;xml=%2Fservices%2Fplayer%2FshowXMLPlaylist.do&amp;videoFormats=MP4_H264_AAC_640X360&amp;id=27851&amp;spaceID=36"},{type:"link",text:"Animation index page is rendered differently",target:"xml/animations.fml"}]},{type:"section",id:"section"+L(),title:"InfoBubbles",content:[{type:"infobubble",content:[{type:"paragraph",text:"bubble 1: Lorem ipsum <link target='xml/bla.fml'>link</link> Bla blupp <graphic-inline src='abc.png'></graphic-inline> yadda yadda"}]},{type:"infobubble",overview:{type:"paragraph",text:"Tipp in Layer"},content:[{type:"paragraph",text:"bubble 2: Lorem ipsum <link target='xml/bla.fml'>link</link> Bla blupp <graphic-inline src='abc.png'></graphic-inline> yadda yadda"}]}]},{type:"section",id:"section"+L(),title:"Accordion",content:[{type:"accordion",overview:{type:"paragraph",text:"<graphic-inline src='http://www.bmw.de/favicon.ico' width='36' height='46'/>Test with overview repeated in content"},content:[{type:"paragraph",text:"Test with overview repeated in content"},{type:"paragraph",text:"Second paragraph, should be the only one to appear."}]},{type:"accordion",overview:{type:"paragraph",text:"<graphic-inline src='http://www.bmw.de/favicon.ico' width='36' height='46'/>Test with overview NOT repeated in content"},content:[{type:"paragraph",text:"Paragraph one, should appear"},{type:"paragraph",text:"Paragraph two, should appear"}]},{type:"accordion",overview:{type:"paragraph",text:"<graphic-inline src='http://www.bmw.de/favicon.ico' width='36' height='46'/> We can also add inline images.  Huzzah!"},content:[{type:"illustration",images:[{width:455,height:260,url:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR8H_MaI-iNK9Og7lzKswmqDuTo2nQFcofRzcbcVEWIoj3D9djf"}],descriptions:[{type:"paragraph",text:"Hey, look: a description!"},{type:"paragraph",text:"Yay, descriptions for everyone!"}]}]},{type:"accordion",overview:{type:"paragraph",text:"<graphic-inline src='http://www.bmw.de/favicon.ico' width='16' height='16'/> We can also add inline images. Huzzah!"},content:[{type:"illustration",images:[{width:455,height:260,url:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR8H_MaI-iNK9Og7lzKswmqDuTo2nQFcofRzcbcVEWIoj3D9djf"}],descriptions:[{type:"paragraph",text:"Hey, look: a description!"},{type:"paragraph",text:"Yay, descriptions for everyone!"}]}]},{type:"accordion",content:[{type:"illustration",images:[{width:455,height:260,url:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR8H_MaI-iNK9Og7lzKswmqDuTo2nQFcofRzcbcVEWIoj3D9djf"}],descriptions:[{type:"paragraph",text:"Hey, look: first description!"},{type:"paragraph",text:"Yay, descriptions for everyone!"}]},{type:"paragraph",text:"Hey, look: a description - this line should not be displayed by front end as it is the first paragraph in an accordion content!"}]}]},{type:"section",id:"section"+L(),title:"Tables",content:[{type:"section",id:"section"+L(),title:"Table - head only - frame none - 33%-33%-33%",content:[{type:"table",pagewide:true,colwidthenabled:true,borderenabled:true,frame:"none",colspec:[{width:"33.33%"},{width:"33.33%"},{width:"33.33%"}],head:{rows:[{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: bottom, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 2, col 1, align: left/bottom, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:2,rowspan:2,border:"both",content:[{type:"paragraph",text:"row 2+3, col 2+3, align: center/middle, border: both, span: 2/2"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: bottom, span: 1/1"}]}]}]}}]},{type:"section",id:"section"+123456+"2",title:"Table - head only - frame all - 50%-30%-20%",content:[{type:"table",pagewide:true,colwidthenabled:true,borderenabled:true,frame:"all",colspec:[{width:"50%"},{width:"30%"},{width:"20%"}],head:{rows:[{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: bottom, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 2, col 1, align: left/bottom, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:2,rowspan:2,border:"both",content:[{type:"paragraph",text:"row 2+3, col 2+3, align: center/middle, border: both, span: 2/2"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: bottom, span: 1/1"}]}]}]}}]},{type:"section",id:"section"+123456+"3",title:"Table - body only - frame none - 33%-33%-33%",content:[{type:"table",pagewide:true,colwidthenabled:true,borderenabled:true,frame:"none",colspec:[{width:"33.33%"},{width:"33.33%"},{width:"33.33%"}],body:{rows:[{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: bottom, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 2, col 1, align: left/bottom, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:2,rowspan:2,border:"both",content:[{type:"paragraph",text:"row 2+3, col 2+3, align: center/middle, border: both, span: 2/2"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: bottom, span: 1/1"}]}]}]}}]},{type:"section",id:"section"+123456+"4",title:"Table - body only - frame none - 50%-30%-20%",content:[{type:"table",pagewide:true,colwidthenabled:true,borderenabled:true,frame:"all",colspec:[{width:"50%"},{width:"30%"},{width:"20%"}],body:{rows:[{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: bottom, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 2, col 1, align: left/bottom, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:2,rowspan:2,border:"both",content:[{type:"paragraph",text:"row 2+3, col 2+3, align: center/middle, border: both, span: 2/2"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: bottom, span: 1/1"}]}]}]}}]},{type:"section",id:"section"+L(),title:"Table - head and body - frame all - 33%-33%-33%",content:[{type:"table",pagewide:true,colwidthenabled:true,borderenabled:true,frame:"all",colspec:[{width:"33.33%"},{width:"33.33%"},{width:"33.33%"}],head:{rows:[{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"both",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: both, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{align:"center",valign:"middle",colspan:1,rowspan:1,border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:2,rowspan:1,border:"both",content:[{type:"paragraph",text:"row 2, col 1+2, align: left/bottom, border: both, span: 1/2"}]},{align:"center",valign:"middle",colspan:1,rowspan:2,border:"bottom",content:[{type:"paragraph",text:"row 2, col 3, align: center/middle, border: bottom, span: 2/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:1,rowspan:1,border:"both",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: both, span: 1/1"}]},{align:"right",valign:"top",colspan:1,rowspan:1,border:"right",content:[{type:"paragraph",text:"row 3, col 2, align: right/top, border: right, span: 1/1"}]}]}]},body:{rows:[{cols:[{align:"left",valign:"bottom",border:"both",content:[{type:"paragraph",text:"row 1, col 1, align: left/bottom, border: both, span: 1/1"}]},{align:"right",valign:"top",border:"right",content:[{type:"paragraph",text:"row 1, col 2, align: right/top, border: right, span: 1/1"}]},{border:"bottom",content:[{type:"paragraph",text:"row 1, col 3, align: center/middle, border: bottom, span: 1/1"}]}]},{cols:[{align:"left",valign:"bottom",colspan:2,border:"both",content:[{type:"paragraph",text:"row 2, col 1+2, align: left/bottom, border: both, span: 1/2"}]},{rowspan:2,border:"both",content:[{type:"paragraph",text:"row 2, col 3, align: center/middle, border: both, span: 2/1"}]}]},{cols:[{align:"left",valign:"bottom",content:[{type:"paragraph",text:"row 3, col 1, align: left/bottom, border: none, span: 1/1"}]},{align:"right",valign:"top",border:"right",content:[{type:"paragraph",text:"row 3, col 2, align: right/top, border: right, span: 1/1"}]}]}]}}]}]},{type:"section",id:"section"+L(),title:"Coming soon",content:[{type:"paragraph",text:"TOC Chapters"}]}]};H["xml/animations.fml"]={id:"ecls_bio_becls_a2_a19119208.SL52005.9751",title:"Animation index",type:"contentPage",entryPointType:"ANIMATIONS",content:[]};function M(N,Q,P,O){H["xml/animations.fml"].content.push({type:"animation",width:624,height:300,preview:O,title:Q,description:P||"This is a happy little block of text describing this animation.",source:"https://www.bmw.tv/web/player/index.html?type=embed&amp;autoPlay=true&amp;limit=0&amp;xml=%2Fservices%2Fplayer%2FshowXMLPlaylist.do&amp;videoFormats=MP4_H264_AAC_640X360&amp;id=27851&amp;spaceID=36"})}M(0,"Don Vito Corleone","Vito Corleone is the head of the Corleone crime family  the most powerful Mafia family in New York City. He is depicted as an ambitious Sicilian immigrant who moves to the Lower East Side of Manhattan, and builds a Mafia empire, retaining (and strictly adhering to) his own personal code of honor.","../common_img/15492450.jpg");M(1,"Michael Corleone",undefined,"https://bao.bmwgroup.net/bao/img/23/common_img/60adfffe-5470-4e37-afd2-cdaf48be6607/15482118.jpg");M(2,"Sonny Corleone","Sonny is depicted in both the novel and the movies as the most impulsive and violent of Vito's children and the most involved in his father's criminal operations.","../common_img/15492463.jpg");M(3,"Clemenza",undefined,"https://bao.bmwgroup.net/bao/img/23/common_img/60adfffe-5470-4e37-afd2-cdaf48be6607/15482118.jpg");M(4,"Tom Hagen",undefined,"https://bao.bmwgroup.net/bao/img/23/common_img/60adfffe-5470-4e37-afd2-cdaf48be6607/15482118.jpg");M(5,"Don Emilio Barzini",undefined,"https://bao.bmwgroup.net/bao/img/23/common_img/60adfffe-5470-4e37-afd2-cdaf48be6607/15482118.jpg");M(6,"Sal Tessio","Tessio starts out with his friends Peter Clemenza and Vito Corleone as low-level hoodlums in New York City's Little Italy neighborhood. As Corleone rises to prominence in the Mafia underworld, he makes Tessio and Clemenza his main caporegimes.","../common_img/15492450.jpg");function J(){return{type:"teaser",image:{width:"230",height:"120",url:"../common_img/15482006.jpg"},title:"Teaser headline",description:{type:"paragraph",text:"General information and important instructions on using the Owner's Handbook."},link:{type:"paragraph",text:"<link target='xml/yaddayadda.fml' display='pageref'>Tell me more</link>"}}}H["xml/quicklinks.fml"]={id:"ecls_bio_becls_a2_a19119208.SL52005.9751",title:"Quick links",type:"contentPage",entryPointType:"QUICK_LINKS",content:[{type:"paragraph",text:"Hier finden Sie komprimierte Informationen zu wichtigen Grundfunktionen und ausgewhlten Systemen Ihres Fahrzeugs."},J(),J(),J(),J(),J(),J()]};H.notfound={type:"section",id:"section1",title:"Page not found",content:[{type:"paragraph",text:"The requested page could not be found."}]};D(function(){var N=H[K.id]||H.notfound;K.success(N)})}function D(H){window.setTimeout(H,Math.random()*500)}return{__init__:function(){},loadManual:function(H){G(H)},loadToc:function(H){A(H)},loadIndex:function(H){B(H)},loadContentPage:function(H){E(H)},searchManual:function(H){F(H)}}}();var rlVehicleMyBMWProfileDS=function(){function A(C){var B=CoreFormsBase.inheritanceFrom(rlVehicleProfileDS.createDS(C));B.summaryType="MyBMW";B.NCC_MOCK_URL="/apps/bmwnext/base/parComponents/fieldsetforms/formDataSource/vehicleMyBMWProfileDS/vehicleProfileDSMock.html";B.typeName="rlVehicleMyBMWProfileDS";B.getCarConfigId=function(){if(window.bmwConfigId){return window.bmwConfigId}else{return null}};B.successCallback=function(D,E){E({vehicleMyBMWProfile:{summaryHtml:D}})};return B}return{__init__:function(){},__start__:function(){},createDS:function(B){return new A(B)}}}();var rlVehicleRFXProfileDS=function(){function A(C){var B=CoreFormsBase.inheritanceFrom(rlVehicleProfileDS.createDS(C));B.typeName="rlVehicleRFXProfileDS";B.summaryType="RFX";B.NCC_MOCK_URL="/apps/bmwnext/base/parComponents/fieldsetforms/formDataSources/vehicleRFXProfileDS/vehicleProfileDSMock.html";B.getCarConfigId=function(){if(window.rfxContextParams&&window.rfxContextParams.configId){return window.rfxContextParams.configId}else{return null}};B.successCallback=function(D,E){E&&E({vehicleRFXProfile:{summaryHtml:D}})};return B}return{__init__:function(){},__start__:function(){},createDS:function(B){return new A(B)}}}();var rlVehicleStage=function(){var W;var d=false;var R=false;var Y=false;var f;var P=rlBrowser.getInternetExplorerVersion();function M(j){S(j.vin);Z(j);B(j);E(j);V();G();if(!Y){rlVehicleStage.initToolboxOuterContainerPosition();Y=true}}function Z(k){var j=k.modelText||"";jq("h1.vehicleStageHeadline").html((j).slice(0,-1)+"<span style='letter-spacing : -1px;'>"+(j).slice(-1)+"</span>");if(k.freeTextNote){jq("span.vehicleStageSubheadline").html(k.freeTextNote)}else{jq("span.vehicleStageSubheadline").html("")}if(k.primary==="true"){jq(".vehicleStageSetAsPrimaryLinkContainer").hide();jq(".vehicleStageBestVehicleStar").show()}else{if(jq(".vehicleStageSetAsPrimaryLinkContainer").is(":hidden")||jq(".vehicleStageSetAsPrimaryLinkContainer").css("opacity")==0){jq(".vehicleStageSetAsPrimaryLinkContainer").show()}jq(".vehicleStageBestVehicleStar").hide()}}function B(j){jq(".vehicleStageShowDetailsLink").unbind().click(function(){window.location.href="myvehicles.html#"+j.vehicleId});jq(".vehicleStageShowDetailsLink").show()}function O(j){jq(".vehicleStageContent").attr("data-stagebackgroundcolor",j);if(j=="Dark"){jq(".vehicleStageBestVehicleStar").removeClass("spriteLabelFavoritGrey12");jq(".vehicleStageBestVehicleStar").addClass("spriteLabelFavoritWhite12")}if(j=="Light"){jq(".vehicleStageBestVehicleStar").addClass("spriteLabelFavoritGrey12");jq(".vehicleStageBestVehicleStar").removeClass("spriteLabelFavoritWhite12")}jq(window).trigger("stagearea-teaser-changed")}function E(k){jq(".vehicleStageVinNoImageAvailable").hide();var j=(typeof k.images==="undefined")||(typeof k.images.veryBigUrl820==="undefined");if(j){jq("div.vehicleStagePreviewExterior").hide()}else{jq("div.vehicleStagePreviewExterior").show();jq("div.vehicleStagePreviewExterior").fadeOut(400,function(){var m="vehicleImage"+Math.floor(1000000*Math.random());jq("div.vehicleStagePreviewExterior").empty();var l=new Image();l.onload=function(){if(l.width!=820){O(W.myVehiclesWithoutCosyType);jq(".vehicleStageVinNoImageAvailable").show();jq(".vehicleStageVinNotSetText").hide();if(!jq(".vehicleStageContent").hasClass("myVehiclesWithoutCosyURL")){jq(".vehicleStageContentBackgroundImage").animate({opacity:0},400,function(){jq(".vehicleStageContentBackgroundImage").css("background","url("+W.myVehiclesWithoutCosyURL+")");jq(".vehicleStageContentBackgroundImage").animate({opacity:1},700,function(){if(P>0&&P<9){jq(this).css("filter","none")}});jq(".vehicleStageContent").addClass("myVehiclesWithoutCosyURL");jq(".vehicleStageContent").removeClass("myVehiclesWithCosyURL")})}}else{var o=W.myVehiclesWithCosyURL_ag,n=W.myVehiclesWithCosyType_ag;if(rlNccServices.isSubBrandBMWi(k)){if(W.myVehiclesWithCosyURL_i&&W.myVehiclesWithCosyType_i){o=W.myVehiclesWithCosyURL_i;n=W.myVehiclesWithCosyType_i}}O(n);jq(".vehicleStageContentBackgroundImage").css("background","url("+o+")");jq(".vehicleStagePreviewExterior").show();jq(".vehicleStagePreviewExterior").html('<img src="'+k.images.veryBigUrl820+'" style="display:none" id="'+m+'">');if(!jq(".vehicleStageContent").hasClass("myVehiclesWithCosyURL")){jq(".vehicleStageContentBackgroundImage").animate({opacity:0},400,function(){jq(".vehicleStageContentBackgroundImage").animate({opacity:1},700,function(){if(P>0&&P<9){jq(this).css("filter","none")}jq(".vehicleStageContent").removeClass("myVehiclesWithoutCosyURL");jq(".vehicleStageContent").addClass("myVehiclesWithCosyURL");jq("#"+m).fadeIn(700)})})}else{O(n);jq(".vehicleStageContent").removeClass("myVehiclesWithoutCosyURL");jq(".vehicleStageContent").addClass("myVehiclesWithCosyURL");jq("#"+m).fadeIn(700)}}};l.src=k.images.veryBigUrl820})}}function T(){jq(".vehicleStageSetAsPrimaryLink").click(g);jq(".vehicleStageRenameLink").click(I);jq(".vehicleStageDeleteLink").click(D);jq(".vehicleStageAddAccessoriesLink").click(U);jq(".vehicleStageAddVehicleLink").click(a);jq(".vehicleStageToolboxLink").click(F)}function N(){jq(".vehicleStagePreviousVehicleButton").click(function(){F();rlMyVehiclesController.getPreviousVehicle()});jq(".vehicleStageNextVehicleButton").click(function(){F();rlMyVehiclesController.getNextVehicle()})}function S(j){if(j){jq(".vehicleStageToolboxInnerContainer").addClass("vinEntered");jq(".vehicleStageToolboxVinContainer").html(j);jq(".vehicleStageVinNotSetText").hide();d=true}else{jq(".vehicleStageToolboxInnerContainer").removeClass("vinEntered");jq(".vehicleStageVinNotSetText").show();jq(".vehicleStageVinNoImageAvailable").hide();d=false}H()}function H(){A()}function Q(k){var j="vehicleStageToolboxMoreOptionsTextContainer/open";var l="vehicleStageToolboxMoreOptionsTextContainer/close";if(R){A();if(k===true){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageToolboxMoreOptionsTextContainer/closed","mybmwAction/myvehicles")}jq("div[id*='"+j+"']").attr("id",l)}else{J();if(k===true){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageToolboxMoreOptionsTextContainer/opened","mybmwAction/myvehicles")}jq("div[id*='"+l+"']").attr("id",j)}}function K(){jq(".vehicleStageToolboxMoreOptionsContainer").click(function(){Q(true)});jq(".vehicleStageToolboxAddButton").click(e)}function J(){jq(".vehicleStageToolboxVinSection").fadeIn(700);jq(".vehicleStageToolboxLinkNodeContainer").css("opacity","1");if(d){jq(".vehicleStageToolboxVinTitleContainer").addClass("vinElementVisible");jq(".vehicleStageToolboxVinContainer").addClass("vinElementVisible")}var l=jq(".vehicleStageToolboxLinksContainer").outerHeight(true)+jq(".vehicleStageToolboxVinSection").outerHeight(true)+35;var k=jq(".vehicleStage").height()-l;var j=3;jq(".vehicleStageToolboxOuterContainer").animate({top:k+"px",height:l+"px"},700,function(){if(d){jq(".vehicleStageToolboxVinTitleContainer").removeClass("vinElementVisible");jq(".vehicleStageToolboxVinContainer").removeClass("vinElementVisible")}R=true});jq(".vehicleStageToolboxInnerContainer").animate({top:j+"px"},700);jq(".vehicleStageToolboxLinkNodeContainer").animate({opacity:1},700,function(){if(P>0&&P<9){jq(this).css("filter","none")}jq(".vehicleStageToolboxMoreOptionsContainer").removeClass("spriteIconArrowToggleUpSmall");jq(".vehicleStageToolboxMoreOptionsContainer").addClass("spriteIconArrowToggleBottomSmall");jq(".vehicleStageToolboxInnerContainer").removeClass("containerSmall")})}function A(){window.setTimeout(function(){var l;var k;if(d){l=35;k=jq(".vehicleStage").height()-35;jq(".vehicleStageToolboxVinSection").fadeOut(400)}else{l=35+jq(".vehicleStageToolboxVinSection").outerHeight(true)+19;k=jq(".vehicleStage").height()-35-jq(".vehicleStageToolboxVinSection").outerHeight(true)-19;jq(".vehicleStageToolboxVinSection").fadeIn(700)}var j=6;jq(".vehicleStageToolboxLinkNodeContainer").animate({opacity:0},400,function(){jq(".vehicleStageToolboxMoreOptionsContainer").removeClass("spriteIconArrowToggleBottomSmall");jq(".vehicleStageToolboxMoreOptionsContainer").addClass("spriteIconArrowToggleUpSmall");jq(".vehicleStageToolboxInnerContainer").addClass("containerSmall")});jq(".vehicleStageToolboxOuterContainer").animate({top:k+"px",height:l+"px"},400,function(){jq(".vehicleStageToolboxLinkNodeContainer").css("opacity","0");R=false});jq(".vehicleStageToolboxInnerContainer").animate({top:j+"px"})},0)}function X(){jq(window).bind(rlNccServices.EVENT_POV_WASDELETED,i)}function i(k,j){if(j==rlMyVehiclesController.getCurrentVehicleId()){rlNccServices.getPreOwnedVehicleCount({success:function(l){if(l.bmws>0){rlMyVehiclesController.loadPrimaryVehicle()}else{L()}},error:function(){C()},fail:function(){C()}})}}function g(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageSetPrimaryLink","mybmwAction/myvehicles");jq(".contextLayerDialogMain").hide();var j=rlMyVehiclesController.getCurrentVehicle();rlNccServices.setPrimaryPreOwnedVehicle({vehicleId:j.vehicleId,success:function(k){F()},error:function(){rlErrorService.handleError({actor:rlErrorService.ACTOR_USER})},fail:function(){rlErrorService.handleError({actor:rlErrorService.ACTOR_USER})}})}function I(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageRenameLink","mybmwAction/myvehicles");rlUserDialog.showVehicleRenameDialog({vehicle:rlMyVehiclesController.getCurrentVehicle()})}function D(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageDeleteLink","mybmwAction/myvehicles");rlUserDialog.showVehicleDeleteDialog({vehicleId:rlMyVehiclesController.getCurrentVehicleId()})}function U(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageAddAccessoriesLink","mybmwAction/myvehicles");var j=rlMyVehiclesController.getCurrentVehicle();var l=j.model;var k=j.series;var m=jq.base64Encode('{"as_q":"inmeta:availableForSeries%3D'+k+" inmeta:availableForModels%3D"+l+'"}');window.location.href=W.accessoriesLink+"#"+m}function a(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageAddVehicleLink","mybmwAction/myvehicles");rlGlassPaneLayerNext.openDialog({url:GLOBAL_MYBMWVEHICLE_ADD_DIALOG_URL,waitforcallback:true})}function e(){f.trackCustomEvent("myBMWArea/myBMWPageMyvehicles/myBMWStageArea/vehicleStageAddVinLink","mybmwAction/myvehicles");F();rlUserDialog.showAddVinToMyVehicleDialog({vehicle:rlMyVehiclesController.getCurrentVehicle()})}function V(){jq("div.vehicleStageContent").show();jq(".vehicleStageImageContainer").animate({opacity:1},700,function(){if(P>0&&P<9){jq(this).css("filter","none")}});jq("div.vehicleStageTeaser").hide();jq(window).trigger("stagearea-teaser-changed")}function L(){jq("div.vehicleErrorTeaser").hide();jq("div.vehicleStageContent").hide();jq("div.vehicleStageTeaser").show();G();jq(window).trigger("stagearea-teaser-changed")}function C(){jq("div.vehicleStageContent").hide();jq("div.vehicleStageTeaser").hide();jq("div.vehicleErrorTeaser").show();G();jq(window).trigger("stagearea-teaser-changed")}function b(){rlDither.on("#myBMWStageArea")}function G(){setTimeout(function(){rlDither.off("#myBMWStageArea")},500)}function F(){if(R){Q(false)}}return{__init__:function(){f=rlEventTracker.create();if(!rlPage.isEditMode()){T();rlComponentLoader.deferredExec("nccServices",function(){X()});N();K()}},__start__:function(){},initController:function(j){W=j;window.onbeforeunload=function(){_pageHasUnloaded=true};rlCoreServices.isLoggedIn({loggedOut:function(){L()}});rlCoreServices.addLoggedOutListener(function(){L()});rlMyVehiclesController.addVehicleStartedUpdatingListener({success:function(){b()}});rlMyVehiclesController.addVehicleUpdatedListener({success:function(){G()},error:function(){G()}});rlMyVehiclesController.addVehicleLoadedListener({success:function(k){rlVehicleStage.onVehicleLoadedSuccess(k);G();if(jq(".vehicleStage").is(":visible")){rlMyVehiclesController.broadcastCurrentVehicle()}},error:function(k){C();G()}});rlMyVehiclesController.addVehicleListLoadedListener({success:function(l){var k=l.length>0;rlContextObject.setHasSavedVehicles(k);if(!k){L()}if(l.length==1){jq(".vehicleStageSkipButton").hide()}else{jq(".vehicleStageSkipButton").show()}},error:function(k){C()}});rlMyVehiclesController.addVehicleStartedLoadingListener({success:function(){jq("div.vehicleStageTeaser").hide();b()},error:function(){C()}})},onVehicleLoadedSuccess:function(j){j&&M(j)},initToolboxOuterContainerPosition:function(){H()}}}();var rlVehiclesnapshot=function(){var C=jq(".vehiclesnapshotcontainer");function D(K){if(!K||!K.specialEquipmentList){C.fadeOut();return }var H=[],F=[],E=[];for(var G=0;G<K.specialEquipmentList.length;G++){var I=K.specialEquipmentList[G];if(I.art==="S"&&I.type==="B"){E.push(I)}else{if(I.art==="L"){H.push(I)}else{if(I.art==="P"){F.push(I)}}}}function J(O,M){if(M.length>0){var L=jq(".vehiclesnapshotcontent");L.append('<h3 class="headlineSizableMedium headlineDarkGrey">'+O+"</h3>");if(M.length===1){L.append("<div class='sarow fontBold'>"+I.text+"</div>")}else{for(var N=0;N<M.length;N++){L.append("<div class='sarow fontBold'>"+M[N].text+"</div>")}}}}jq(".vehiclesnapshotcontent").empty();if(H.length+F.length+E.length>0){J(C.find(".interiorSectionSubheadlineLabel").text(),H);J(C.find(".exteriorSectionSubheadlineLabel").text(),F);J(C.find(".equipmentSectionSubheadlineLabel").text(),E);C.fadeIn()}else{C.fadeOut()}}function B(){rlMyVehiclesController.addVehicleStartedLoadingListener({success:function(){rlDither.on(C,false)}});rlMyVehiclesController.addVehicleStartedUpdatingListener({success:function(){rlDither.on(C,false)}});rlMyVehiclesController.addVehicleUpdatedListener({success:function(){rlDither.off(C)},error:function(){rlDither.off(C)}});rlMyVehiclesController.addVehicleLoadedListener({success:function(E){rlDither.off(C);D(E)},error:function(E){rlDither.off(C);C.fadeOut()}});rlMyVehiclesController.addVehicleListLoadedListener({success:function(E){if(E.length===0){C.fadeOut()}}})}function A(){D({specialEquipmentList:[{art:"L",type:"B",code:"1138",text:"Funky red"},{art:"P",code:"1139",text:"Black leather"},{art:"S",type:"B",code:"1140",text:"Xenon headlights"},{art:"S",type:"B",code:"1141",text:"Head-up display"},{art:"S",type:"B",code:"1142",text:"Navigation system"},{art:"S",type:"B",code:"1143",text:"Automatic A/C"}]});C.show()}return{__init__:function(){if(rlPage.isEditMode()||rlPage.isDesignMode()){A()}else{B()}rlCoreServices.addLoggedOutListener(function(){jq(".vehiclesnapshotcontainer").hide()})},__start__:function(){}}}();var rlVinTool=function(){var A;var F;var B={};var H=[];var K=false;var C="vintool_vintab_ready";var E="switchPerspectiveRadioButton1";var D="switchPerspectiveRadioButton2";var J="vinToolUnsavedVehicles";function G(){var M=[];for(var L=0;L<H.length;L++){if(H[L].canBeAddedToMyBMW){M.push(H[L])}}if(M.length>0){rlCookieController.setCookie({cookieKey:J,cookieValue:JSON.stringify(M)})}else{rlCookieController.removeCookie({cookieKey:J})}}function I(){try{var M=rlCookieController.getCookie({cookieKey:J});if(M){var P=JSON.parse(M.cookieValue);var L=H.length;for(var O=0;O<P.length;O++){var R=true;for(var N=0;N<L;N++){if(H[N].vin!==P[O].vin){R=false;break}}if(R){H.push(P[O])}}}}catch(Q){console.error("VinTool cookie is corrupt: "+Q)}}return{__start__:function(){},__init__:function(){var L=true;jq("#"+E).bind("click.vintool",function(){if(L||jq("#"+D).parent().hasClass("active")){L=false;jq(this).parent().addClass("active");jq("#"+E).attr("checked",true);jq("#"+D).parent().removeClass("active");jq("#vinToolTabsContentVehicleList").fadeOut(200);jq("#vinToolTabsContentModelTree").delay(200).fadeIn(400);rlVinTool.triggerSelectedCar(B)}});jq("#"+D).click(function(){rlVinTool.switchToSearchVIN()});jq("#"+E).trigger("click.vintool")},switchToSearchVIN:function(){if(jq("#"+E).parent().hasClass("active")){jq("#"+D).parent().addClass("active");jq("#"+E).parent().removeClass("active");jq("#vinToolTabsContentModelTree").fadeOut(200);jq("#vinToolTabsContentVehicleList").delay(200).fadeIn(400);if(!jq("#"+D).attr("checked")){jq("#"+D).attr("checked","checked")}}},setLocalisedStrings:function(L){A=L},initVehicleListTab:function(){I();rlVinTool.showDefaultVehicleListState();rlCoreServices.isLoggedIn({loggedIn:rlVinTool.showLoggedInVehicleListState,loggedOut:function(){jq(window).trigger(C);K=true}});rlCoreServices.addLoggedInListener(rlVinTool.onLoggedIn);rlCoreServices.addLoggedOutListener(rlVinTool.onLoggedOut);jq("#vinToolExistingVin").change(rlVinTool.onVinVehicleSelected);jq("#vinToolShowAddVinButton").click(rlVinTool.showNewVinVehicleForm);jq("#vinToolAddNewVinButton").click(rlVinTool.onAddNewVinVehicleClicked);jq("#vinToolAddToMyBMWButton").click(rlVinTool.onAddVehicleToMyBMWClicked);jq("#vinToolResetVinButton").click(rlVinTool.onResetVehicleListFormClicked)},onLoggedIn:function(){rlVinTool.setTabTitle();rlVinTool.showLoggedInVehicleListState()},onLoggedOut:function(){var M=[];for(var L=0;L<H.length;L++){if(H[L].canBeAddedToMyBMW){M.push(H[L])}}H=M;rlVinTool.populateVinVehicleList();rlVinTool.setTabTitle()},showDefaultVehicleListState:function(){jq("#vinToolExistingVins").hide();jq("#vinToolShowAddVinButtonArea").hide();jq("#vinToolAddToMyBMWButtonArea").hide();rlVinTool.setTabTitle();if(H.length==0){rlVinTool.showNewVinVehicleForm();rlVinTool.populateDropdown(jq("#vinToolExistingVin"),[{code:"",name:A.chooseLabel}])}else{rlVinTool.populateVinVehicleList()}},showLoggedInVehicleListState:function(){var L=[];var M;for(M=0;M<H.length;M++){if(H[M].canBeAddedToMyBMW){L.push(H[M])}}rlNccServices.listPreOwnedVehicleSummaries({success:function(O){H=[];var N={};for(M=0;M<O.length;M++){if(O[M].vin){H.push(O[M]);N[O[M].vin]=true}}for(M=0;M<L.length;M++){if(!N[L[M].vin]){H.push(L[M])}}rlVinTool.populateVinVehicleList();rlVinTool.setTabTitle();jq(window).trigger(C);K=true},error:function(N){rlVinTool.showDefaultVehicleListState();K=true}})},resumeWorkflow:function(L){if(L.workflowID===rlHttpsWorkflow.WORKFLOW_VINTOOL_SAVEVININMYBMW){if(K){rlVinTool.workflowImpl_SaveVinInMyBMW(L)}else{jq(window).bind(C,function(){jq(window).unbind(C);K=true;rlVinTool.workflowImpl_SaveVinInMyBMW(L)})}}},workflowImpl_SaveVinInMyBMW:function(N){jq("#vinToolExistingVin").val(N.params.vin);jq("#vinToolExistingVin").change();jq("#"+D).click();jq("#vinToolSaveVinVehicleErrMsg").hide();var L=-1;for(var M=0;M<H.length;M++){if(H[M].vin===N.params.vin){L=M;break}}if(L>=0&&H[L].canBeAddedToMyBMW){rlNccServices.createPreOwnedVehicle({vehicle:H[L],success:function(){delete H[L].canBeAddedToMyBMW;jq("#vinToolExistingVin").find("option:selected").text(H[L].seriesText);jq("#vinToolAddToMyBMWButtonArea").hide();G()},fail:function(O){jq("#vinToolSaveVinVehicleErrMsg").show()},error:function(O){jq("#vinToolSaveVinVehicleErrMsg").show()}})}},populateVinVehicleList:function(){var O=jq("#vinToolExistingVin").val();var N=[{code:"",name:A.chooseLabel}];for(var M=0;M<H.length;M++){var L=H[M];N.push({code:L.vin,name:L.seriesText})}if(N.length>1){jq("#vinToolExistingVins").show();jq("#vinToolShowAddVinButtonArea").show();jq("#vinToolAddToMyBMWButtonArea").hide();jq("#vinToolAddVin").hide();rlVinTool.setTabTitle();rlVinTool.populateDropdown(jq("#vinToolExistingVin"),N);if(O){jq("#vinToolExistingVin").val(O);jq("#vinToolExistingVin").change()}}else{rlVinTool.showDefaultVehicleListState()}},showNewVinVehicleForm:function(){jq("#vinToolAddVin").removeClass("withError");jq("#vinToolVinToAdd").val("");jq("#vinToolShowAddVinButtonArea").hide();jq("#vinToolAddVin").show()},hideNewVinVehicleForm:function(){jq("#vinToolShowAddVinButtonArea").show();jq("#vinToolAddVin").hide()},setTabTitle:function(){rlCoreServices.isLoggedIn({loggedIn:function(){jq("#switchPerspectiveRadioButtonLabel2").text(A.tabHeaderMyBMWs)},loggedOut:function(){jq("#switchPerspectiveRadioButtonLabel2").text(A.tabHeaderVIN)}})},onVinVehicleSelected:function(){if(jq("#vinToolExistingVin").find("option").length>1){rlVinTool.hideNewVinVehicleForm()}var M=jq("#vinToolExistingVin").find("option:selected").index()-1;if(M<0){B.series=null;B.model=null;rlVinTool.triggerSelectedCar(B);jq("#vinToolAddToMyBMWButtonArea").hide()}else{var L=H[M];rlVinTool.triggerSelectedCar({brand:L.brand,series:L.series,model:L.model});if(L.canBeAddedToMyBMW){jq("#vinToolAddToMyBMWButtonArea").show();jq("#vinToolSaveVinVehicleErrMsg").hide()}else{jq("#vinToolAddToMyBMWButtonArea").hide()}}},onAddNewVinVehicleClicked:function(){var L=jq("#vinToolVinToAdd").val();if(L==""){L="x"}rlNccServices.resolveVIN({vin:L,success:function(P){var N=false;for(var M=0;M<H.length;M++){if(H[M].vin===L){N=true;break}}var O=jq("#vinToolExistingVin");if(!N){P.vin=L;P.canBeAddedToMyBMW=true;H.push(P);rlVinTool.addOptionToDropdown(O,P.vin,P.seriesText);jq("#vinToolExistingVins").show();G()}rlVinTool.hideNewVinVehicleForm();O.val(P.vin);O.change()},fail:function(M){jq(".vinToolAddVinErrMsg").text(M[0].errorMessage);jq("#vinToolAddVin").addClass("withError")},error:function(M){jq(".vinToolAddVinErrMsg").text(A.httpErrorMessage);jq("#vinToolAddVin").addClass("withError")}})},onAddVehicleToMyBMWClicked:function(){var L=jq("#vinToolExistingVin").find("option:selected").index()-1;if(H[L].canBeAddedToMyBMW){rlHttpsWorkflow.triggerWorkflow(rlHttpsWorkflow.WORKFLOW_VINTOOL_SAVEVININMYBMW,{vin:H[L].vin})}},onResetVehicleListFormClicked:function(){var L=jq("#vinToolExistingVin");L.find("option").first().attr("selected","selected");L.change();if(L.find("option").length>1){rlVinTool.hideNewVinVehicleForm()}},initModelTreeTab:function(){F=rlModelTreeController.buildController({brandsDropdown:jq("#vinToolSelectBrand"),seriesDropdown:jq("#vinToolSelectSeries"),modelsDropdown:jq("#vinToolSelectModel"),modelYearsDropdown:jq("#vinToolSelectRegistrationCode"),pleaseChooseOptionLabel:A.chooseLabel,beforeSeriesLoaded:function(){jq("#vinToolSelectFormRow1").addClass("form_row_disabled")},afterSeriesLoaded:function(){jq("#vinToolSelectFormRow1").removeClass("form_row_disabled")},beforeModelsLoaded:function(){jq("#vinToolSelectFormRow3").addClass("form_row_disabled")},afterModelsLoaded:function(){jq("#vinToolSelectFormRow3").removeClass("form_row_disabled")},beforeModelYearsLoaded:function(){jq("#vinToolSelectFormRow4").addClass("form_row_disabled")},afterModelYearsLoaded:function(){jq("#vinToolSelectFormRow4").removeClass("form_row_disabled")},afterSeriesSelected:function(L){if(L==null){jq("#vinToolSelectFormRow3").addClass("form_row_disabled");jq("#vinToolSelectFormRow4").addClass("form_row_disabled");B.series=null;B.model=null}else{B.series=L.code;B.model=null}rlVinTool.triggerSelectedCar(B)},afterModelSelected:function(L){if(L==null){B.model=null}else{B.model=L.code}rlVinTool.triggerSelectedCar(B)},afterModelYearSelected:function(L){jq("#vinToolSelectFormRow3").removeClass("form_row_disabled")}});F.setErrorHandler(function(){rlVinTool.switchToSearchVIN();jq("#vinToolConfigTab").addClass("noModelTreeLoaded")});jq(".vinToolModelTreeReset").bind("click",rlVinTool.onResetModelTreeFormClicked);jq("#vinToolSelectBrand").find("option[value='BMW']").val(rlNccServices.modelTreeBrandKeyBMW());jq("#vinToolSelectBrand").val(rlNccServices.modelTreeBrandKeyBMW());jq("#vinToolSelectBrand").change()},onResetModelTreeFormClicked:function(){F.selectFistSeriesOption();jq("#vinToolSelectFormRow2").addClass("form_row_disabled");jq("#vinToolSelectFormRow3").addClass("form_row_disabled");jq("#vinToolSelectFormRow4").addClass("form_row_disabled")},triggerSelectedCar:function(L){jq(document).trigger("igDomModelUpdate",L)},populateDropdown:function(L,M){L.empty();jq.each(M,function(N,O){rlVinTool.addOptionToDropdown(L,O.code,O.name)});L.removeAttr("disabled")},addOptionToDropdown:function(L,N,M){if(jq.browser&&jq.browser.msie&&jq.browser.msie===true){L.each(function(O,Q){var P=document.createElement("option");P.value=N;P.text=M;Q.add(P)})}else{L.append("<option value='"+N+"'>"+M+"</option>")}}}}();var rlVmrAccordion=function(){function A(H,D){var E={};E.typeName="rlVmrAccordion";function G(){D.registerContentPageLoadedListener({success:B,error:function(){}})}function B(){rlComponentLoader.deferredExec("accordion",function(){rlAccordion.bmwAccordionInit({id:".vehiclemanualcontent",item:".accordionItemWrap",head:".accordionHeadline",content:".accordionContent",togglerCloseAll:".faqBlockCloseAll",togglerOpenAll:".faqBlockOpenAll"})});rlComponentLoader.requireComponents(["accordion"])}E.render=function(I){var J=jq("<div/>").addClass("accordion");var K=jq("<div/>").addClass("accordionItemWrap").addClass("bmwAccordionClosed");K.append(F(I));K.append(C(I));J.append(K);return J};function F(I){var J=jq("<div/>").addClass("accordionHeadline");if(I.overview){J.append(H.render({type:I.overview.type,text:I.overview.text}))}return J}function C(I){var K=jq("<div/>").addClass("accordionContent");var L=true;for(var J=0;J<I.content.length;J++){if(I.content[J].type==="paragraph"&&L){L=false;if(I.overview){if((I.overview.text).indexOf(I.content[J].text)!==-1){continue}}}K.append(H.render(I.content[J]))}K.append(jq("<div />").addClass("accordionContentSpacer"));return K}G();return E}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrAction=function(){function A(E){var B={};B.typeName="rlVmrAction";var D=0;B.render=function(J){D++;var G=(D<=3)?"action":"flataction";var F=jq("<ol/>").addClass(G);for(var I=0;I<J.content.length;I++){var H=J.content[I];F.append(C(H))}D--;return F};function C(H){var J=jq("<li/>");if(H.content){for(var G=0;G<H.content.length;G++){var I=H.content[G];var F=E.render(I);J.append(F)}}return J}return B}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrAnimation=function(){function A(E,K){var I={};I.typeName="rlVmrAnimation";var B=undefined;var F=4;function J(){K.registerContentPageLoadedListener({success:function(){B=undefined}})}I.render=function(L){if(K.getCurrentContentPage().entryPointType==="ANIMATIONS"){return D(L)}else{return C(L)}};function D(N){var P=jq("<div />").addClass("teaser");var S=K.createAbsoluteImgUrl(N.preview);var R=jq("<div />").addClass("teaserImageClip");var O=jq("<img />").attr("src",S).attr("data-source",N.source);var L=jq("<div />").addClass("playIcon baseIconSprite baseIconSizeBig spriteIconControlPlayBig");var Q=jq("<h3 />").text(N.title);var M=jq("<div />").text(N.description).addClass("teaserDescription copyText");O.appendTo(R);L.appendTo(R);R.appendTo(P);Q.appendTo(P);M.appendTo(P);R.css("cursor","pointer");R.click(function(){var T=jq("<div/>").html(N.source).text();var U=G(T,"id");var V=G(T,"spaceID");rlVideo.openVideoEmbed(U,V)});if(!B||B.children().size()>=F){B=H(P);return B}else{B.append(P)}}function G(M,N){var L=RegExp("(&|\\?)"+N+"=(.+?)(&|$)").exec(M);return L?decodeURIComponent(L[2]):""}function H(L){return jq("<div />").addClass("teaserContainer clearfix").append(L)}function C(M){var N=jq("<div />").addClass("embeddedAnimation");var O=jq("<div />").addClass("startAnimationLayer");O.css({width:M.width+"px",height:M.height+"px"});var L=jq("<div />");L.addClass("baseIconSprite baseIconSizeXL spriteIconControlPlayXL");L.appendTo(O);L.css({position:"relative",top:M.height/2-18});O.click(function(){var Q=jq(this).parent();jq(this).remove();var P=jq("<iframe />");P.addClass("embeddedAnimationIframe");P.attr({src:M.source,scrolling:"no"});P.css({width:M.width,height:M.height});Q.append(P)});O.appendTo(N);return N}J();return I}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrBreadcrumb=function(){function A(D,B){var C={};C.typeName="rlVmrBreadcrumb";C.render=function(E){var K=jq("<div/>").addClass("breadcrumb");var G=jq("<span/>");G.text(E.breadcrumbs[0].title+": ");K.append(G);for(var F=1;F<E.breadcrumbs.length;F++){var J=E.breadcrumbs[F].title;var I=E.breadcrumbs[F].target;var H=jq("<a/>").text(J);(function(L){H.click(function(){B.loadContentPage(L)})})(I);K.append(H);if(F!==E.breadcrumbs.length-1){K.append("&nbsp;/ ")}}return K};return C}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrContentPage=function(){function A(F){var C={};C.typeName="rlVmrContentPage";C.render=function(K){var G=jq("<div/>");G.append(B(K));G.append(E(K.content));for(var I=0;I<K.content.length;I++){var J=K.content[I];var H=F.render(J);G.append(H)}return G};function B(G){return jq("<h1/>").addClass("pagetitle").text(G.title)}function E(J){var H=jq("<ul/>").addClass("anchorLinks clearfix");for(var I=0;I<J.length;I++){var G=J[I];if(G.type==="section"&&G.title){var K=D(G);H.append(K)}}return H}function D(J){var I=jq("<li/>");I.addClass("anchorLink clearfix");I.attr("data-target",J.id);var G=jq("<div/>");G.addClass("anchorLinkIcon baseIconSprite baseIconSizeSmall spriteIconJumpMarkDownSmall");I.append(G);var H=jq("<div/>");H.addClass("anchorLinkLabel link13px");H.text(J.title);I.append(H);I.click(function(){var K=jq(this).attr("data-target");jq("html:not(:animated), body:not(:animated)").animate({scrollTop:jq("a[name='"+K+"']").offset().top})});return I}return C}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrExplanation=function(){function A(C){var B={};B.typeName="rlVmrExplanation";B.render=function(E){var D=jq("<div/>").addClass("explanation");for(var F=0;F<E.content.length;F++){var G=E.content[F];D.append(C.render(G))}return D};return B}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrFaqPage=function(){function A(G){var C={};C.typeName="rlVmrFaqPage";C.render=function(L){var H=jq("<div/>").addClass("vehicleManualFaq");H.append(B(L));for(var J=0;J<L.content.length;J++){var K=L.content[J];var I=G.render(K);H.append(I)}H.append(D());return H};function B(H){return jq("<h1/>").addClass("pagetitle").text(H.title)}function D(){var H=jq("<a/>").addClass("linkArrow13px").addClass("faqBlockOpenClose").addClass("faqClosed");var J=rlVehicleManual.getI18n().expandFaqButtonLabel;var I=rlVehicleManual.getI18n().collapseFaqButtonLabel;H.append(jq("<span/>").addClass("faqBlockCloseAll").text(F(J)));H.append(jq("<span/>").addClass("faqBlockOpenAll").text(F(I)));return H}function F(H){var I=document.createElement("textarea");I.innerHTML=H;return I.value}function E(){jq(window).bind(rlPrintButton.EVENTS.EVENT_PREPARE_FOR_PRINTING,function(H){jq(window).trigger("openAllAccordionTabsForPrinting")})}E();return C}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrGlossaryPage=function(){function A(H){var E={};E.typeName="rlVmrGlossaryPage";var G=H.createSequenceId();function D(I){return jq("<h1/>").addClass("pagetitle").text(I.title)}function C(I){var J=jq("<nav />").addClass("glossaryOverview clearfix");jq.each(I.groupEntries,function(M,K){if(jq.isArray(K.values)&&K.values.length>0){var L=jq("<a />").attr("href","javascript:void(0)").addClass("link13px").text(K.key);var N=jq("<h4 />").addClass("glossaryGroupName");L.appendTo(N);N.appendTo(J);L.click(function(){jq(this).parents("nav").find("a[class*='link13pxActive']").removeClass("link13pxActive");jq(this).parents("nav").find("div[class*='active']").removeClass("active");jq(this).closest(".glossaryGroupName").addClass("active");jq("html:not(:animated), body:not(:animated)").animate({scrollTop:jq("a[name='"+G+"_"+K.key+"']").offset().top})})}});return J}function F(I){var J=jq("<div />").addClass("glossarySections");jq.each(I.groupEntries,function(K,M){if(jq.isArray(M.values)&&M.values.length>0){var L=jq("<div />").addClass("glossaryGroup");jq("<a />").attr("name",G+"_"+M.key).appendTo(L);jq("<h1 />").text(M.key).appendTo(L);L.appendTo(J);B(M.values,L)}});return J}function B(I,J){var K=jq("<div />").addClass("glossaryGroupTerms");jq.each(I,function(M,N){var L=jq("<div class='groupTermItem'/>").appendTo(K);H.render({type:"link",text:N.title,target:N.target}).appendTo(L)});K.appendTo(J);return K}E.render=function(I){var J=jq("<div />").addClass("glossary section").attr("id",G);D(I).appendTo(J);C(I).appendTo(J);F(I).appendTo(J);return J};return E}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrHotspots=function(){function A(T,B){var O={};O.typeName="rlVmrHotspots";var Q=15;var F=35;var D={x:30,y:30};var U={getUrl:function(){return T.getBmwIconsPath()},x:180,y:390,width:30,height:30};var G={getUrl:function(){return T.getBmwIconsPath()},x:240,y:390,width:30,height:30};function M(Y){var V=R(jq("<div />"),"hotspots").addClass("clearfix");var f=R(jq("<div />"),"hotspotimagecontainer").css({width:Y.width,height:Y.height}).appendTo(V);var b=R(jq("<div />"),"hotspotscontainer").appendTo(f);var a=R(jq("<div />"),"hotspotimagewrapper").appendTo(f);var X=R(jq("<img />"),"hotspotimage").attr({width:Y.width,height:Y.height,src:B.createAbsoluteImgUrl(Y.url)}).appendTo(a);var W=R(jq("<div />"),"hotspotlegendcontainer").css("width",Y.width).appendTo(V);var d=R(jq("<div />"),"hotspotlegendleft").addClass("hotspotlegendhalf").width((Y.width/2)-F).appendTo(W);var Z=R(jq("<ul />"),"hotspotlegendleftlist").appendTo(d);var e=R(jq("<div />"),"hotspotlegendright").addClass("hotspotlegendhalf").width((Y.width/2)-F).appendTo(W);var g=R(jq("<ul />"),"hotspotlegendrightlist").appendTo(e);return V}function S(a,X){var W=R(jq("<div />"),"hotspotclip").css({width:U.width,height:U.height,left:(parseInt(a.location.x)+D.x-(U.width/2))+"px",top:(parseInt(a.location.y)+D.y-(U.height/2))+"px"});var b=R(jq("<div />"),"hotspotwrapper").css({left:"-"+U.x+"px",top:"-"+U.y+"px"}).appendTo(W);var V=R(jq("<img />"),"hotspot").attr({src:B.createAbsoluteImgUrl(U.getUrl())}).appendTo(b);var Y=R(jq("<div />"),"hotspotnumbercontainer").appendTo(W);var Z=R(jq("<h4 />"),"hotspotnumber").text(X).appendTo(Y);return W}function N(W,X){var V=R(jq("<div />"),"hotspottooltip").css({left:0,top:0,"max-height":X.height-Q+"px","max-width":(X.width/2)-U.width-Q+"px"}).addClass("shadow copyText");I(W,V,"hotspottooltiplink");return V}function C(Y,W){var Z=R(jq("<li />"),"hotspotlegendentry");var V=R(jq("<div />"),"hotspotlegendentrynumber").addClass("fontBold").text(W).appendTo(Z);var X=R(jq("<div />"),"hotspotlegendlinkwrapper").addClass("fontBold").appendTo(Z);I(Y,X,"hotspotlegendlink")?V.addClass("link13px"):V.addClass("nolink");return Z}function I(V,X,W){if(V.target){R(T.render({type:"link",text:V.label,target:V.target}),W).appendTo(X);return true}else{X.text(V.label);return false}}O.render=function(e){var X=e.image;var d=e.hotspots;if(!X){console.error("hotspots: No image defined!");return undefined}if(!d||d.length<1){console.warn("hotspots: No hotspots defined!")}var g=M(X);var V=g.find(".hotspotimage");var a=g.find(".hotspotscontainer");var b=g.find(".hotspotlegendleftlist");var j=g.find(".hotspotlegendrightlist");for(var Y=0;Y<d.length;Y++){var W=S(d[Y],(Y+1)).appendTo(a);var Z=N(d[Y],X).appendTo(a);var f=C(d[Y],(Y+1)).appendTo(Y<(d.length/2)?b:j);(function(){var k=W;var l=Z;var m=f;var o=V;function i(){P(jq(this),k,l,m,o)}function n(){L(jq(this),k,l,m)}k.hover(i,n);l.hover(i,n);m.hover(i,n)}())}return g};function E(X,W,Y){var V=K(W,X,Y);X.offset(V);W.css("z-index",parseInt(W.css("z-index"))+10);X.css("z-index",parseInt(X.css("z-index"))+10);X.css("visibility","visible")}function H(W,V){W.css("visibility","hidden");W.css("z-index",parseInt(W.css("z-index"))-10);V.css("z-index",parseInt(V.css("z-index"))-10)}function J(a,Z,b){var X=b.offset().top+b.outerHeight();var Y=b.offset().left+b.outerWidth();var W=a.offset().top+(a.outerHeight()/2)+Z.outerHeight()+Q;var V=a.offset().left+(a.outerWidth()/2)+Z.outerWidth()+Q;return{vertical:X<W,horizontal:Y<V}}function K(X,Y,a){var Z=J(X,Y,a);var W=X.offset();var V={};if(Z.vertical){V.top=X.offset().top+(X.outerHeight()/2)-Y.outerHeight()}else{V.top=W.top+(X.outerHeight()/2)}if(Z.horizontal){V.left=X.offset().left+(X.outerWidth()/2)-Y.outerWidth()}else{V.left=W.left+(X.outerWidth()/2)}return V}function R(W,V){return W.addClass(V).attr("id",V+T.createSequenceId())}function P(X,V,W,Y,Z){V.find(".hotspotwrapper").css("left","-"+G.x+"px");V.addClass("hotspotActive");E(W,V,Z)}function L(X,V,W,Y){V.find(".hotspotwrapper").css("left","-"+U.x+"px");V.removeClass("hotspotActive");H(W,V)}return O}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrIllustration=function(){function A(D,B){var C={};C.typeName="rlVmrIllustration";C.render=function(K){var I=jq("<div/>").addClass("illustration");for(var H=0;H<K.images.length;H++){var G=parseInt(K.images[H].width);var E=parseInt(K.images[H].height);var J=jq("<img/>").attr({src:B.createAbsoluteImgUrl(K.images[H].url)});J.css("width",G).css("height",E);if(E>80){J.addClass("vehicleManualSectionActionListIllustrationHugeImageSize")}if(K.images.length===1&&K.descriptions&&G<170){J.addClass("leftFlow");I.addClass("clearfix descriptionNextToImage")}J.appendTo(I)}if(K.descriptions&&K.descriptions.length>0){for(var H=0;H<K.descriptions.length;H++){var F=D.render(K.descriptions[H]);I.append(F);if(K.images.length===1&&G<170&&F.hasClass("copyText")){F.css("margin-left",G+15+"px")}}}return I};return C}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrInfoBubble=function(){function A(F,B){var C={};C.typeName="rlVmrInfoBubble";C.render=function(L){var H=rlContextLayer.buildNewLayer({componentId:"VM_ContextLayer_"+F.createSequenceId(),groupingParentClass:"vehicleManual",layerText:'<div class="infoBubbleContent"/>'});E(H.callback);var K=jq(H.dom);if(L.content){var G=D(L.content,"infoBubbleContent");K.find(".infoBubbleContent").replaceWith(G)}var J=jq("<div/>").addClass("infobubble");if(L.overview){var I=D(L.overview,"infobubbleOverview");I.appendTo(J)}return J.append(K)};function E(G){B.registerContentPageLoadedListener({success:G,error:function(){}})}function D(J,G){var L=jq("<div/>").addClass(G);if(jq.isArray(J)){for(var I=0;I<J.length;I++){var K=J[I];var H=F.render(K);L.append(H)}}else{if(typeof (J)=="object"){var H=F.render(J);L.append(H)}}return L}return C}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrLink=function(){function A(D,B){var C={};C.typeName="rlVmrLink";C.render=function(E){return jq("<a />").addClass("link linkArrow13px").attr("href","javascript:void(0)").text(E.text||"-").click(function(){if(E.target.indexOf("://")>=0){window.open(E.target,"_blank")}else{B.loadContentPage(E.target)}})};return C}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrList=function(){function A(E){var B={};B.typeName="rlVmrList";var C=0;B.render=function(J){C++;var I=(C<=3)?"list":"flatlist";var F=jq("<ul/>").addClass(I);for(var G=0;G<J.content.length;G++){var H=J.content[G];F.append(D(H))}C--;return F};function D(I){var J=jq("<li/>");if(I.content){for(var G=0;G<I.content.length;G++){var H=I.content[G];var F=E.render(H);J.append(F)}}return J}return B}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrPager=function(){var A=10;function B(H,C){var D={};D.typeName="rlVmrPager";function E(J){var I=jq("<li/>").addClass("ditherWrapper");I.append(jq("<div/>").addClass("pagerControl baseIconSizeMedium baseIconSprite iconHover "+J));I.append(jq("<div/>").addClass("ditherOverlay"));return I}function G(J){var I=E("spriteIconControlPreviousMedium");if(J.pageIndex===0){I.addClass("disabled")}I.children(".pagerControl").click(function(){C.searchVehicleManual(J.keyword,J.pageIndex-1)});return I}function F(I){var J=E("spriteIconControlNextMedium");if(I.pageIndex===(Math.floor((I.numResults-1)/A))){J.addClass("disabled")}J.children(".pagerControl").click(function(){C.searchVehicleManual(I.keyword,I.pageIndex+1)});return J}D.render=function(I){var L="";if(I.numResults>A){L=jq("<ul/>").addClass("searchResultPager clearfix");L.append(G(I));for(var J=0;J<(I.numResults/A);J++){var K=jq("<li/>").addClass("pagerItem").text(J+1);if(J===I.pageIndex){K.addClass("link13pxActive")}else{K.addClass("link13px");(function(M){K.click(function(){C.searchVehicleManual(I.keyword,M)})})(J)}L.append(K)}L.append(F(I))}return L};return D}return{__init__:function(){},create:function(D,C){return B(D,C)}}}();var rlVmrParagraph=function(){function A(P,B){var N={};N.typeName="rlVmrParagraph";var H=/<graphic-inline\s([^>]*)>/ig;var I=/<\/graphic-inline>/ig;var D=/<(link|link-extern)\s([^>]*)>/ig;var Q=/<\/(link|link-extern)>/ig;var C=/<(value)\s([^>]*)>/ig;var E=/<\/(value)>/ig;var O=/<(textref)\s([^>]*)>/ig;var F=/<\/(textref)>/ig;var L="img";var J=" ";N.render=function(V){var T=jq("<div>").addClass("paragraph copyText");if(!V.text){V.text=""}M(V,O,F);M(V,D,Q);M(V,C,E);var U=V.text.replace(H,"<img $1>").replace(I,"").replace(D,"<a $2>").replace(Q,"</a>");T.html(U);S(T);G(T);R(T);return T};function R(T){var U=jq(T).contents().realFirstChild(false);if(U.is(L)){U.addClass("paragraphStartsWithThisImage")}}function S(T){T.children("a").each(function(U,V){var V=jq(V);V.attr("href","javascript://");V.click(function(W){W.preventDefault();var X=jq(this).attr("target");if(X.indexOf("://")>=0){window.open(X,"_blank")}else{B.loadContentPage(X)}})})}function G(T){T.children("img").each(function(U,V){var V=jq(V);V.attr("src",B.createAbsoluteImgUrl(V.attr("src")));V.removeAttr("width");V.removeAttr("height");V.addClass("icon")})}function M(Z,W,V){if(Z.text.match(W)==null){return }for(var T=0;T<Z.text.match(W).length;T++){var Y=Z.text.indexOf(Z.text.match(W)[T]);if(Y>0&&!K(Z.text,J,Y-1)){Z.text=[Z.text.slice(0,Y),J,Z.text.slice(Y)].join("")}var X=Z.text.indexOf(Z.text.match(V)[T],Y);var U=Z.text.match(V)[T]==null?0:Z.text.match(V)[T].length;if(X>0&&X+U<Z.text.length&&!K(Z.text,J,X+U+1)){Z.text=[Z.text.slice(0,X+U),J,Z.text.slice(X+U)].join("")}}}function K(U,T,V){return U.charAt(V)===T}return N}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrSearchResultPage=function(){function A(C){var B={};B.typeName="rlVmrSearchResult";B.render=function(H){var D=jq("<div/>").addClass("searchResultPage");var I=jq("<h1/>").addClass("pagetitle").text(H.title);D.append(I);for(var F=0;F<H.content.length;F++){var G=H.content[F];var E=C.render(G);D.append(E)}return D};return B}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrSection=function(){function A(D){var B={};B.typeName="rlVmrSection";var C=0;B.render=function(J){C++;var G=jq("<div/>").addClass("section");G.append(jq("<a/>").attr("name",J.id));if(J.title){var I="h"+Math.min(C,4);var K=jq("<"+I+"/>");K.text(J.title);G.append(K)}if(J.content){for(var F=0;F<J.content.length;F++){var H=J.content[F];var E=D.render(H);G.append(E)}}C--;return G};return B}return{__init__:function(){},create:function(B){return A(B)}}}();var rlVmrSlideshow=function(){var A=21;function B(G,M){var L={};L.typeName="rlVmrSlideshow";L.render=function(N){var O=jq("<div/>").addClass("slideshow");O.append(J(N));O.append(H(N.content));F(O);return O};function J(P){var O=jq("<div/>").addClass("slideshowImages");var Q={width:P.width,height:P.height};O.css(Q);O.append(K("slideshowPrev",Q));for(var N=0;N<P.content.length;N++){var R=P.content[N];O.append(E(R,Q))}O.append(K("slideshowNext",Q));O.find(".slideshowImage").first().addClass("activated");return O}function K(O,P){var N=jq("<div/>").addClass(O);N.css("top",Math.floor((P.height/2)-(A/2)));N.click(C);N.dblclick(function(Q){Q.preventDefault()});return N}function E(O,N){var P=jq("<img/>").addClass("slideshowImage");P.css(N);P.attr("src",M.createAbsoluteImgUrl(O.image));return P}function H(N){var Q=jq("<ol/>").addClass("slideshowLabels");for(var O=0;O<N.length;O++){var P=N[O];Q.append(I(P))}Q.find(".slideshowLabel").first().addClass("activated");return Q}function I(O){var N=jq("<li/>").addClass("slideshowLabel");N.append(G.render({type:"paragraph",text:O.label}));if(O.content&&O.content.length>0){N.append(D(O.content))}return N}function D(Q){var P=jq("<div/>").addClass("slideshowLabelContent");for(var O=0;O<Q.length;O++){var N=Q[O];P.append(G.render(N))}return P}function C(Q){if(!Q.detail||Q.detail===1){var R=jq(this);if(R.hasClass("disabled")===false){var P=R.parents(".slideshow").first();var O=P.find(".slideshowImages:first .slideshowImage.activated, .slideshowLabels:first > .slideshowLabel.activated");var N;if(R.hasClass("slideshowNext")){N=O.next()}else{N=O.prev()}O.removeClass("activated");N.addClass("activated");F(P)}}}function F(O){var N=O.find(".slideshowImages:first");if(N.find(".slideshowImage").last().hasClass("activated")){N.find(".slideshowNext").addClass("disabled")}else{N.find(".slideshowNext").removeClass("disabled")}if(N.find(".slideshowImage").first().hasClass("activated")){N.find(".slideshowPrev").addClass("disabled")}else{N.find(".slideshowPrev").removeClass("disabled")}}return L}return{__init__:function(){},create:function(D,C){return B(D,C)}}}();var rlVmrTable=function(){var C={ALIGN:{LEFT:"left",RIGHT:"right",CENTER:"center"},VALIGN:{BOTTOM:"bottom",MIDDLE:"middle",TOP:"top"},BORDER:{RIGHT:"right",BOTTOM:"bottom",BOTH:"both",NONE:undefined},FRAME:{ALL:"all",BOTTOM:"bottom",SIDES:"sides",TOP:"top",TOPBOT:"topbot",NONE:"none"}};var D={table:{borderenabled:true,colwidthenabled:true,frame:C.FRAME.NONE,pagewide:true},colspec:{width:undefined},cols:{align:C.ALIGN.CENTER,valign:C.VALIGN.MIDDLE,colspan:1,rowspan:1,border:C.BORDER.NONE}};var B=/^1?\d?\d(\.\d\d)?%$/;var F=true;var E="tableBorder";function A(W){var Q={};Q.typeName="rlVmrTable";var J={table:{borderenabled:undefined,colwidthenabled:undefined,frame:undefined,pagewide:undefined},colspec:{count:0}};Q.render=function(Z){var d=K("table","baoTable").addClass("tableCommon");try{O(Z,function(g,l){switch(g){case"type":if(l!=="table"){throw'Cannot handle type "'+l+'"!'}break;case"borderenabled":J.table.borderenabled=l;break;case"colwidthenabled":J.table.colwidthenabled=l;J.table.colwidthenabled=true;break;case"frame":J.table.frame=l;break;case"pagewide":J.table.pagewide=l;J.table.pagewide=true;break;case"colspec":J.colspec.count=l?l.length:0;var k=X(l,J);k&&k.appendTo(d);break;case"head":var f=!!(Z.body&&Z.body.rows&&Z.body.rows.length>0);var j=V(l,f,J);j&&j.appendTo(d);break;case"body":var i=I(l,J);i&&i.appendTo(d);break;default:R("Unknown property in table: ",g,' (value: "',l,'")')}})}catch(e){U(e);return undefined}var b=[];O(J.table,function(f,g){if(typeof (g)=="undefined"){b.push(f);J.table[f]=D.table[f]}});if(b.length>0){U("These table-properties are not defined: ",b.join(","))}if(!J.table.pagewide){d.css("width","initial")}var a=T(J);a&&d.addClass(a);return d};function X(b,a){var e=K("colgroup","baoTableColGroup");for(var Z=0;Z<b.length;Z++){var d=K("col","baoTableColspecColumn").appendTo(e);if(a.table.colwidthenabled){if(typeof (b[Z].width)=="undefined"){}else{if(!B.test(b[Z].width)){U('Illegal value in col.width: "',b[Z].width,'" (col: ',Z,")")}else{d.attr("width",b[Z].width)}}}}return e}function V(d,b,a){var f=K("thead","baoTableHead");if(d.rows&&d.rows.length>0){a.row={count:d.rows.length};for(var Z=0;Z<d.rows.length;Z++){a.row.index=Z;var e=M(d.rows[Z],b,a);e&&e.appendTo(f)}delete a.row}return f}function I(Z,b){var d=K("tbody","baoTableBody");if(Z.rows&&Z.rows.length>0){b.row={count:Z.rows.length};for(var a=0;a<Z.rows.length;a++){b.row.index=a;var e=S(Z.rows[a],b);e&&e.appendTo(d)}delete b.row}return d}function M(g,b,a){var d=K("tr","baoTableHeadRow");if(g.cols&&g.cols.length>0){a.col={};for(var Z=0,f=0;Z<g.cols.length;Z++){a.col.colspan=g.cols[Z].colspan||D.cols.colspan;a.col.rowspan=g.cols[Z].rowspan||D.cols.rowspan;f+=a.col.colspan;a.col.isLastColumn=f===a.colspec.count;a.row.isLastHeadRow=(a.row.index+a.col.rowspan)===a.row.count;a.row.isLastRow=a.row.isLastHeadRow&&b===false;var e=G(g.cols[Z],a);e&&e.appendTo(d)}delete a.col}return d}function G(g,f){var j=K("th","baoTableHeadColumn");var a=K("div","baoTableHeadColumnWrapper").addClass("columnHeadline").appendTo(j);var e=H(g);e&&j.addClass(e);var d=undefined;if(F){if(f.row.isLastHeadRow&&!f.row.isLastRow){d=E+L(C.BORDER.BOTTOM)}}else{if(f.table.borderenabled){d=Y(g,f)}}d&&j.addClass(d);f.col.colspan&&f.col.colspan>1&&j.attr("colspan",f.col.colspan);f.col.rowspan&&f.col.rowspan>1&&j.attr("rowspan",f.col.rowspan);if(g.content&&g.content.length>0){for(var b=0;b<g.content.length;b++){var Z=W.render(g.content[b]);Z&&Z.appendTo(a)}}return j}function S(f,a){var b=K("tr","baoTableBodyRow");if(f.cols&&f.cols.length>0){a.col={};for(var Z=0,e=0;Z<f.cols.length;Z++){a.col.colspan=f.cols[Z].colspan||D.cols.colspan;a.col.rowspan=f.cols[Z].rowspan||D.cols.rowspan;e+=a.col.colspan;a.col.isLastColumn=e===a.colspec.count;a.row.isLastRow=(a.row.index+a.col.rowspan)===a.row.count;var d=P(f.cols[Z],a);d&&d.appendTo(b)}delete a.col}return b}function P(e,Z){var l=K("td","baoTableBodyColumn");var k=K("div","baoTableBodyColumnWrapper").appendTo(l);var d=H(e);d&&l.addClass(d);var b=Y(e,Z);b&&l.addClass(b);var a=e.colspan||D.cols.colspan;a&&a>1&&l.attr("colspan",a);var f=e.rowspan||D.cols.rowspan;f&&f>1&&l.attr("rowspan",f);if(e.content&&e.content.length>0){for(var j=0;j<e.content.length;j++){var g=W.render(e.content[j]);g&&g.appendTo(k)}}return l}function K(b,Z){var a=jq("<"+b+" />");if(typeof (Z)!="undefined"&&jq.trim(Z).length>0){a.addClass(Z).attr("id",Z+W.createSequenceId())}return a}function O(Z,a){if(Z&&a){jq.each(Z,function(b,d){if(Z.hasOwnProperty(b)){if(a(b,d)===false){return false}}return true})}}function N(Z){Z=(arguments&&arguments.length>1)?Array.prototype.join.call(arguments,""):Z;console.log(Q.typeName+": "+Z)}function R(Z){Z=(arguments&&arguments.length>1)?Array.prototype.join.call(arguments,""):Z;console.warn(Q.typeName+": WARN: "+Z)}function U(Z){Z=(arguments&&arguments.length>1)?Array.prototype.join.call(arguments,""):Z;console.error(Q.typeName+": ERROR: "+Z)}function L(Z){return !Z?Z:Z.toLowerCase().replace(/^\w/,function(a){return a.toUpperCase()})}function Y(d,b){var a=undefined;var Z=d.border||D.cols.border;if(Z&&b.col.isLastColumn&&(b.table.frame===C.FRAME.ALL||b.table.frame===C.FRAME.SIDES)){switch(Z){case C.BORDER.BOTH:Z=C.BORDER.BOTTOM;break;case C.BORDER.RIGHT:Z=C.BORDER.NONE;break}}if(Z&&b.row.isLastRow&&(b.table.frame===C.FRAME.ALL||b.table.frame===C.FRAME.TOPBOT||b.table.frame===C.FRAME.BOTTOM)){switch(Z){case C.BORDER.BOTH:Z=C.BORDER.RIGHT;break;case C.BORDER.BOTTOM:Z=C.BORDER.NONE;break}}if(Z){a=E;switch(Z){case C.BORDER.BOTH:case C.BORDER.BOTTOM:case C.BORDER.RIGHT:a+=L(Z);break;case C.BORDER.NONE:a=undefined;break;default:U('Unknown border value: "',Z,'"');a=D.cols.border?a+L(D.cols.border):undefined}}return a}function T(a){var Z="tableFrame";var b=a.table.frame;switch(b){case C.FRAME.ALL:case C.FRAME.BOTTOM:case C.FRAME.SIDES:case C.FRAME.TOP:case C.FRAME.TOPBOT:Z+=L(b);break;case C.FRAME.NONE:Z=undefined;break;default:U('Unknown frame value: "',b,'"');Z=D.cols.frame?Z+L(D.table.frame):undefined}return Z}function H(a){var b="tableAlign";var d=a.align||D.cols.align;if(!d){b=undefined}else{switch(d){case C.ALIGN.CENTER:case C.ALIGN.LEFT:case C.ALIGN.RIGHT:b+=L(d);break;default:U('Unknown align value: "',d,'"');b=D.cols.align?b+L(D.cols.align):undefined}}if(b){var Z=a.valign||D.cols.valign;if(!Z){b=undefined}else{switch(Z){case C.VALIGN.BOTTOM:case C.VALIGN.MIDDLE:case C.VALIGN.TOP:b+=L(Z);break;default:U('Unknown valign value: "',Z,'"');b=D.cols.valign?b+L(D.cols.valign):undefined}}}return b}return Q}return{__init__:function(){},create:function(G){return A(G)},setRenderHeaderBottomBorderAlways:function(G){F=G}}}();var rlVmrTeaser=function(){function A(F,C){var D={};D.typeName="rlVmrTeaser";var B=undefined;function E(){C.registerContentPageLoadedListener({success:function(){B=undefined}})}D.render=function(J){if(!B){B=jq("<div></div>").addClass("teaserContainer").addClass("clearfix");ret=B}var K=jq("<div></div>").addClass("teaser");var N=jq("<div />").addClass("teaserImageClip");var I=jq("<img/>").attr("src",C.createAbsoluteImgUrl(J.image.url));I.appendTo(N);N.appendTo(K);var M=jq("<h4></h4>").text(J.title).addClass("headlineh4Mixed");M.appendTo(K);var G=jq("<div></div>").addClass("teaserDescription").addClass("copyText");G.text(J.description.text);G.appendTo(K);var L=F.render(J.link);var H=L.find("a");H.addClass("linkArrow13px").css("text-decoration","none");L.appendTo(K);if(H.length===1){I.click(function(){H.click()});I.css("cursor","pointer")}K.appendTo(B);if(B.children().length===4){B=undefined}return ret};E();return D}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlVmrTocPage=function(){function A(F,J){var H={};H.typeName="rlVmrTocPage";H.render=function(L){var K=jq("<div/>");K.append(G(L));K.append(D(L.chapters));return K};function G(K){return jq("<h1/>").addClass("pagetitle").text(K.title)}function D(L){var M=jq("<div/>").addClass("chapters");for(var K=0;K<L.length;K++){M.append(I(L[K]))}return M}function C(M,L){B(M);var K=0,O=1;for(var N=0;N<M.subChapters.length;N++){K+=M.subChapters[N].lineCount;if(K>L){K=1;O++}M.subChapters[N].columnIndex=O-1}if(O>3){C(M,L+1)}}function B(K){var N=jq("<div/>").addClass("tocMeasurementContainer");N.appendTo(jq("body"));for(var L=0,M=E();L<K.subChapters.length;L++){N.empty();var P=K.subChapters[L];var O=jq("<a/>").text(P.title);O.attr("href","javascript:void(0)");O.addClass("linkArrow13px");O.appendTo(N);K.subChapters[L].lineCount=O.height()/M}N.remove()}function E(L){var M=jq("<a/>").text("Yadda yadda");M.attr("href","javascript:void(0)");M.addClass("linkArrow13px");M.appendTo(jq("body"));var K=M.height();M.remove();return K}function I(L){C(L,4);var S=jq("<div/>").addClass("tocChapter").addClass("clearfix");var T=J.createAbsoluteImgUrl(L.thumbnail.url);var N=jq("<div />").addClass("teaserImageClip");var K=jq("<img/>").attr("src",T);K.appendTo(N);N.appendTo(S);var M=jq("<h3/>").text(L.title);M.appendTo(S);var Q=[jq("<div/>").addClass("chapterColumn1"),jq("<div/>").addClass("chapterColumn2"),jq("<div/>").addClass("chapterColumn3")];Q[0].appendTo(S);Q[1].appendTo(S);Q[2].appendTo(S);for(var O=0;O<L.subChapters.length;O++){var R=L.subChapters[O];var P=jq("<a/>").text(R.title);P.attr("href","javascript:void(0)");P.addClass("linkArrow13px");P.appendTo(Q[R.columnIndex]);(function(U){P.click(function(){J.loadContentPage(U)})})(R.target)}return S}return H}return{__init__:function(){},create:function(C,B){return A(C,B)}}}();var rlWatchlistBaseFS=function(){function A(G,S){var M=CoreFormsBase.inheritanceFrom(rlFormFieldSet.createFS(G,S));var I=M.parent;M.typeName="rlWatchlistBaseFS";M.options={};var U;M.init=function(){I.init();L();H()};M.onFormReady=function(){I.onFormReady();U=rlDloBaseFS.getDloId(G);rlDloEventsController.getController(G).addSelectEventListener(M);rlPreferredDealersModel.addChangeListener(M);rlPreferredDealersModel.addErrorListener(M);rlBmwStateOverlay.initDitherLayer("watchlistBaseFS","watchlistBaseFS");if(M.isDealerManagementEnabled()){G.parents(".watchlistBaseFS").addClass("isDealerManagementEnabled")}};M.onFormClosing=function(){I.onFormClosing();rlDloEventsController.getController(G).removeSelectEventListener(M);rlPreferredDealersModel.removeChangeListener(M);rlPreferredDealersModel.removeErrorListener(M)};M.onPreferredDealersModelChange=function(W){M.updateView(W)};M.onPreferredDealersModelError=function(X){if(X==rlPreferredDealersModel.errorTypes.ERROR_PDM_MAXIMUM_REACHED){var W=rlSmallAccordion.getInstance(rlDloBaseFS.getDloDiv(G));if(isDefined(W)){W.expandTab("watchlistTab")}G.find(".msgMaxNumPreferredDealersReached").show()}};M.supportsInputCache=function(){return false};M.isDloMapVisible=function(){return true};M.updateView=function(W){if(S.isLoggedIn===false){B()}else{Q(W);D(W);if(W.length>0){C()}else{R()}if(W.length<rlPreferredDealersModelConfig.getNumMaxPreferredDealers()){G.find(".msgMaxNumPreferredDealersReached").hide()}}};M.buildDealerInfo=function(X){var W=rlDealerBuilder.create(X);W.addHtml(M.createDealerDataMarkup(X));W.addHtml(M.createDealerLinksMarkup(X));if(M.isDealerManagementEnabled()){W.addRemoveIcon(E);W.addDeleteDialog(K(X),V)}return W.build()};M.createDealerDataMarkup=function(W){var X=rlDealerDataBuilder.create(W);X.addDither();X.addName();X.addAddress();return X.build()};M.createDealerLinksMarkup=function(W){var X=rlDloEventTracker.create("Watchlist",S.formType,U);var Y=rlDealerLinksBuilder.create(W,X);if(M.isHomepageLinkEnabled()){Y.addHomepageLink()}if(M.isDloMapVisible()===true){Y.addDetailsLink(M.onDetailsLinkClicked(W))}if(M.isDealerManagementEnabled()&&W.primary===false){Y.addMarkPrimaryLink(M.onMakePrimaryLinkClicked(W))}return Y.build()};M.onDetailsLinkClicked=function(W){return function(){M.toggleBrandContextIfNeeded(W);rlDloEventsController.getController(G).fireSelectionEvent("highlight",W);jq(window).trigger(rlTrackingListener.EVENTS.EVENT_TRACKING_LISTENER_NOTIFICATION,{id:"dealerWatchlistDetails",info:W.key,type:rlTrackingListener.TRACKING_TYPES.LINK});return false}};M.onMakePrimaryLinkClicked=function(W){W.brandContext=rlDloSubBrandService.getSubBrand(U);return function(){rlPreferredDealersModel.setPrimaryDealer(W,function(){rlDloEventsController.getController(G).fireSelectionEvent("markPrimary",W)},function(){console.error("dealer ["+W.key+"] could not be marked as primary!")});return false}};M.onPlanRouteLinkClicked=function(W){return function(){M.toggleBrandContextIfNeeded(W);rlDloEventsController.getController(G).fireSelectionEvent("route",W);return false}};M.toggleBrandContextIfNeeded=function(X){var W=rlDloSubBrandService.getSubBrand(U);if(rlDealerFilterHelper.hasBrandMismatch(X,W)){var Y=W==="BM"?"BI":"BM";rlDloSubBrandService.setSubBrand(Y,U)}};M.isDealerManagementEnabled=function(){return rlDloBaseFS.getDloDiv(G).hasClass("dealerManagementEnabled")};M.isHomepageLinkEnabled=function(){return rlDloBaseFS.getDloDiv(G).hasClass("homepageLinkEnabled")};function L(){M.options.params=M.getFieldsetProperties();M.options.divSelectedDealer=".preferredDealersContent .dloDealer.selected";M.options.divPreferredDealersContent=".preferredDealersContent"}function H(){G.find(".loginLink").click(function(W){rlUserDialog.showLoginDialog();return false})}function N(){return G.find(".msgWatchlistEmpty")}function T(){return G.find(".loginText")}function F(){return G.find(".preferredDealersContent")}function C(){F().show();N().hide();T().hide()}function R(){N().show();T().hide();F().hide()}function B(){T().show();N().hide();F().hide()}function Q(W){var X=F();X.empty();jq(P(W)).each(function(Z,a){var Y=M.buildDealerInfo(a,a.primary);X.append(Y)})}function D(W){var X=M.options.params.txtnumofpreferreddealer;if(isDefined(X)){X=X.replace(/RQ_SUB_CNT/g,W.length);G.find("h4.preferredDealers").html(X)}}function E(){G.addClass("isShowingDeleteDialog");return false}function K(W){return function(){G.find(".dloDealer").removeClass("isShowingDeleteDialog");J("dloWatchListDealerRemoveButtonClicked_"+W.key,"dloAction");rlBmwStateOverlay.showLoadingState("watchlistBaseFS");O(W);return false}}function O(W){W.brandContext=rlDloSubBrandService.getSubBrand(U);rlPreferredDealersModel.removePreferredDealer(W,function(){rlBmwStateOverlay.hideState("watchlistBaseFS")},function(){rlBmwStateOverlay.hideState("watchlistBaseFS");console.error("dealer ["+W.key+"] could not be removed from user!")})}function V(){G.find(".dloDealer").removeClass("isShowingDeleteDialog");return false}function P(W){W.sort(function(Y,X){return Y.id>X.id?1:-1});return W}function J(X,W){if(window.rlCoreServices&&window.rlCoreServices.trackEventAsClick){window.rlCoreServices.trackEventAsClick(X,W)}}return M}return{__init__:function(){},__start__:function(){},createFS:function(B,C){return A(B,C)}}}();